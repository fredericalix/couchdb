webpackJsonp([1,2],[,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(272),r=a(i),l=n(512),s=a(l),u=n(511),c=a(u),d=n(137),f=a(d),p=n(513),h=a(p),m=n(271),_=a(m),g=n(510),E=a(g),b=n(44),y=a(b),v=n(43),N=a(v),D=n(18),O=a(D),S=n(140),T=a(S);N.default.$=y.default,N.default.ajax=function(){return N.default.$.ajax.apply(N.default.$,arguments)},o(r.default,{Router:s.default,RouteObject:c.default,utils:f.default,Store:h.default,dispatcher:E.default,Promise:T.default,Events:O.default.extend({},N.default.Events)}),r.default.constants=_.default,r.default.dispatch=E.default.dispatch,r.default.navigate=function(e,t){var n=O.default.extend({trigger:!0},t);r.default.router.navigate(e,n),n.trigger&&r.default.router.trigger("trigger-update")},r.default.beforeUnload=function(){r.default.router.beforeUnload.apply(r.default.router,arguments)},r.default.removeBeforeUnload=function(){r.default.router.removeBeforeUnload.apply(r.default.router,arguments)},r.default.addRoute=function(e){r.default.router.route(e.route,e.name,e.callback)};var C={};r.default.registerUrls=function(e,t){C[e]=t},r.default.url={encode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+\/]/g.test(e)?encodeURIComponent(e):e},decode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+\/]/g.test(e)?decodeURIComponent(e):e}},r.default.urls=function(e,t){var n,a=r.default.getExtensions("urls:interceptors"),o=arguments;return O.default.find(a,function(e){var t=e.apply(null,o);return!!t&&(n=t,!0)}),O.default.isUndefined(n)?C[e]?C[e][t]?(o=Array.prototype.slice.call(arguments,2),n=C[e][t].apply(null,o)):(console.error("could not find context ",t),""):(console.error("could not find name ",e),""):n},r.default.getIndexTypePropNames=function(){var e=r.default.getExtensions("IndexTypes:propNames");return e.push("views"),e},t.default=r.default},,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(44);var i=n(514),r=a(i),l=n(18),s=a(l),u=n(138),c=a(u),d=n(137),f=a(d),p=n(2),h=a(p);if(n(607),s.default.isUndefined(console)&&(console={log:function(){},trace:function(){},debug:function(){}}),s.default.isUndefined(window.location.origin)){var m="";window.location.port&&(m=":"+window.location.port),window.location.origin=window.location.protocol+"//"+window.location.hostname+m}o(r.default,{utils:f.default,getParams:h.default.utils.getParams,helpers:c.default}),h.default.config({addHeaderLink:function(e){h.default.dispatch({type:"ADD_NAVBAR_LINK",link:e})},updateHeaderLink:function(e){h.default.dispatch({type:"UPDATE_NAVBAR_LINK",link:e})},removeHeaderLink:function(e){h.default.dispatch({type:"REMOVE_NAVBAR_LINK",link:e})},hideLogin:function(){h.default.dispatch({type:"NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION",visible:!1})},showLogout:function(){h.default.dispatch({type:"NAVBAR_SHOW_LOGOUT_BUTTON"})},showLogin:function(){h.default.dispatch({type:"NAVBAR_SHOW_LOGIN_BUTTON"})}}),t.default=r.default},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(391),o=n(403),i=n(392),r=n(401),l=n(213),s=n(393),u=n(129),c=n(214),d=n(211),f=n(399),p=n(397),h=n(212),m=n(394),_=n(398),g=n(404),E=n(210),b=n(396),y=n(95),v=n(400),N=n(395),D=n(402);t.default={BadgeList:a.BadgeList,Badge:a.Badge,BulkActionComponent:i.BulkActionComponent,ConfirmButton:m.ConfirmButton,ToggleHeaderButton:o.ToggleHeaderButton,StyledSelect:r.StyledSelect,CodeEditorPanel:s.CodeEditorPanel,CodeEditor:u.CodeEditor,StringEditModal:l.StringEditModal,ZenModeOverlay:c.ZenModeOverlay,Beautify:d.Beautify,PaddedBorderedBox:f.PaddedBorderedBox,Polling:v.Polling,Document:p.Document,LoadLines:h.LoadLines,MenuDropDown:_.MenuDropDown,TrayContents:g.TrayContents,TrayWrapper:g.TrayWrapper,connectToStores:g.connectToStores,ApiBarController:E.ApiBarController,DeleteDatabaseModal:b.DeleteDatabaseModal,TabElement:y.TabElement,TabElementWrapper:y.TabElementWrapper,RefreshBtn:v.RefreshBtn,Copy:N.Copy,TabWindowWrapper:D.TabWindowWrapper}},,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DocEditorLayout=t.DocEditorContent=t.OnePaneSimpleLayout=t.OnePaneFooter=t.OnePaneContent=t.OnePaneHeader=t.OnePane=t.ApiBarWrapper=void 0;var o=n(1),i=a(o),r=n(0),l=a(r),s=n(10),u=(a(s),n(77)),c=n(210),d=n(96),f=t.ApiBarWrapper=function(e){var t=e.docURL,n=e.endpoint;return l.default.createElement("div",{className:"faux__jsondoc-wrapper"},l.default.createElement(c.JSONLink,{endpoint:n}),l.default.createElement(c.DocLink,{docURL:t}))},p=t.OnePane=function(e){var t=e.children;return l.default.createElement("div",{id:"dashboard",className:"one-pane "},t)},h=t.OnePaneHeader=function(e){var t=e.showApiUrl,n=e.docURL,a=e.endpoint,o=e.crumbs,i=e.children;return l.default.createElement("header",null,l.default.createElement("div",{className:"flex-layout flex-row"},l.default.createElement("div",{id:"breadcrumbs",className:"flex-body"},l.default.createElement(d.Breadcrumbs,{crumbs:o})),l.default.createElement("div",{id:"right-header"},l.default.createElement("div",{className:"right-header-flex"},i)),t?l.default.createElement(f,{docURL:n,endpoint:a}):null,l.default.createElement("div",{id:"notification-center-btn"},l.default.createElement(u.NotificationCenterButton,null))))};h.defaultProps={showApiUrl:!0,crumbs:[]},h.propTypes={docURL:i.default.string,endpoint:i.default.string,crumbs:i.default.array};var m=t.OnePaneContent=function(e){var t=e.children;return l.default.createElement("div",{className:"content-area container-fluid"},l.default.createElement("div",{id:"tabs"}),l.default.createElement("div",{id:"dashboard-content",className:"scrollable"},t))},_=t.OnePaneFooter=function(e){var t=e.children;return l.default.createElement("div",{className:"faux__onepane-footer"},t)},g=(t.OnePaneSimpleLayout=function(e){var t=e.component,n=e.docURL,a=e.endpoint,o=e.crumbs;return l.default.createElement(p,null,l.default.createElement(h,{crumbs:o,endpoint:a,docURL:n}),l.default.createElement(m,null,t),l.default.createElement(_,null))},t.DocEditorContent=function(e){var t=e.children;return l.default.createElement("div",{id:"dashboard-content"},t)});t.DocEditorLayout=function(e){var t=e.component,n=e.docURL,a=e.endpoint,o=e.crumbs;return l.default.createElement("div",{id:"dashboard",className:"one-pane doc-editor-page"},l.default.createElement(h,{crumbs:o,endpoint:a,docURL:n}),l.default.createElement(g,null,t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={LAYOUT_ORIENTATION:{TABLE:"LAYOUT_TABLE",METADATA:"LAYOUT_METADATA",JSON:"LAYOUT_JSON"},INDEX_RESULTS_DOC_TYPE:{MANGO_INDEX:"MangoIndex",MANGO_QUERY:"MangoQueryResult",VIEW:"view"}}},,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=a(o),r=n(2),l=a(r),s=n(70),u=a(s),c=function(e){return _.isArray(e)?e[1]:e},d=function(e){var t=l.default.getExtensions("sidebar:links"),n="#"+l.default.urls("databaseBaseURL","app",l.default.url.encode(e));return[{title:"Add New",links:_.reduce(t,function(e,t){return e.push({title:t.title,url:n+"/"+t.url,icon:"fonticon-plus-circled"}),e},[{title:"New Doc",url:n+"/new",icon:"fonticon-plus-circled"},{title:"New View",url:n+"/new_view",icon:"fonticon-plus-circled"},f(e)])}]},f=function(e){var t="#"+l.default.urls("databaseBaseURL","app",l.default.url.encode(e));return{title:i.default.i18n.en_US["new-mango-index"],url:t+"/_index",icon:"fonticon-plus-circled"}},p=function(e){return JSON.parse('"'+e+'"')},h=function(e){return[{title:"Replicate Database",icon:"fonticon-replicate",url:l.default.urls("replication","app",e)},{title:"Delete",icon:"fonticon-trash",onClick:u.default.showDeleteDatabaseModal.bind(void 0,{showDeleteModal:!0,dbId:e})}]},m=function(e,t){var n=e.split("\n"),a=!1;return n.length>t&&(a=!0,n=n.slice(0,t),e=n.join("\n")),{isTruncated:a,content:e}},g=function(e){var t=encodeURIComponent(e);return l.default.urls("new","newDocument",t)},E=function(e,t){if(!t)return!1;var n=!1;if(e&&b(t)){var a="_design/"+t.params.designDocName,o=e.find(function(e){return e._id===a});n=void 0!==o&&o.views&&void 0!==o.views[t.params.indexName]&&void 0!==o.views[t.params.indexName].reduce}return n},b=function(e){return"designDoc"===e.navItem&&e.params&&"Views"===e.params.designDocSection&&e.params.indexName};t.default={getSeqNum:c,getNewButtonLinks:d,getModifyDatabaseLinks:h,getNewDocUrl:g,parseJSON:p,truncateDoc:m,selectedViewContainsReduceFunction:E,isViewSelected:b}},,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=a(o),r=n(2),l=a(r),s=n(101),u=a(s);u.default.UUID=l.default.Model.extend({initialize:function(e){e=_.extend({count:1},e),this.count=e.count},url:function(){return i.default.host+"/_uuids?count="+this.count},next:function(){return this.get("uuids").pop()}}),u.default.QueryParams=function(){var e=function(e,t){var n=_.clone(e);return _.each(["startkey","endkey","key"],function(e){_.has(n,e)&&(n[e]=t(n[e]))}),n};return{parse:function(t){return e(t,JSON.parse)},stringify:function(t){return e(t,JSON.stringify)}}}(),u.default.DdocInfo=l.default.Model.extend({idAttribute:"_id",documentation:function(){return l.default.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.database=t.database},url:function(e){return e||(e="server"),l.default.urls("designDocs",e,this.database.safeID(),this.safeID())},safeID:function(){var e=this.id.replace(/^_design\//,"");return"_design/"+i.default.utils.safeURLName(e)}}),u.default.NewDoc=u.default.Doc.extend({fetch:function(){var e=new u.default.UUID,t=this.deferred=$.Deferred(),n=this;return e.fetch().done(function(){n.set("_id",e.next()),t.resolve()}),t.promise()}}),u.default.BulkDeleteDoc=l.default.Model.extend({idAttribute:"_id"}),u.default.BulkDeleteDocCollection=l.default.Collection.extend({model:u.default.BulkDeleteDoc,sync:function(){},initialize:function(e,t){this.databaseId=t.databaseId},url:function(){return l.default.urls("bulk_docs","server",this.databaseId,"")},bulkDelete:function(){var e=this.createPayload(this.toJSON()),t=l.default.Deferred(),n=this;return $.ajax({type:"POST",url:this.url(),contentType:"application/json",dataType:"json",data:JSON.stringify(e)}).then(function(e){n.handleResponse(e,t)}).fail(function(){var e=_.reduce(n.toArray(),function(e,t){return e.push(t.id),e},[]);n.trigger("error",e),t.reject(e)}),t},handleResponse:function(e,t){var n=_.reduce(e,function(e,t){return t.error&&e.errorIds.push(t.id),t.error||e.successIds.push(t.id),e},{errorIds:[],successIds:[]});this.removeDocuments(n.successIds),n.errorIds.length&&this.trigger("error",n.errorIds),_.isEmpty(n.successIds)?t.reject(n.errorIds):t.resolve(n),this.trigger("updated")},removeDocuments:function(e){_.each(e,function(e){this.remove(this.get(e))},this),this.trigger("removed",e)},createPayload:function(e){return{docs:e}}}),u.default.MangoBulkDeleteDocCollection=u.default.BulkDeleteDocCollection.extend({url:function(){return i.default.host+"/"+this.databaseId+"/_index/_bulk_delete"},createPayload:function(e){return{docids:e.filter(function(e){return"_all_docs"!==e._id}).map(function(e){return e._id})}}}),t.default=u.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){e.database.safeID()!==v.getDatabaseName()&&_.default.dispatch({type:E.default.SIDEBAR_FETCHING}),e.designDocs.fetch().then(function(){_.default.dispatch({type:E.default.SIDEBAR_NEW_OPTIONS,options:e})},function(t){var n="Unable to update the sidebar.";t.responseJSON&&"not_found"===t.responseJSON.error&&(n="The "+e.designDocs.database.safeID()+" database does not exist.",_.default.navigate("/",{trigger:!0})),_.default.addNotification({msg:n,type:"error",clear:!0})})}function i(e){_.default.dispatch({type:E.default.SIDEBAR_FETCHING}),e.fetch().then(function(){_.default.dispatch({type:E.default.SIDEBAR_UPDATED_DESIGN_DOCS,options:{designDocs:e}})})}function r(e,t){_.default.dispatch({type:E.default.SIDEBAR_TOGGLE_CONTENT,designDoc:e,indexGroup:t})}function l(e,t){var n=$.extend(!0,{},{designDocName:"",designDocSection:"",indexName:""},t);n.navItem=e,_.default.dispatch({type:E.default.SIDEBAR_SET_SELECTED_NAV_ITEM,options:n})}function s(e,t,n,a){_.default.dispatch({type:E.default.SIDEBAR_SHOW_DELETE_INDEX_MODAL,options:{indexName:e,indexLabel:n,designDocName:t,onDelete:a}})}function u(){_.default.dispatch({type:E.default.SIDEBAR_HIDE_DELETE_INDEX_MODAL})}function c(e,t,n,a){_.default.dispatch({type:E.default.SIDEBAR_SHOW_CLONE_INDEX_MODAL,options:{sourceIndexName:e,sourceDesignDocName:t,onSubmit:a,indexLabel:n,cloneIndexModalTitle:"Clone "+n}})}function d(){_.default.dispatch({type:E.default.SIDEBAR_HIDE_CLONE_INDEX_MODAL})}function f(e){_.default.dispatch({type:E.default.SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED,options:{value:e}})}function p(e){_.default.dispatch({type:E.default.SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE,options:{value:e}})}function h(e){_.default.dispatch({type:E.default.SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME,options:{value:e}})}Object.defineProperty(t,"__esModule",{value:!0});var m=n(2),_=a(m),g=n(76),E=a(g),b=n(132),y=a(b),v=y.default.sidebarStore;t.default={newOptions:o,updateDesignDocs:i,toggleContent:r,selectNavItem:l,showDeleteIndexModal:s,hideDeleteIndexModal:u,showCloneIndexModal:c,hideCloneIndexModal:d,updateNewDesignDocName:f,selectDesignDoc:p,setNewCloneIndexName:h}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={REPLICATION_SOURCE:{LOCAL:"REPLICATION_SOURCE_LOCAL",REMOTE:"REPLICATION_SOURCE_REMOTE"},REPLICATION_TARGET:{EXISTING_LOCAL_DATABASE:"REPLICATION_TARGET_EXISTING_LOCAL_DATABASE",EXISTING_REMOTE_DATABASE:"REPLICATION_TARGET_EXISTING_REMOTE_DATABASE",NEW_LOCAL_DATABASE:"REPLICATION_TARGET_NEW_LOCAL_DATABASE",NEW_REMOTE_DATABASE:"REPLICATION_TARGET_NEW_REMOTE_DATABASE"},REPLICATION_TYPE:{ONE_TIME:"REPLICATION_TYPE_ONE_TIME",CONTINUOUS:"REPLICATION_TYPE_CONTINUOUS"}}},,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.logout=t.hidePasswordModal=t.showPasswordModal=t.authenticate=t.createAdmin=t.changePassword=t.login=t.validatePasswords=t.validateUser=void 0;var o=n(2),i=a(o),r=n(11),l=a(r),s=n(207),u=a(s),c=n(204),d=a(c),f=n(127),p=a(f),h=d.default.AUTH_SHOW_PASSWORD_MODAL,m=d.default.AUTH_HIDE_PASSWORD_MODAL,g=u.default.nodesStore,E=function(e){var t=e.message;i.default.addNotification({msg:t,type:"error"})},b=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return e})},y=t.validateUser=function(e,t){return b(!_.isEmpty(e),!_.isEmpty(t))},v=t.validatePasswords=function(e,t){return b(!_.isEmpty(e),!_.isEmpty(t),e===t)},N=(t.login=function(e,t,n){return y(e,t)?p.default.login({name:e,password:t}).then(function(e){if(e.error)return E({message:e.reason}),e;var t=l.default.i18n.en_US["auth-logged-in"];if(t&&i.default.addNotification({msg:t}),n&&!n.includes("login"))return i.default.navigate(n);i.default.navigate("/")}).catch(E):E({message:l.default.i18n.en_US["auth-missing-credentials"]})},t.changePassword=function(e,t,n){return function(){if(!v(t,n))return E({message:l.default.i18n.en_US["auth-passwords-not-matching"]});var a=g.getNodes();p.default.createAdmin({name:e,password:t,node:a[0].node}).then(function(){i.default.addNotification({msg:l.default.i18n.en_US["auth-change-password"]})},E)}},t.createAdmin=function(e,t,n){return function(){var a=g.getNodes()[0].node;if(!y(e,t))return E({message:l.default.i18n.en_US["auth-missing-credentials"]});p.default.createAdmin({name:e,password:t,node:a}).then(function(e){return e.error?E({message:l.default.i18n.en_US["auth-admin-creation-failed-prefix"]+" "+e.reason}):(i.default.addNotification({msg:l.default.i18n.en_US["auth-admin-created"]}),n?i.default.navigate("/login"):void 0)})}},t.authenticate=function(e,t,n){p.default.login({name:e,password:t}).then(function(){N(),n(e,t)},function(){i.default.addNotification({msg:"Your username or password is incorrect.",type:"error",clear:!0})})},t.showPasswordModal=function(){i.default.dispatch({type:h})},t.hidePasswordModal=function(){i.default.dispatch({type:m})});t.logout=function(){i.default.addNotification({msg:"You have been logged out."}),p.default.logout().then(p.default.getSession).then(function(){return i.default.navigate("/")}).catch(E)}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.processBulkDeleteResponse=t.bulkDeleteDocs=t.validateBulkDelete=t.deleteErrorMessage=t.fetchDocs=t.removeOverflowDocsAndCalculateHasNext=t.mergeParams=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(2),l=o(r),s=n(46),u=o(s),c=n(30),d=o(c),f=n(74),p=n(244),h=a(p),m=n(73),_=1e4,g=t.mergeParams=function(e,t){var n={},a=(t.skip||0)+t.limit;n.skip=Math.max(e.skip,t.skip||0),n.limit=e.limit,e.conflicts&&(n.conflicts=!0);var o=a-n.skip;return{params:i({},t,n),totalDocsRemaining:o}},E=t.removeOverflowDocsAndCalculateHasNext=function(e,t,n){var a=!1;return t&&e.length>t?e.splice(t):e.length===n&&(e.splice(n-1),a=!0),{finalDocList:e,canShowNext:a}},b=t.fetchDocs=function(e,t,n){var a=g(t,n),o=a.params,i=a.totalDocsRemaining;return o.limit=Math.min(o.limit,_),function(t){return t((0,m.nowLoading)()),e(o).then(function(e){var n=e.docs,a=e.docType,r=e.executionStats,l=e.warning,s=E(n,i,o.limit),u=s.finalDocList,c=s.canShowNext;a===d.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX&&t((0,m.changeLayout)(d.default.LAYOUT_ORIENTATION.JSON)),t((0,m.newResultsAvailable)(u,o,c,a,r,l))}).catch(function(e){l.default.addNotification({msg:"Error running query. "+(0,f.errorReason)(e),type:"error",clear:!0}),t((0,m.resetState)())})}},y=t.deleteErrorMessage=function(e){var t="Failed to delete your document!";e&&(t="Failed to delete: "+e.join(", ")),l.default.addNotification({msg:t,type:"error",clear:!0})},v=t.validateBulkDelete=function(e){var t=e.length,n=1===t?"Are you sure you want to delete this doc?":"Are you sure you want to delete these "+t+" docs?";return 0===t?(window.alert("Please select the document rows you want to delete."),!1):!!window.confirm(n)},N=(t.bulkDeleteDocs=function(e,t,n,a,o,i,r){return!!v(n)&&function(l){var s=void 0,u=void 0;if(r===d.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX)u={docids:n.map(function(e){return e._id})},s=h.postToIndexBulkDelete(e,u);else{if(r!==d.default.INDEX_RESULTS_DOC_TYPE.VIEW&&r!==d.default.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY)throw new Error("Invalid document type: "+r);u={docs:n},s=h.postToBulkDocs(e,u)}return s.then(function(e){if(e.error)return void y();N(e,n,a,r),l((0,m.newSelectedDocs)()),l(b(t,o,i))})}},t.processBulkDeleteResponse=function(e,t,n,a){l.default.addNotification({msg:"Successfully deleted your docs",clear:!0});var o=[];a===d.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX?e.fail&&(o=e.fail.map(function(e){return e.id})):o=e.filter(function(e){return!!e.error}).map(function(e){return e.id});var i=!!t.map(function(e){return e._id}).find(function(e){return/_design/.test(e)});o.length>0&&y(o),n&&i&&u.default.updateDesignDocs(n)})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),u=a(s),c=n(1),d=a(c),f=n(0),p=a(f),h=n(10),m=(a(h),n(19)),g=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getClasses=function(){var e={js:"lang-js"},t="prettyprint";return _.has(e,a.props.lang)&&(t+=" "+e[a.props.lang]),t},r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"render",value:function(){var e=JSON.stringify(this.props.code,null," ");return p.default.createElement("div",null,p.default.createElement("pre",{className:this.getClasses()},e))}}]),t}(p.default.Component);g.defaultProps={lang:"js"};var E=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getVisiblePages=function(e,t){var n,o;if(t<a.props.maxNavPages)n=1,o=t+1;else{var i=Math.floor(a.props.maxNavPages/2);n=e-i,o=e+i,n<=1&&(n=1,o=a.props.maxNavPages+1),o>t+1&&(n=t-(a.props.maxNavPages-1),o=t+1)}return{from:n,to:o}},a.createItemsForPage=function(e){return _.range(e.from,e.to).map(function(e){return p.default.createElement("li",{key:e,className:this.props.page===e?"active":null},this.getLink(e,e))}.bind(a))},a.getLink=function(e,t){return a.props.onClick?p.default.createElement("a",{onClick:a.props.onClick.bind(null,e),dangerouslySetInnerHTML:{__html:t}}):p.default.createElement("a",{href:a.props.urlPrefix+e+a.props.urlSuffix,dangerouslySetInnerHTML:{__html:t}})},a.getTotalPages=function(){return 0===a.props.total?1:Math.ceil(a.props.total/a.props.perPage)},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e=this.getTotalPages(),t=this.getVisiblePages(this.props.page,e),n=this.createItemsForPage(t),a=Math.max(this.props.page-1,1),o=Math.min(this.props.page+1,e);return p.default.createElement("ul",{className:"pagination"},p.default.createElement("li",{className:1===this.props.page?"disabled":null},this.getLink(a,"&laquo;")),n,p.default.createElement("li",{className:this.props.page<e?null:"disabled"},this.getLink(o,"&raquo;")))}}]),t}(p.default.Component);E.defaultProps={perPage:u.default.constants.MISC.DEFAULT_PAGE_SIZE,onClick:null,page:1,total:0,urlPrefix:"",urlSuffix:"",maxNavPages:10};var b=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.close=function(e){e&&e.preventDefault(),a.props.onClose()},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e=p.default.createElement("p",null,this.props.text);_.isString(this.props.text)||(e=this.props.text);var t="btn "+this.props.buttonClass;return p.default.createElement(m.Modal,{dialogClassName:"confirmation-modal",show:this.props.visible,onHide:this.close},p.default.createElement(m.Modal.Header,{closeButton:!0},p.default.createElement(m.Modal.Title,null,this.props.title)),p.default.createElement(m.Modal.Body,null,e),p.default.createElement(m.Modal.Footer,null,p.default.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.close},"Cancel"),p.default.createElement("button",{className:t,onClick:this.props.onSubmit},p.default.createElement("i",{className:"fonticon-ok-circled"})," ",this.props.successButtonLabel)))}}]),t}(p.default.Component);b.propTypes={visible:d.default.bool.isRequired,text:d.default.oneOfType([d.default.string,d.default.element]).isRequired,onClose:d.default.func.isRequired,onSubmit:d.default.func.isRequired},b.defaultProps={visible:!1,title:"Please confirm",text:"",successButtonLabel:"Okay",buttonClass:"btn-primary",onClose:function(){},onSubmit:function(){}},t.default={CodeFormat:g,Pagination:E,ConfirmationModal:b}},,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(208),l=a(r),s=n(206),u=a(s);t.default={fetchNodes:function(){var e=this,t=new l.default.ClusterNodes;t.fetch().then(function(){e.updateNodes({nodes:t.get("nodes_mapped")})})},updateNodes:function(e){i.default.dispatch({type:u.default.CLUSTER_FETCH_NODES,options:e})},navigateToNodeBasedOnNodeCount:function(e){var t=new l.default.ClusterNodes;t.fetch().then(function(){var n=t.get("all_nodes");return 1===n.length?i.default.navigate(e+n[0]):i.default.navigate("/cluster/disabled",{trigger:!0})})}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){l.default.dispatch({type:u.default.CMPNTS_DATABASES_SHOWDELETE_MODAL,options:e})}function i(e){var t=l.default.urls("databaseBaseURL","server",e,"");$.ajax({url:t,dataType:"json",type:"DELETE"}).then(function(){this.showDeleteDatabaseModal({showModal:!0}),l.default.addNotification({msg:"The database <code>"+_.escape(e)+"</code> has been deleted.",clear:!0,escape:!1}),Backbone.history.loadUrl(l.default.urls("allDBs","app"))}.bind(this)).fail(function(e,t,n){l.default.addNotification({msg:"Could not delete the database, reason "+n+".",type:"error",clear:!0})})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),l=a(r),s=n(209),u=a(s);t.default={deleteDatabase:i,showDeleteDatabaseModal:o}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=a(o),r=n(2),l=a(r),s=n(418),u=a(s);n(599),u.default.initialize=function(){l.default.addHeaderLink({href:"#/_all_dbs",title:"Databases",icon:"fonticon-database",className:"databases"})},u.default.databaseUrl=function(e){var t=_.isObject(e)?e.id:e;return["/database/",i.default.utils.safeURLName(t),"/_all_docs?limit="+u.default.DocLimit].join("")},l.default.registerUrls("changes",{server:function(e,t){return i.default.host+"/"+e+"/_changes"+t},app:function(e,t){return"/database/"+e+"/_changes"+t},apiurl:function(e,t){return window.location.origin+"/"+e+"/_changes"+t}}),l.default.registerUrls("allDBs",{server:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i.default.host+"/_all_dbs"+e},app:function(){return"_all_dbs"},apiurl:function(){return window.location.origin+"/_all_dbs"}}),l.default.registerUrls("databaseBaseURL",{server:function(e){return window.location.origin+"/"+i.default.utils.safeURLName(e)},app:function(e){return"/database/"+e}}),l.default.registerUrls("permissions",{server:function(e){return i.default.host+"/"+e+"/_security"},app:function(e){return"/database/"+e+"/permissions"},apiurl:function(e){return window.location.origin+"/"+e+"/_security"}}),t.default=u.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=a(o),r=n(2),l=a(r),s=n(45),u=a(s),c=l.default.addon();c.DocLimit=100,c.Model=l.default.Model.extend({documentation:function(){return l.default.constants.DOC_URLS.ALL_DBS},buildAllDocs:function(e){return this.allDocs=new u.default.AllDocs(null,{database:this,params:e}),this.allDocs},isNew:function(){return!1},isSystemDatabase:function(){return i.default.utils.isSystemDatabase(this.id)},url:function(e){return"index"===e?"/database/"+this.safeID()+"/_all_docs":"web-index"===e?"#/database/"+this.safeID()+"/_all_docs?limit="+c.DocLimit:"apiurl"===e?window.location.origin+"/database/"+this.safeID()+"/_all_docs":"changes"===e?l.default.urls("changes","app",this.safeID(),"?descending=true&limit=100&include_docs=true"):"changes-apiurl"===e?l.default.urls("changes","apiurl",this.safeID(),"?descending=true&limit=100&include_docs=true"):"app"===e?"/database/"+this.safeID():i.default.host+"/"+this.safeID()},safeID:function(){return i.default.utils.safeURLName(this.id)},buildChanges:function(e){return e.limit||(e.limit=100),this.changes=new c.Changes({database:this,params:e}),this.changes}}),c.Changes=l.default.Collection.extend({initialize:function(e){this.database=e.database,this.params=e.params},documentation:function(){return l.default.constants.DOC_URLS.CHANGES},url:function(e){var t="";return this.params&&(t="?"+$.param(this.params)),e||(e="server"),l.default.urls("changes",e,this.database.safeID(),t)},parse:function(e){return this.last_seq=e.last_seq,e.results}}),t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.changeTableHeaderAttribute=t.changeLayout=t.bulkCheckOrUncheck=t.selectDoc=t.newSelectedDocs=t.newResultsAvailable=t.resetState=t.nowLoading=void 0;var o=n(98),i=a(o),r=n(74),l=(t.nowLoading=function(){return{type:i.default.INDEX_RESULTS_REDUX_IS_LOADING}},t.resetState=function(){return{type:i.default.INDEX_RESULTS_REDUX_RESET_STATE}},t.newResultsAvailable=function(e,t,n,a,o,r){return{type:i.default.INDEX_RESULTS_REDUX_NEW_RESULTS,docs:e,params:t,canShowNext:n,docType:a,executionStats:o,warning:r}},t.newSelectedDocs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:i.default.INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS,selectedDocs:e}});t.selectDoc=function(e,t){var n=t.findIndex(function(t){return t._id===e._id});return n>-1?t.splice(n,1):(e._deleted=!0,t.push(e)),l(t)},t.bulkCheckOrUncheck=function(e,t,n,a){return e.forEach(function(e){if((0,r.isJSONDocBulkDeletable)(e,a)){var o=t.findIndex(function(t){return(0,r.getDocId)(e,a)===t._id});n?t.splice(o,1):-1===o&&t.push({_id:(0,r.getDocId)(e,a),_rev:(0,r.getDocRev)(e,a),_deleted:!0})}}),l(t)},t.changeLayout=function(e){return{type:i.default.INDEX_RESULTS_REDUX_CHANGE_LAYOUT,layout:e}},t.changeTableHeaderAttribute=function(e,t){return t[e.index]=e.newSelectedRow,{type:i.default.INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE,selectedFieldsTableView:t}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.errorReason=t.getDocRev=t.getDocId=t.getDefaultPerPage=t.hasBulkDeletableDoc=t.isJSONDocBulkDeletable=t.isJSONDocEditable=t.isGhostDoc=t.getDocUrl=void 0;var o=n(11),i=a(o),r=n(2),l=a(r),s=n(30),u=a(s),c=function(e,t,n){void 0===e&&(e="server");var a=i.default.utils.getSafeIdForDoc(t);a||(a="");var o=encodeURIComponent(n);return l.default.urls("document",e,o,a,"?conflicts=true")},d=function(e,t){if(e)return t!==u.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX&&!!Object.keys(e).length&&!!e._id},f=function(e,t){return t===u.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX?"special"!==e.type:!(!e._id&&!e.id||!(e._rev||e.value&&e.value.rev))},p=function(e,t){return!!e.find(function(e){return f(e,t)})},h=function(){if(window.localStorage){var e=i.default.utils.localStorageGet("fauxton:perpageredux");if(e)return parseInt(e,10)}return l.default.constants.MISC.DEFAULT_PAGE_SIZE},m=function(e){return!e||!e.attributes||!Object.keys(e.attributes).length},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.INDEX_RESULTS_DOC_TYPE.VIEW;return t===u.default.INDEX_RESULTS_DOC_TYPE.VIEW?e.id||e._id:t===u.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX?"special"===e.type?"_all_docs":e.ddoc:t===u.default.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY?e._id:e.id||e._id},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.INDEX_RESULTS_DOC_TYPE.VIEW;return t===u.default.INDEX_RESULTS_DOC_TYPE.VIEW?e.value&&e.value.rev:t!==u.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX&&t===u.default.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY?e._rev:void 0},E=function(e){return"Reason: "+(e&&e.message||"n/a")};t.getDocUrl=c,t.isGhostDoc=m,t.isJSONDocEditable=d,t.isJSONDocBulkDeletable=f,t.hasBulkDeletableDoc=p,t.getDefaultPerPage=h,t.getDocId=_,t.getDocRev=g,t.errorReason=E},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments[1];switch(t.type){case c.default.INDEX_RESULTS_REDUX_RESET_STATE:return r({},_,{selectedLayout:e.selectedLayout,selectedDocs:[],fetchParams:{limit:(0,m.getDefaultPerPage)()+1,skip:0},pagination:r({},_.pagination,{perPage:e.pagination.perPage}),queryOptionsPanel:r({},_.queryOptionsPanel,e.queryOptionsPanel,{reduce:!1,groupLevel:"exact",showReduce:!1}),isLoading:!1});case c.default.INDEX_RESULTS_REDUX_IS_LOADING:return r({},e,{isLoading:!0});case c.default.INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS:return r({},e,{selectedDocs:t.selectedDocs});case c.default.INDEX_RESULTS_REDUX_NEW_RESULTS:var n=e.selectedLayout;return t.docType===f.default.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY&&e.selectedLayout===f.default.LAYOUT_ORIENTATION.METADATA&&(n=f.default.LAYOUT_ORIENTATION.TABLE),r({},e,{docs:t.docs,isLoading:!1,isEditable:!0,fetchParams:r({},e.fetchParams,t.params),pagination:r({},e.pagination,{canShowNext:t.canShowNext}),docType:t.docType,selectedLayout:n,executionStats:t.executionStats,warning:t.warning});case c.default.INDEX_RESULTS_REDUX_CHANGE_LAYOUT:return r({},e,{selectedLayout:t.layout});case c.default.INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS:return r({},e,{tableView:r({},e.tableView,{showAllFieldsTableView:!e.tableView.showAllFieldsTableView,cachedFieldsTableView:e.tableView.selectedFieldsTableView})});case c.default.INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE:return r({},e,{tableView:r({},e.tableView,{selectedFieldsTableView:t.selectedFieldsTableView})});case c.default.INDEX_RESULTS_REDUX_SET_PER_PAGE:return s.default.utils.localStorageSet("fauxton:perpageredux",t.perPage),r({},e,{pagination:r({},_.pagination,{perPage:t.perPage})});case c.default.INDEX_RESULTS_REDUX_PAGINATE_NEXT:return r({},e,{pagination:r({},e.pagination,{pageStart:e.pagination.pageStart+e.pagination.perPage,currentPage:e.pagination.currentPage+1})});case c.default.INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS:return r({},e,{pagination:r({},e.pagination,{pageStart:e.pagination.pageStart-e.pagination.perPage,currentPage:e.pagination.currentPage-1})});case c.default.INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS:return t.options.includeDocs&&t.options.reduce?t.options.reduce=!1:t.options.includeDocs&&e.queryOptionsPanel.reduce?t.options.reduce=!1:t.options.reduce&&e.queryOptionsPanel.includeDocs&&(t.options.includeDocs=!1),r({},e,{queryOptionsPanel:r({},e.queryOptionsPanel,t.options)});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getFetchParams=t.getPerPage=t.getQueryOptionsPanel=t.getCanShowNext=t.getPrioritizedEnabled=t.getPageStart=t.getDocType=t.getTextEmptyIndex=t.getSelectedLayout=t.getIsEditable=t.getIsLoading=t.getSelectedDocs=t.getDocs=t.getQueryOptionsParams=t.getDisplayedFields=t.getCanShowPrevious=t.getNumDocsSelected=t.getHasDocsSelected=t.getAllDocsSelected=t.getHasResults=t.getPageEnd=t.getShowPrioritizedEnabled=t.getDataForRendering=t.removeGeneratedMangoDocs=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=o;var l=n(11),s=a(l),u=n(98),c=a(u),d=n(30),f=a(d),p=n(450),h=n(451),m=n(74),_={docs:[],selectedDocs:[],isLoading:!1,tableView:{selectedFieldsTableView:[],showAllFieldsTableView:!1},isEditable:!0,selectedLayout:f.default.LAYOUT_ORIENTATION.METADATA,textEmptyIndex:"No Documents Found",docType:f.default.INDEX_RESULTS_DOC_TYPE.VIEW,fetchParams:{limit:(0,m.getDefaultPerPage)()+1,skip:0},pagination:{pageStart:1,currentPage:1,perPage:(0,m.getDefaultPerPage)(),canShowNext:!1},queryOptionsPanel:{isVisible:!1,showByKeys:!1,showBetweenKeys:!1,includeDocs:!1,betweenKeys:{include:!0,startkey:"",endkey:""},byKeys:"",descending:!1,skip:"",limit:"none",reduce:!1,groupLevel:"exact",showReduce:!1}},g=t.removeGeneratedMangoDocs=function(e){return"query"!==e.language},E=t.getDataForRendering=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=e.docs,o={databaseName:t,selectedLayout:e.selectedLayout,selectedFieldsTableView:e.tableView.selectedFieldsTableView,showAllFieldsTableView:e.tableView.showAllFieldsTableView,docType:e.docType,deleteEnabled:n},i=a.filter(g);return f.default.LAYOUT_ORIENTATION.JSON===o.selectedLayout?(0,p.getJsonViewData)(i,o):(0,h.getTableViewData)(i,o)},b=(t.getShowPrioritizedEnabled=function(e){return e.selectedLayout===f.default.LAYOUT_ORIENTATION.TABLE},t.getPageEnd=function(e){return!!b(e)&&e.pagination.pageStart+e.docs.length-1},t.getHasResults=function(e){return!e.isLoading&&e.docs.length>0});t.getAllDocsSelected=function(e){if(0===e.docs.length||0===e.selectedDocs.length)return!1;for(var t=function(t){var n=e.docs[t];if(!(0,m.isJSONDocBulkDeletable)(n,e.docType))return"continue";var a=function(t){return(0,m.getDocId)(n,e.docType)===t._id};return e.selectedDocs.some(a)?void 0:{v:!1}},n=0;n<e.docs.length;n++){var a=t(n);switch(a){case"continue":continue;default:if("object"===(void 0===a?"undefined":i(a)))return a.v}}return!0},t.getHasDocsSelected=function(e){return e.selectedDocs.length>0},t.getNumDocsSelected=function(e){return e.selectedDocs.length},t.getCanShowPrevious=function(e){return e.pagination.currentPage>1},t.getDisplayedFields=function(e,t){return E(e,t).displayedFields||{}},t.getQueryOptionsParams=function(e){var t=e.queryOptionsPanel,n={};if(t.includeDocs&&(n.include_docs=t.includeDocs),t.showBetweenKeys){var a=t.betweenKeys;n.inclusive_end=a.include,a.startkey&&""!=a.startkey&&(n.start_key=a.startkey),a.endkey&&""!=a.endkey&&(n.end_key=a.endkey)}else t.showByKeys&&t.byKeys.trim()&&(n.keys=t.byKeys.replace(/\r?\n/g,""));return"none"!==t.limit&&(n.limit=parseInt(t.limit,10)),t.skip&&(n.skip=parseInt(t.skip,10)),t.descending&&(n.descending=t.descending),t.reduce&&(n.reduce=!0,"exact"===t.groupLevel?n.group=!0:n.group_level=t.groupLevel),n},t.getDocs=function(e){return e.docs},t.getSelectedDocs=function(e){return e.selectedDocs},t.getIsLoading=function(e){return e.isLoading},t.getIsEditable=function(e){return e.isEditable},t.getSelectedLayout=function(e){return e.selectedLayout},t.getTextEmptyIndex=function(e){return e.textEmptyIndex},t.getDocType=function(e){return e.docType},t.getPageStart=function(e){return e.pagination.pageStart},t.getPrioritizedEnabled=function(e){return e.tableView.showAllFieldsTableView},t.getCanShowNext=function(e){return e.pagination.canShowNext},t.getQueryOptionsPanel=function(e){return e.queryOptionsPanel},t.getPerPage=function(e){return e.pagination.perPage},t.getFetchParams=function(e){return e.fetchParams}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SIDEBAR_SET_SELECTED_NAV_ITEM:"SIDEBAR_SET_SELECTED_NAV_ITEM",SIDEBAR_NEW_OPTIONS:"SIDEBAR_NEW_OPTIONS",SIDEBAR_TOGGLE_CONTENT:"SIDEBAR_TOGGLE_CONTENT",SIDEBAR_FETCHING:"SIDEBAR_FETCHING",SIDEBAR_SHOW_DELETE_INDEX_MODAL:"SIDEBAR_SHOW_DELETE_INDEX_MODAL",SIDEBAR_HIDE_DELETE_INDEX_MODAL:"SIDEBAR_HIDE_DELETE_INDEX_MODAL",SIDEBAR_SHOW_CLONE_INDEX_MODAL:"SIDEBAR_SHOW_CLONE_INDEX_MODAL",SIDEBAR_HIDE_CLONE_INDEX_MODAL:"SIDEBAR_HIDE_CLONE_INDEX_MODAL",SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE:"SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE",SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED:"SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED",SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME:"SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME",SIDEBAR_UPDATED_DESIGN_DOCS:"SIDEBAR_UPDATED_DESIGN_DOCS"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PermanentNotification=t.NotificationCenterButton=t.NotificationController=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(480)),h=a(p),m=n(481),g=a(m),E=n(15),b=a(E),y=n(194),v=n(94),N=a(v),D=g.default.notificationStore,O=b.default.Copy,S=t.NotificationController=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{notificationCenterVisible:D.isNotificationCenterVisible(),notificationCenterFilter:D.getNotificationFilter(),notifications:D.getNotifications()}},a.onChange=function(){a.setState(a.getStoreState())},a.getStyles=function(){var e=a.state.notificationCenterVisible,t={key:"1",style:{x:320}};return e&&(t.style={x:(0,y.spring)(0)}),e||(t.style={x:(0,y.spring)(320)}),[t]},a.getNotificationCenterPanel=function(e){var t=e.map(function(e){var t=e.style;return d.default.createElement(I,{key:"1",style:t,visible:a.state.notificationCenterVisible,filter:a.state.notificationCenterFilter,notifications:a.state.notifications})});return d.default.createElement("span",null,t)},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){D.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){D.off("change",this.onChange)}},{key:"render",value:function(){return d.default.createElement("div",null,d.default.createElement(T,{notifications:this.state.notifications}),d.default.createElement(y.TransitionMotion,{styles:this.getStyles},this.getNotificationCenterPanel))}}]),t}(d.default.Component),T=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.onKeyDown=function(e){27===(e.keyCode||e.which)&&h.default.hideAllVisibleNotifications()},a.getNotifications=function(){return a.props.notifications.length?_.map(a.props.notifications,function(e,t){if(e.visible)return d.default.createElement(C,{notificationId:e.notificationId,isHiding:e.isHiding,key:t,msg:e.msg,type:e.type,escape:e.escape,onStartHide:h.default.startHidingNotification,onHideComplete:h.default.hideNotification})},a):null},a.getchildren=function(e){var t=e.map(function(e){var t=e.key,n=e.data,a=e.style,o=n;return d.default.createElement(C,{key:t,style:a,notificationId:o.notificationId,isHiding:o.isHiding,msg:o.msg,type:o.type,escape:o.escape,onStartHide:h.default.startHidingNotification,onHideComplete:h.default.hideNotification})});return d.default.createElement("div",null,t)},a.getStyles=function(e){return e||(e=[]),a.props.notifications.filter(function(e){return e.visible}).map(function(t){var n=e.find(function(e){return e.key===t.notificationId.toString()}),a=!n&&{opacity:.5,minHeight:50};return a||t.isHiding?!a&&t.isHiding&&(a={opacity:(0,y.spring)(0,y.presets.stiff),minHeight:(0,y.spring)(0,y.presets.stiff)}):a={opacity:(0,y.spring)(1,y.presets.stiff),minHeight:(0,y.spring)(64)},{key:t.notificationId.toString(),style:a,data:t}})},r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){$(document).on("keydown.notificationClose",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){$(document).off("keydown.notificationClose",this.onKeyDown)}},{key:"render",value:function(){return d.default.createElement("div",{id:"global-notifications"},d.default.createElement(y.TransitionMotion,{styles:this.getStyles},this.getchildren))}}]),t}(d.default.Component);T.propTypes={notifications:u.default.array.isRequired};var C=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.hide=function(e){e&&e.preventDefault(),a.props.onStartHide(a.props.notificationId)},a.getMsg=function(){return{__html:a.props.escape?_.escape(a.props.msg):a.props.msg}},a.onAnimationComplete=function(){a.props.isHiding&&window.setTimeout(function(){return a.props.onHideComplete(a.props.notificationId)})},r=n,i(a,r)}return r(t,e),l(t,[{key:"componentWillUnmount",value:function(){this.timeout&&window.clearTimeout(this.timeout)}},{key:"componentDidMount",value:function(){this.timeout=setTimeout(this.hide,this.props.visibleTime)}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.notificationId,a={error:"fonticon-attention-circled",info:"fonticon-info-circled",success:"fonticon-ok-circled"};return 0===t.opacity&&this.props.isHiding&&this.onAnimationComplete(),d.default.createElement("div",{key:n.toString(),className:"notification-wrapper",style:{opacity:t.opacity,minHeight:t.minHeight+"px"}},d.default.createElement("div",{style:{opacity:t.opacity,minHeight:t.minHeight+"px"},className:"global-notification alert alert-"+this.props.type,ref:"notification"},d.default.createElement("a",{"data-bypass":!0,href:"#",onClick:this.hide},d.default.createElement("i",{className:"pull-right fonticon-cancel"})),d.default.createElement("i",{className:"notification-icon "+a[this.props.type]}),d.default.createElement("span",{dangerouslySetInnerHTML:this.getMsg()})))}}]),t}(d.default.Component);C.propTypes={msg:u.default.string.isRequired,onStartHide:u.default.func.isRequired,onHideComplete:u.default.func.isRequired,type:u.default.oneOf(["error","info","success"]),escape:u.default.bool,isHiding:u.default.bool.isRequired,visibleTime:u.default.number},C.defaultProps={type:"info",visibleTime:8e3,escape:!0};var w=t.NotificationCenterButton=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={visible:!0},a.hide=function(){a.setState({visible:!1})},a.show=function(){a.setState({visible:!0})},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e="fonticon fonticon-bell"+(this.state.visible?"":" hide");return d.default.createElement("div",{className:e,onClick:h.default.showNotificationCenter})}}]),t}(d.default.Component),I=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getNotifications=function(e){var t=void 0;return t=e.length||a.props.notifications.length?e.map(function(e){var t=e.key,n=e.data,o=e.style;return d.default.createElement(A,{isVisible:a.props.visible,item:n,filter:a.props.filter,key:t,style:o})}):d.default.createElement("li",{className:"no-notifications"},"No notifications."),d.default.createElement("ul",{className:"notification-list"},t)},a.getStyles=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.props.notifications.map(function(t){var n=e.find(function(e){return e.key===t.notificationId.toString()}),o=!n&&{opacity:0,height:0};return o||t.type!==a.props.filter&&"all"!==a.props.filter?t.type!==a.props.filter&&(o={opacity:(0,y.spring)(0,y.presets.stiff),height:(0,y.spring)(0,y.presets.stiff)}):o={opacity:(0,y.spring)(1,y.presets.stiff),height:(0,y.spring)(61,y.presets.stiff)},{key:t.notificationId.toString(),style:o,data:t}})},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){if(!this.props.visible&&0===this.props.style.x)return null;var e={all:"flex-body",success:"flex-body",error:"flex-body",info:"flex-body"};e[this.props.filter]+=" selected";var t="notification-page-mask "+(this.props.visible?" visible":"");return d.default.createElement("div",{id:"notification-center"},d.default.createElement("div",{className:"notification-center-panel flex-layout flex-col visible",style:{transform:"translate("+this.props.style.x+"px)"}},d.default.createElement("header",{className:"flex-layout flex-row"},d.default.createElement("span",{className:"fonticon fonticon-bell"}),d.default.createElement("h1",{className:"flex-body"},"Notifications"),d.default.createElement("button",{type:"button",onClick:h.default.hideNotificationCenter},"Ã—")),d.default.createElement("ul",{className:"notification-filter flex-layout flex-row"},d.default.createElement("li",{className:e.all,title:"All notifications","data-filter":"all",onClick:h.default.selectNotificationFilter.bind(this,"all")},"All"),d.default.createElement("li",{className:e.success,title:"Success notifications","data-filter":"success",onClick:h.default.selectNotificationFilter.bind(this,"success")},d.default.createElement("span",{className:"fonticon fonticon-ok-circled"})),d.default.createElement("li",{className:e.error,title:"Error notifications","data-filter":"error",onClick:h.default.selectNotificationFilter.bind(this,"error")},d.default.createElement("span",{className:"fonticon fonticon-attention-circled"})),d.default.createElement("li",{className:e.info,title:"Info notifications","data-filter":"info",onClick:h.default.selectNotificationFilter.bind(this,"info")},d.default.createElement("span",{className:"fonticon fonticon-info-circled"}))),d.default.createElement("div",{className:"flex-body"},d.default.createElement(y.TransitionMotion,{styles:this.getStyles},this.getNotifications)),d.default.createElement("footer",null,d.default.createElement("input",{type:"button",value:"Clear All",className:"btn btn-small btn-secondary",onClick:h.default.clearAllNotifications}))),d.default.createElement("div",{className:t,onClick:h.default.hideNotificationCenter}))}}]),t}(d.default.Component);I.propTypes={visible:u.default.bool.isRequired,filter:u.default.string.isRequired,notifications:u.default.array.isRequired};var A=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.clearNotification=function(){var e=a.props.item.notificationId;h.default.clearSingleNotification(e)},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e={success:"fonticon-ok-circled",error:"fonticon-attention-circled",info:"fonticon-info-circled"},t=this.props.item.time.fromNow(),n="fonticon "+e[this.props.item.type],a="all"!==this.props.filter&&this.props.filter!==this.props.item.type,o=this.props.style,i=o.opacity,r=o.height;return 0===i&&0===r?null:d.default.createElement("li",{style:{opactiy:i,height:r+"px",borderBottomColor:"rgba(34, 34, 34, "+i+")"},"aria-hidden":a},d.default.createElement("div",{className:"flex-layout flex-row"},d.default.createElement("span",{className:n}),d.default.createElement("div",{className:"flex-body"},d.default.createElement("p",null,this.props.item.cleanMsg),d.default.createElement("div",{className:"notification-actions"},d.default.createElement("span",{className:"time-elapsed"},t),d.default.createElement("span",{className:"divider"},"|"),d.default.createElement(O,{uniqueKey:N.default.v4(),text:this.props.item.cleanMsg,displayType:"text"}))),d.default.createElement("button",{type:"button",onClick:this.clearNotification},"Ã—")))}}]),t}(d.default.Component);A.propTypes={item:u.default.object.isRequired},t.PermanentNotification=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStoreState(),n}return r(t,e),l(t,[{key:"getStoreState",value:function(){return{display:D.isPermanentNotificationVisible(),msg:D.getPermanentNotificationMessage()}}},{key:"onChange",value:function(){this.setState(this.getStoreState)}},{key:"componentDidMount",value:function(){D.on("change",this.onChange,this)}},{key:"getMsg",value:function(){return{__html:this.state.msg}}},{key:"getContent",value:function(){if(this.state.display&&this.state.msg)return d.default.createElement("p",{className:"perma-warning__content",dangerouslySetInnerHTML:this.getMsg()})}},{key:"render",value:function(){return d.default.createElement("div",{id:"perma-warning"},this.getContent())}}]),t}(d.default.Component),t.default={NotificationController:S,NotificationCenterButton:w,NotificationCenterPanel:I,NotificationPanelRow:A,Notification:C}},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TabElementWrapper=t.TabElement=void 0;var o=n(1),i=a(o),r=n(0),l=a(r);a(n(10)),(t.TabElement=function(e){var t=e.selected,n=e.text,a=e.onChange,o=e.iconClass,i=t?"tab-element-checked":"";return l.default.createElement("li",{className:"component-tab-element "+i},l.default.createElement("label",null,l.default.createElement("div",{className:"tab-element-indicator-wrapper"},l.default.createElement("div",{className:"tab-element-indicator"})),l.default.createElement("div",{className:"tab-element-content"},l.default.createElement("i",{className:o}),l.default.createElement("input",{type:"radio",value:n,checked:t,onChange:a}),n)))}).propTypes={selected:i.default.bool.isRequired,text:i.default.string.isRequired,onChange:i.default.func.isRequired,iconClass:i.default.string},t.TabElementWrapper=function(e){var t=e.children;return l.default.createElement("ul",{className:"component-tab-element-wrapper"},t)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.length-1;return e.map(function(e,n){var a=[s.default.createElement(u,{key:n},e.name)];return e.link&&(a=[s.default.createElement(u,{key:n},s.default.createElement("a",{className:"faux-header__breadcrumbs-link",href:"#/"+e.link},e.name))]),e.name?(n<t&&a.push(s.default.createElement(c,null)),a):a})}Object.defineProperty(t,"__esModule",{value:!0}),t.Breadcrumbs=void 0;var i=n(1),r=a(i),l=n(0),s=a(l);a(n(10)),(t.Breadcrumbs=function(e){var t=e.crumbs;return s.default.createElement("div",{className:"faux-header__breadcrumbs"},o(t))}).propTypes={crumbs:r.default.array.isRequired};var u=function(e){var t=e.children;return s.default.createElement("div",{className:"faux-header__breadcrumbs-element"},t)},c=function(){return s.default.createElement("div",{className:"fonticon-right-open faux-header__breadcrumbs-divider"})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){T.default.dispatch({type:A.default.SELECT_REDUCE_CHANGE,reduceSelectedOption:e})}function i(e){T.default.dispatch({type:A.default.VIEW_NAME_CHANGE,name:e})}function r(e){T.default.dispatch({type:A.default.EDIT_INDEX,options:e})}function l(){T.default.dispatch({type:A.default.CLEAR_INDEX})}function s(e){var t=this;e.designDocs.fetch({reset:!0}).then(function(){t.editIndex(e)},function(t){var n="Error";t.responseJSON&&"not_found"===t.responseJSON.error&&(n="The "+e.designDocs.database.safeID()+" database does not exist",T.default.navigate("/",{trigger:!0})),T.default.addNotification({msg:n,type:"error",clear:!0})})}function u(e){return!e.newView&&e.originalDesignDocName===e.designDocId&&e.originalViewName!==e.viewName}function c(e){var t=e.designDoc;t.setDdocView(e.viewName,e.map,e.reduce),T.default.addNotification({msg:"Saving View...",type:"info",clear:!0}),u(e)&&t.removeDdocView(e.originalViewName),t.save().then(function(){T.default.addNotification({msg:"View Saved.",type:"success",clear:!0}),e.newView||e.originalDesignDocName===e.designDocId||y(v(e.designDocs,e.originalDesignDocName),e.designDocs,"views",e.originalViewName,{onSuccess:function(){P.default.updateDesignDocs(e.designDocs)}}),"new-doc"===e.designDocId&&d(t),T.default.dispatch({type:A.default.VIEW_SAVED});var n=T.default.urls("view","showView",e.database.safeID(),t.safeID(),O.default.utils.safeURLName(e.viewName));T.default.navigate(n,{trigger:!0})},function(e){T.default.addNotification({msg:"Save failed. "+(e.responseJSON?"Reason: "+e.responseJSON.reason:""),type:"error",clear:!0})})}function d(e){T.default.dispatch({type:A.default.VIEW_ADD_DESIGN_DOC,designDoc:e.toJSON()})}function f(e){function t(){if(e.isOnIndex){var t=T.default.urls("allDocs","app",e.database.safeID(),"?limit="+T.default.constants.DATABASES.DOCUMENT_LIMIT);T.default.navigate(t)}P.default.updateDesignDocs(e.designDocs),T.default.addNotification({msg:"The <code>"+_.escape(e.indexName)+"</code> view has been deleted.",type:"info",escape:!1,clear:!0}),T.default.dispatch({type:k.default.SIDEBAR_HIDE_DELETE_INDEX_MODAL})}return y(e.designDoc,e.designDocs,"views",e.indexName,{onSuccess:t})}function p(e){var t=N(e.designDocs,e.targetDesignDocName,e.newDesignDocName,e.database),n=t.get("views");if(n&&_.has(n,e.newIndexName))return void T.default.addNotification({msg:"That index name is already used in this design doc. Please enter a new name.",type:"error",clear:!0});n||(n={});var a=v(e.designDocs,"_design/"+e.sourceDesignDocName),o=a.toJSON();n[e.newIndexName]=o.views[e.sourceIndexName],t.set({views:n}),t.save().then(function(){e.onComplete(),T.default.addNotification({msg:"The index has been cloned.",type:"success",clear:!0}),P.default.updateDesignDocs(e.designDocs)},function(t){e.onComplete();var n=JSON.parse(t.responseText).reason;T.default.addNotification({msg:"Clone failed: "+n,type:"error",clear:!0})})}function h(e,t,n){T.default.navigate("#"+T.default.urls("view","edit",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n)))}function m(e){T.default.dispatch({type:A.default.VIEW_UPDATE_MAP_CODE,code:e})}function g(e){T.default.dispatch({type:A.default.VIEW_UPDATE_REDUCE_CODE,code:e})}function E(e){T.default.dispatch({type:A.default.DESIGN_DOC_CHANGE,options:{value:e}})}function b(e){T.default.dispatch({type:A.default.DESIGN_DOC_NEW_NAME_UPDATED,options:{value:e}})}function y(e,t,n,a,o){var i=_.extend({onSuccess:function(){},onError:function(e){var t=JSON.parse(e.responseText).reason;T.default.addNotification({msg:"Delete failed: "+t,type:"error",clear:!0})}},o),r=e.get(n)||{};delete r[a];var l={};l[n]=r,e.set(l);var s,u=T.default.getIndexTypePropNames(),c=_.some(u,function(t){return e.get(t)&&_.keys(e.get(t)).length>0}),d=!1;return c?s=e.save():(s=e.destroy(),d=!0),s.then(function(){d&&t.remove(e.id),i.onSuccess()},i.onError)}function v(e,t){return e.find(function(e){return e.id===t}).dDocModel()}function N(e,t,n,a){if("new-doc"===t){var o={_id:"_design/"+n,views:{},language:"javascript"};return new w.default.Doc(o,{database:a})}var i=e.find(function(e){return e.id===t});return i?i.dDocModel():null}Object.defineProperty(t,"__esModule",{value:!0});var D=n(11),O=a(D),S=n(2),T=a(S),C=n(45),w=a(C),I=n(237),A=a(I),R=n(46),P=a(R),L=n(76),k=a(L);t.default={helpers:{findDesignDoc:v,getDesignDoc:N},safeDeleteIndex:y,selectReduceChanged:o,changeViewName:i,editIndex:r,clearIndex:l,fetchDesignDocsBeforeEdit:s,shouldRemoveDdocView:u,saveView:c,addDesignDoc:d,deleteView:f,cloneView:p,gotoEditViewPage:h,updateMapCode:m,updateReduceCode:g,selectDesignDoc:E,updateNewDesignDocName:b}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={INDEX_RESULTS_NEW_RESULTS:"INDEX_RESULTS_NEW_RESULTS",INDEX_RESULTS_RESET:"INDEX_RESULTS_RESET",INDEX_RESULTS_SELECT_DOC:"INDEX_RESULTS_SELECT_DOC",INDEX_RESULTS_CLEAR_RESULTS:"INDEX_RESULTS_CLEAR_RESULTS",INDEX_RESULTS_TOOGLE_SELECT_ALL_DOCUMENTS:"INDEX_RESULTS_TOOGLE_SELECT_ALL_DOCUMENTS",INDEX_RESULTS_SELECT_NEW_FIELD_IN_TABLE:"INDEX_RESULTS_SELECT_NEW_FIELD_IN_TABLE",INDEX_RESULTS_CLEAR_SELECTED_ITEMS:"INDEX_RESULTS_CLEAR_SELECTED_ITEMS",INDEX_RESULTS_TOGGLE_PRIORITIZED_TABLE_VIEW:"INDEX_RESULTS_TOGGLE_PRIORITIZED_TABLE_VIEW",INDEX_RESULTS_REDUX_NEW_RESULTS:"INDEX_RESULTS_REDUX_NEW_RESULTS",INDEX_RESULTS_REDUX_IS_LOADING:"INDEX_RESULTS_REDUX_IS_LOADING",INDEX_RESULTS_REDUX_CHANGE_LAYOUT:"INDEX_RESULTS_REDUX_CHANGE_LAYOUT",INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS:"INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS",INDEX_RESULTS_REDUX_SET_PER_PAGE:"INDEX_RESULTS_REDUX_SET_PER_PAGE",INDEX_RESULTS_REDUX_PAGINATE_NEXT:"INDEX_RESULTS_REDUX_PAGINATE_NEXT",INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS:"INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS",INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS:"INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS",INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE:"INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE",INDEX_RESULTS_REDUX_RESET_STATE:"INDEX_RESULTS_REDUX_RESET_STATE",INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS:"INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.mangoQueryDocs=t.mangoQuery=t.mergeFetchParams=t.fetchIndexes=t.createIndex=t.fetchQueryExplain=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(68);var i=n(169),r=a(i),l=n(11),s=a(l),u=n(2),c=a(u),d=n(30),f=a(d),p=(t.fetchQueryExplain=function(e,t){var n=c.default.urls("mango","explain-server",encodeURIComponent(e));return fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},credentials:"include",method:"POST",body:t}).then(function(e){return e.json()}).then(function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e})},t.createIndex=function(e,t){var n=c.default.urls("mango","index-server",s.default.utils.safeURLName(e));return fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},credentials:"include",method:"POST",body:t}).then(function(e){return e.json()}).then(function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e})},t.fetchIndexes=function(e,t){var n=r.default.stringify(t),a=c.default.urls("mango","index-server",s.default.utils.safeURLName(e));return a=a+(a.includes("?")?"&":"?")+n,fetch(a,{headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},credentials:"include",method:"GET"}).then(function(e){return e.json()}).then(function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.indexes,docType:f.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX}})},null),h=function(e){return null===p?new c.default.Promise(function(t){_(e,{selector:{_id:{$gt:"a"}},execution_stats:!0},{limit:1}).then(function(e){p=200==e.status,t(p)})}):Promise.resolve(p)},m=t.mergeFetchParams=function(e,t){var n=t.limit,a=t.limit-1,i=Math.floor(t.skip/a)+1,r=i*a-e.limit;return r>=0&&(n=a-r),o({},e,{limit:n,skip:e.skip?t.skip+e.skip:t.skip})},_=t.mangoQuery=function(e,t,n){var a=c.default.urls("mango","query-server",encodeURIComponent(e)),o=m(t,n);return fetch(a,{headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},credentials:"include",method:"POST",body:JSON.stringify(o)})};t.mangoQueryDocs=function(e,t,n){return h(e).then(function(a){return a&&(t.execution_stats=!0),_(e,t,n).then(function(e){return e.json()}).then(function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.docs,docType:f.default.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY,executionStats:e.execution_stats,warning:e.warning}})})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(2),r=a(i),l=function(e){var t=e.def,n=e.type,a=[],o=void 0;return a=t.fields.reduce(function(e,t,a){return 0===a?e.push(n+": "+Object.keys(t)[0]):e.push(Object.keys(t)[0]),e},[]),a.length||(o=r.default.getExtensions("mango:additionalIndexes")[0],a=o?o.createHeader({def:t,type:n}):[n+": "+(t.selector?JSON.stringify(t.selector):"{}")]),a.join(", ")},s=function(e){return JSON.stringify(e,null,3)},u=function(e){var t=o({},e);return delete t.ddoc,delete t.name,JSON.stringify(t,null," ")};t.default={getIndexName:l,formatCode:s,getIndexContent:u}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=a(o),r=n(2),l=a(r),s=n(516),u=a(s),c=l.default.addon();c.Doc=l.default.Model.extend({idAttribute:"_id",documentation:function(){return l.default.constants.DOC_URLS.GENERAL},url:function(e){void 0===e&&(e="server");var t=this.safeID();t||(t="");var n=this.fetchConflicts?"?conflicts=true":"";return l.default.urls("document",e,this.getDatabase().safeID(),t,n)},initialize:function(e,t){this.collection&&this.collection.database?this.database=this.collection.database:t.database&&(this.database=t.database),t.fetchConflicts&&(this.fetchConflicts=!0)},getDatabase:function(){return this.database?this.database:this.collection.database},validate:function(e){if(this.id&&this.id!==e._id&&this.get("_rev"))return"Cannot change a documents id."},docType:function(){return i.default.utils.getDocTypeFromId(this.id)},isBulkDeletable:function(){return!!this.id&&!!this.get("_rev")},isDeletable:function(){return!!this.id},isFromView:function(){return!this.id},isMangoDoc:function(){return!(!this.isDdoc()||"query"!==this.get("language")&&(!this.get("doc")||"query"!==this.get("doc").language))},isDdoc:function(){return"design doc"===this.docType()},setDdocView:function(e,t,n){if(!this.isDdoc())return!1;var a=this.get("views");a||(a={},this.set({language:"javascript"}));var o=a[e]||{};return n?o.reduce=n:delete o.reduce,o.map=t,a[e]=o,this.set({views:a}),!0},removeDdocView:function(e){if(!this.isDdoc())return!1;var t=this.get("views");delete t[e],this.set({views:t})},dDocModel:function(){if(!this.isDdoc())return!1;var e=this.get("doc");return e?(e._rev=this.get("_rev"),new c.Doc(e,{database:this.database})):this},safeID:function(){return i.default.utils.getSafeIdForDoc(this.id)},destroy:function(){var e=this.url()+"?rev="+this.get("_rev");return $.ajax({url:e,dataType:"json",type:"DELETE"})},parse:function(e){return e.rev&&(e._rev=e.rev,delete e.rev),e.id&&_.isUndefined(this.id)&&(e._id=e.id),e.ok&&(delete e.id,delete e.ok),e},prettyJSON:function(){var e=this.get("doc")?this.get("doc"):this.attributes;return JSON.stringify(e,null,"  ")},copy:function(e){return $.ajax({type:"COPY",url:"/"+this.database.safeID()+"/"+this.safeID(),headers:{Destination:e}})},isNewDoc:function(){return!this.get("_rev")}}),c.AllDocs=u.default.extend({model:c.Doc,documentation:function(){return l.default.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.viewMeta=t.viewMeta,this.database=t.database,this.params=_.clone(t.params),this.on("remove",this.decrementTotalRows,this),this.perPageLimit=t.perPageLimit||20,this.params.limit||(this.params.limit=this.perPageLimit)},isEditable:function(){return!0},urlRef:function(e,t){var n="";return t?n=_.isEmpty(t)?"":"?"+$.param(t):this.params&&(n="?"+$.param(this.params)),_.isUndefined(e)&&(e="server"),l.default.urls("allDocs",e,this.database.safeID(),n)},url:function(){return this.urlRef.apply(this,arguments)},simple:function(){var e=this.map(function(e){return{_id:e.id,_rev:e.get("_rev")}});return new c.AllDocs(e,{database:this.database,params:this.params})},totalRows:function(){return this.viewMeta.total_rows||"unknown"},decrementTotalRows:function(){this.viewMeta.total_rows&&(this.viewMeta.total_rows=this.viewMeta.total_rows-1,this.trigger("totalRows:decrement"))},updateSeq:function(){return!!this.viewMeta&&(this.viewMeta.update_seq||!1)},parse:function(e){var t=e.rows,n=_.filter(t,function(e){return e.value});return e.rows=_.map(n,function(e){var t={_id:e.id,_rev:e.value.rev,value:e.value,key:e.key};return e.doc&&(t.doc=e.doc),t}),u.default.prototype.parse.call(this,e)},clone:function(){return new this.constructor(this.models,{database:this.database,params:this.params,paging:this.paging})}}),t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConflictModal=t.ErrorModal=t.DeleteModal=void 0;var o=n(1),i=a(o),r=n(0),l=a(r),s=n(19),u=n(15),c=a(u),d=c.default.ConfirmButton,f=t.DeleteModal=function(e){var t=e.visible,n=e.onClose,a=e.onClick,o=e.multipleDocs,i=e.isReplicationDB;if(!t)return null;var r="",u="Delete "+(i?"Document":"Replication Job"),c="Deleting a replication "+(i?"document":"job")+" stops continuous replication\n          and incomplete one-time replication, but does not affect replicated documents.";return o>1&&(r="You are deleting <strong>"+o+"</strong> replication "+(i?"documents":"jobs")+".",u="Delete "+(i?"Documents":"Replication Jobs")),l.default.createElement(s.Modal,{dialogClassName:"replication_delete-doc-modal",show:t,onHide:function(){return n()}},l.default.createElement(s.Modal.Header,{closeButton:!0},l.default.createElement(s.Modal.Title,null,"Verify Deletion")),l.default.createElement(s.Modal.Body,null,l.default.createElement("p",{dangerouslySetInnerHTML:{__html:r}}),l.default.createElement("p",null,c)),l.default.createElement(s.Modal.Footer,null,l.default.createElement("a",{className:"cancel-link",onClick:n},"Cancel"),l.default.createElement(d,{customIcon:"icon-trash",text:u,onClick:a})))};f.propTypes={visible:i.default.bool.isRequired,isReplicationDB:i.default.bool.isRequired,onClick:i.default.func.isRequired,onClose:i.default.func.isRequired,multipleDocs:i.default.number.isRequired},f.defaultProps={isReplicationDB:!0},(t.ErrorModal=function(e){var t=e.visible,n=e.onClose,a=e.errorMsg,o=e.status;if(!t)return null;var i="Replication Error",r=l.default.createElement("p",null,"The replication job will be tried at increasing intervals");return"failed"===o.toLowerCase()&&(i="Replication Error - Failed",r=null),l.default.createElement(s.Modal,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return n()}},l.default.createElement(s.Modal.Header,{closeButton:!0},l.default.createElement(s.Modal.Title,null,i)),l.default.createElement(s.Modal.Body,null,l.default.createElement("p",null,a),r),l.default.createElement(s.Modal.Footer,null))}).propTypes={visible:i.default.bool.isRequired,onClick:i.default.func.isRequired,onClose:i.default.func.isRequired,errorMsg:i.default.string.isRequired},(t.ConflictModal=function(e){var t=e.visible,n=e.docId,a=e.onClose,o=e.onClick;return t?l.default.createElement(s.Modal,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return a()}},l.default.createElement(s.Modal.Header,{closeButton:!0},l.default.createElement(s.Modal.Title,null,"Custom ID Conflict")),l.default.createElement(s.Modal.Body,null,l.default.createElement("p",null,"A replication document with ID ",l.default.createElement("code",null,n)," already exists."),l.default.createElement("p",null,"You can overwrite the existing document, or change the new replication jobâ€™s document ID."),l.default.createElement("p",null,"If you overwrite the existing document, any replication job currently using the replication document will stop, and that job will not appear in Replicator DB Activity. Replicated documents will not be affected.")),l.default.createElement(s.Modal.Footer,null,l.default.createElement("button",{onClick:a,className:"btn replication__error-cancel"},"Change Document ID"),l.default.createElement("button",{onClick:o,className:"btn replication__error-continue"},l.default.createElement("i",{className:"icon icon-eraser"})," Overwrite Existing Document"))):null}).propTypes={visible:i.default.bool.isRequired,onClick:i.default.func.isRequired,onClose:i.default.func.isRequired,docId:i.default.string.isRequired}},function(e,t,n){"use strict";var a=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function e(e){function t(e){var t=e.charCodeAt(0);if(92!==t)return t;var n=e.charAt(1);return(t=d[n])?t:"0"<=n&&n<="7"?parseInt(e.substring(1),8):"u"===n||"x"===n?parseInt(e.substring(2),16):e.charCodeAt(1)}function n(e){return e<32?(e<16?"\\x0":"\\x")+e.toString(16):(e=String.fromCharCode(e),"\\"!==e&&"-"!==e&&"["!==e&&"]"!==e||(e="\\"+e),e)}function a(e){for(var a=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),e=[],o=[],i="^"===a[0],r=i?1:0,l=a.length;r<l;++r){var s=a[r];if(/\\[bdsw]/i.test(s))e.push(s);else{var u,s=t(s);r+2<l&&"-"===a[r+1]?(u=t(a[r+2]),r+=2):u=s,o.push([s,u]),u<65||s>122||(u<65||s>90||o.push([32|Math.max(65,s),32|Math.min(u,90)]),u<97||s>122||o.push([-33&Math.max(97,s),-33&Math.min(u,122)]))}}for(o.sort(function(e,t){return e[0]-t[0]||t[1]-e[1]}),a=[],s=[NaN,NaN],r=0;r<o.length;++r)l=o[r],l[0]<=s[1]+1?s[1]=Math.max(s[1],l[1]):a.push(s=l);for(o=["["],i&&o.push("^"),o.push.apply(o,e),r=0;r<a.length;++r)l=a[r],o.push(n(l[0])),l[1]>l[0]&&(l[1]+1>l[0]&&o.push("-"),o.push(n(l[1])));return o.push("]"),o.join("")}function o(e){for(var t=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),n=t.length,o=[],l=0,s=0;l<n;++l){var u=t[l];"("===u?++s:"\\"===u.charAt(0)&&(u=+u.substring(1))&&u<=s&&(o[u]=-1)}for(l=1;l<o.length;++l)-1===o[l]&&(o[l]=++i);for(s=l=0;l<n;++l)u=t[l],"("===u?(++s,void 0===o[s]&&(t[l]="(?:")):"\\"===u.charAt(0)&&(u=+u.substring(1))&&u<=s&&(t[l]="\\"+o[s]);for(s=l=0;l<n;++l)"^"===t[l]&&"^"!==t[l+1]&&(t[l]="");if(e.ignoreCase&&r)for(l=0;l<n;++l)u=t[l],e=u.charAt(0),u.length>=2&&"["===e?t[l]=a(u):"\\"!==e&&(t[l]=u.replace(/[A-Za-z]/g,function(e){return e=e.charCodeAt(0),"["+String.fromCharCode(-33&e,32|e)+"]"}));return t.join("")}for(var i=0,r=!1,l=!1,s=0,u=e.length;s<u;++s){var c=e[s];if(c.ignoreCase)l=!0;else if(/[a-z]/i.test(c.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){r=!0,l=!1;break}}for(var d={b:8,t:9,n:10,v:11,f:12,r:13},f=[],s=0,u=e.length;s<u;++s){if(c=e[s],c.global||c.multiline)throw Error(""+c);f.push("(?:"+o(c)+")")}return RegExp(f.join("|"),l?"gi":"g")}function t(e){function t(e){switch(e.nodeType){case 1:if(o.test(e.className))break;for(var n=e.firstChild;n;n=n.nextSibling)t(n);"BR"!==(n=e.nodeName)&&"LI"!==n||(i[s]="\n",l[s<<1]=r++,l[s++<<1|1]=e);break;case 3:case 4:n=e.nodeValue,n.length&&(n=u?n.replace(/\r\n?/g,"\n"):n.replace(/[\t\n\r ]+/g," "),i[s]=n,l[s<<1]=r,r+=n.length,l[s++<<1|1]=e)}}var n,o=/(?:^|\s)nocode(?:\s|$)/,i=[],r=0,l=[],s=0;e.currentStyle?n=e.currentStyle.whiteSpace:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,a).getPropertyValue("white-space"));var u=n&&"pre"===n.substring(0,3);return t(e),{a:i.join("").replace(/\n$/,""),c:l}}function n(e,t,n,a){t&&(e={a:t,d:e},n(e),a.push.apply(a,e.e))}function o(t,o){function i(e){for(var t=e.d,a=[t,"pln"],c=0,d=e.a.match(r)||[],f={},p=0,h=d.length;p<h;++p){var m,_=d[p],g=f[_],E=void 0;if("string"==typeof g)m=!1;else{var b=l[_.charAt(0)];if(b)E=_.match(b[1]),g=b[0];else{for(m=0;m<u;++m)if(b=o[m],E=_.match(b[1])){g=b[0];break}E||(g="pln")}!(m=g.length>=5&&"lang-"===g.substring(0,5))||E&&"string"==typeof E[1]||(m=!1,g="src"),m||(f[_]=g)}if(b=c,c+=_.length,m){m=E[1];var y=_.indexOf(m),v=y+m.length;E[2]&&(v=_.length-E[2].length,y=v-m.length),g=g.substring(5),n(t+b,_.substring(0,y),i,a),n(t+b+y,m,s(g,m),a),n(t+b+v,_.substring(v),i,a)}else a.push(t+b,g)}e.e=a}var r,l={};!function(){for(var n=t.concat(o),i=[],s={},u=0,c=n.length;u<c;++u){var d=n[u],f=d[3];if(f)for(var p=f.length;--p>=0;)l[f.charAt(p)]=d;d=d[1],f=""+d,s.hasOwnProperty(f)||(i.push(d),s[f]=a)}i.push(/[\S\s]/),r=e(i)}();var u=o.length;return i}function i(e){var t=[],n=[];e.tripleQuotedStrings?t.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,a,"'\""]):e.multiLineStrings?t.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,a,"'\"`"]):t.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,a,"\"'"]),e.verbatimStrings&&n.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,a]);var i=e.hashComments;return i&&(e.cStyleComments?(i>1?t.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,a,"#"]):t.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,a,"#"]),n.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,a])):t.push(["com",/^#[^\n\r]*/,a,"#"])),e.cStyleComments&&(n.push(["com",/^\/\/[^\n\r]*/,a]),n.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,a])),e.regexLiterals&&n.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*\/])(?:[^\/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]),(i=e.types)&&n.push(["typ",i]),e=(""+e.keywords).replace(/^ | $/g,""),e.length&&n.push(["kwd",RegExp("^(?:"+e.replace(/[\s,]+/g,"|")+")\\b"),a]),t.push(["pln",/^\s+/,a," \r\n\tÂ "]),n.push(["lit",/^@[$_a-z][\w$@]*/i,a],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,a],["pln",/^[$_a-z][\w$@]*/i,a],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,a,"0123456789"],["pln",/^\\[\S\s]?/,a],["pun",/^.[^\s\w"-$'.\/@\\`]*/,a]),o(t,n)}function r(e,t){function n(e){switch(e.nodeType){case 1:if(r.test(e.className))break;if("BR"===e.nodeName)o(e),e.parentNode&&e.parentNode.removeChild(e);else for(e=e.firstChild;e;e=e.nextSibling)n(e);break;case 3:case 4:if(u){var t=e.nodeValue,a=t.match(l);if(a){var i=t.substring(0,a.index);e.nodeValue=i,(t=t.substring(a.index+a[0].length))&&e.parentNode.insertBefore(s.createTextNode(t),e.nextSibling),o(e),i||e.parentNode.removeChild(e)}}}}function o(e){function t(e,n){var a=n?e.cloneNode(!1):e,o=e.parentNode;if(o){var o=t(o,1),i=e.nextSibling;o.appendChild(a);for(var r=i;r;r=i)i=r.nextSibling,o.appendChild(r)}return a}for(;!e.nextSibling;)if(!(e=e.parentNode))return;for(var n,e=t(e.nextSibling,0);(n=e.parentNode)&&1===n.nodeType;)e=n;c.push(e)}var i,r=/(?:^|\s)nocode(?:\s|$)/,l=/\r\n?|\n/,s=e.ownerDocument;e.currentStyle?i=e.currentStyle.whiteSpace:window.getComputedStyle&&(i=s.defaultView.getComputedStyle(e,a).getPropertyValue("white-space"));var u=i&&"pre"===i.substring(0,3);for(i=s.createElement("LI");e.firstChild;)i.appendChild(e.firstChild);for(var c=[i],d=0;d<c.length;++d)n(c[d]);t===(0|t)&&c[0].setAttribute("value",t);var f=s.createElement("OL");f.className="linenums";for(var p=Math.max(0,t-1|0)||0,d=0,h=c.length;d<h;++d)i=c[d],i.className="L"+(d+p)%10,i.firstChild||i.appendChild(s.createTextNode("Â ")),f.appendChild(i);e.appendChild(f)}function l(e,t){for(var n=t.length;--n>=0;){var a=t[n];y.hasOwnProperty(a)?window.console&&console.warn("cannot override language handler %s",a):y[a]=e}}function s(e,t){return e&&y.hasOwnProperty(e)||(e=/^\s*</.test(t)?"default-markup":"default-code"),y[e]}function u(e){var n=e.g;try{var a=t(e.h),o=a.a;e.a=o,e.c=a.c,e.d=0,s(n,o)(e);var i=/\bMSIE\b/.test(navigator.userAgent),n=/\n/g,r=e.a,l=r.length,a=0,u=e.c,c=u.length,o=0,d=e.e,f=d.length,e=0;d[f]=l;var p,h;for(h=p=0;h<f;)d[h]!==d[h+2]?(d[p++]=d[h++],d[p++]=d[h++]):h+=2;for(f=p,h=p=0;h<f;){for(var m=d[h],_=d[h+1],g=h+2;g+2<=f&&d[g+1]===_;)g+=2;d[p++]=m,d[p++]=_,h=g}for(d.length=p;o<c;){var E,b=u[o+2]||l,y=d[e+2]||l,g=Math.min(b,y),v=u[o+1];if(1!==v.nodeType&&(E=r.substring(a,g))){i&&(E=E.replace(n,"\r")),v.nodeValue=E;var N=v.ownerDocument,D=N.createElement("SPAN");D.className=d[e+1];var O=v.parentNode;O.replaceChild(D,v),D.appendChild(v),a<b&&(u[o+1]=v=N.createTextNode(r.substring(g,b)),O.insertBefore(v,D.nextSibling))}a=g,a>=b&&(o+=2),a>=y&&(e+=2)}}catch(e){"console"in window&&console.log(e&&e.stack?e.stack:e)}}var c=["break,continue,do,else,for,if,return,while"],d=[[c,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],f=[d,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],p=[d,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],h=[p,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],d=[d,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],m=[c,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],_=[c,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],c=[c,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],g=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,E=/\S/,b=i({keywords:[f,h,d,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+m,_,c],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),y={};l(b,["default-code"]),l(o([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),l(o([["pln",/^\s+/,a," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,a,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'\/>]|\/(?=\s)))/],["pun",/^[\/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),l(o([],[["atv",/^[\S\s]+/]]),["uq.val"]),l(i({keywords:f,hashComments:!0,cStyleComments:!0,types:g}),["c","cc","cpp","cxx","cyc","m"]),l(i({keywords:"null,true,false"}),["json"]),l(i({keywords:h,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:g}),["cs"]),l(i({keywords:p,cStyleComments:!0}),["java"]),l(i({keywords:c,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]),l(i({keywords:m,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]),l(i({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]),l(i({keywords:_,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]),l(i({keywords:d,cStyleComments:!0,regexLiterals:!0}),["js"]),l(i({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),l(o([],[["str",/^[\S\s]+/]]),["regex"]),window.prettyPrintOne=function(e,t,n){var a=document.createElement("PRE");return a.innerHTML=e,n&&r(a,n),u({g:t,i:n,h:a}),a.innerHTML},window.prettyPrint=function(e){function t(){for(var n=window.PR_SHOULD_USE_CONTINUATION?c.now()+250:1/0;f<o.length&&c.now()<n;f++){var a=o[f],i=a.className;if(i.indexOf("prettyprint")>=0){var l,s,i=i.match(p);if(s=!i){s=a;for(var h=void 0,m=s.firstChild;m;m=m.nextSibling)var _=m.nodeType,h=1===_?h?s:m:3===_&&E.test(m.nodeValue)?s:h;s=(l=h===s?void 0:h)&&"CODE"===l.tagName}for(s&&(i=l.className.match(p)),i&&(i=i[1]),s=!1,h=a.parentNode;h;h=h.parentNode)if(("pre"===h.tagName||"code"===h.tagName||"xmp"===h.tagName)&&h.className&&h.className.indexOf("prettyprint")>=0){s=!0;break}s||((s=!!(s=a.className.match(/\blinenums\b(?::(\d+))?/))&&(!s[1]||!s[1].length||+s[1]))&&r(a,s),d={g:i,h:a,i:s},u(d))}}f<o.length?setTimeout(t,250):e&&e()}for(var n=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],o=[],i=0;i<n.length;++i)for(var l=0,s=n[i].length;l<s;++l)o.push(n[i][l]);var n=a,c=Date;c.now||(c={now:function(){return+new Date}});var d,f=0,p=/\blang(?:uage)?-([\w.]+)(?!\S)/;t()},window.PR={createSimpleLexer:o,registerLangHandler:l,sourceDecorator:i,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}}()},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.name,n=e.password,a=e.node;return d(u.default.host+"/_node/"+a+"/_config/admins/"+t,{method:"PUT",body:JSON.stringify(n)})}function i(){if(p)return p;var e=d(u.default.host+"/_session").then(function(t){return t.userCtx.name&&(p=e),t.userCtx});return e}function r(e){return f(u.default.host+"/_session",{method:"POST",body:$.param(e)})}function l(){return p=null,f(u.default.host+"/_session",{method:"DELETE",body:$.param({username:"_",password:"_"})})}Object.defineProperty(t,"__esModule",{value:!0}),t.formEncoded=t.json=void 0,t.createAdmin=o,t.getSession=i,t.login=r,t.logout=l;var s=n(11),u=a(s),c=n(18),d=t.json=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,(0,c.defaultsDeep)({credentials:"include",headers:{accept:"application/json","Content-Type":"application/json"}},t)).then(function(e){return e.json()})},f=t.formEncoded=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,(0,c.defaultsDeep)({credentials:"include",headers:{accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}},t)).then(function(e){return e.json()})},p=void 0;t.default={createAdmin:o,login:r,logout:l,getSession:i}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(381),i=a(o),r=n(382),l=a(r),s=n(380),u=a(s),c=n(379),d=a(c);t.default={LoginForm:i.default,PasswordModal:l.default,CreateAdminForm:u.default,ChangePasswordForm:d.default}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CodeEditor=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=a(c),f=n(2),p=a(f),h=n(141),m=a(h),g=n(213);n(275),n(142),n(143),(t.CodeEditor=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={originalCode:a.props.defaultCode,stringEditModalVisible:!1,stringEditIconVisible:!1,stringEditIconStyle:{},stringEditModalValue:""},a.hasChanged=function(){return!_.isEqual(a.state.originalCode,a.getValue())},a.clearChanges=function(){a.setState({originalCode:a.getValue()})},a.setupAce=function(e,t){a.editor=m.default.edit(d.default.findDOMNode(a.refs.ace)),a.editor.$blockScrolling=1/0,t&&a.setValue(e.defaultCode),a.editor.setShowPrintMargin(e.showPrintMargin),a.editor.autoScrollEditorIntoView=e.autoScrollEditorIntoView,a.editor.setOption("highlightActiveLine",a.props.highlightActiveLine),a.props.setHeightToLineCount&&a.setHeightToLineCount(),a.props.ignorableErrors&&a.removeIgnorableAnnotations(),a.addCommands(),a.editor.getSession().setMode("ace/mode/"+e.mode),a.editor.setTheme("ace/theme/"+e.theme),a.editor.setFontSize(e.fontSize),a.editor.getSession().setTabSize(2),a.editor.getSession().setUseSoftTabs(!0),a.props.autoFocus&&a.editor.focus()},a.addCommands=function(){_.each(a.props.editorCommands,function(e){this.editor.commands.addCommand(e)},a)},a.setupEvents=function(){a.editor.on("blur",_.bind(a.onBlur,a)),a.editor.on("change",_.bind(a.onContentChange,a)),a.props.stringEditModalEnabled&&(a.editor.on("changeSelection",_.bind(a.showHideEditStringGutterIcon,a)),a.editor.getSession().on("changeBackMarker",_.bind(a.showHideEditStringGutterIcon,a)),a.editor.getSession().on("changeScrollTop",_.bind(a.updateEditStringGutterIconPosition,a))),a.props.notifyUnsavedChanges&&($(window).on("beforeunload.editor_"+a.props.id,_.bind(a.quitWarningMsg)),p.default.beforeUnload("editor_"+a.props.id,_.bind(a.quitWarningMsg,a)))},a.onBlur=function(){a.props.blur(a.getValue())},a.onContentChange=function(){a.props.setHeightToLineCount&&a.setHeightToLineCount(),a.props.change(a.getValue())},a.quitWarningMsg=function(){if(a.hasChanged())return"Your changes have not been saved. Click Cancel to return to the document, or OK to proceed."},a.removeEvents=function(){a.props.notifyUnsavedChanges&&($(window).off("beforeunload.editor_"+a.props.id),p.default.removeBeforeUnload("editor_"+a.props.id))},a.setHeightToLineCount=function(){var e=a.editor.getSession().getDocument().getLength(),t=e>a.props.maxLines?a.props.maxLines:e;a.editor.setOptions({maxLines:t,minLines:a.props.minLines})},a.getAnnotations=function(){return a.editor.getSession().getAnnotations()},a.isIgnorableError=function(e){return _.includes(a.props.ignorableErrors,e)},a.removeIgnorableAnnotations=function(){var e=a.isIgnorableError;a.editor.getSession().on("changeAnnotation",function(){var t=this.editor.getSession().getAnnotations(),n=_.reduce(t,function(t,n){return e(n.raw)||t.push(n),t},[]);t.length!==n.length&&this.editor.getSession().setAnnotations(n)}.bind(a))},a.showHideEditStringGutterIcon=function(){return a.hasErrors()||!a.parseLineForStringMatch()?(a.setState({stringEditIconVisible:!1}),!1):(a.setState({stringEditIconVisible:!0,stringEditIconStyle:{top:a.getGutterIconPosition()}}),!0)},a.updateEditStringGutterIconPosition=function(){a.state.stringEditIconVisible&&a.setState({stringEditIconStyle:{top:a.getGutterIconPosition()}})},a.getGutterIconPosition=function(){var e=a.getRowHeight(),t=a.editor.session.getScrollTop();return e*a.documentToScreenRow(a.getSelectionStart().row)-t+"px"},a.parseLineForStringMatch=function(){var e=a.getSelectionStart().row,t=a.getSelectionEnd().row;if(e>=0&&t>=0&&e===t&&a.isRowExpanded(e)){var n=a.getLine(e),o=n.match(/^([ \t]*)("[a-zA-Z0-9_\-]*["|']: )?(["|'].*",?[ \t]*)$/);if(o)return o}return!1},a.openStringEditModal=function(){var e=a.parseLineForStringMatch(),t=e[3],n=t.length-1;","===t.substring(t.length-1)&&(n=t.length-2),t=t.substring(1,n),a.setState({stringEditModalVisible:!0,stringEditModalValue:t})},a.saveStringEditModal=function(e){var t=a.parseLineForStringMatch(),n=t[1]||"",o=t[2]||"",i=t[3],r="";","===i.substring(i.length-1)&&(r=","),a.replaceCurrentLine(n+o+JSON.stringify(e)+r+"\n"),a.closeStringEditModal()},a.closeStringEditModal=function(){a.setState({stringEditModalVisible:!1})},a.hasErrors=function(){return!_.every(a.getAnnotations(),function(e){return this.isIgnorableError(e.raw)},a)},a.setReadOnly=function(e){a.editor.setReadOnly(e)},a.setValue=function(e,t){t=t||-1,a.editor.setValue(e,t)},a.getValue=function(){return a.editor.getValue()},a.getEditor=function(){return a},a.getLine=function(e){return a.editor.session.getLine(e)},a.getSelectionStart=function(){return a.editor.getSelectionRange().start},a.getSelectionEnd=function(){return a.editor.getSelectionRange().end},a.getRowHeight=function(){return a.editor.renderer.layerConfig.lineHeight},a.isRowExpanded=function(e){return!a.editor.getSession().isRowFolded(e)},a.documentToScreenRow=function(e){return a.editor.getSession().documentToScreenRow(e,0)},a.replaceCurrentLine=function(e){a.editor.getSelection().selectLine(),a.editor.insert(e),a.editor.getSelection().moveCursorUp()},r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){this.setupAce(this.props,!0),this.setupEvents(),this.props.autoFocus&&this.editor.focus()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),this.editor.destroy()}},{key:"componentWillReceiveProps",value:function(e){this.setupAce(e,!1)}},{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement("div",{ref:"ace",className:"js-editor",id:this.props.id}),u.default.createElement("button",{ref:"stringEditIcon",className:"btn string-edit",title:"Edit string",disabled:!this.state.stringEditIconVisible,style:this.state.stringEditIconStyle,onClick:this.openStringEditModal},u.default.createElement("i",{className:"icon icon-edit"})),u.default.createElement(g.StringEditModal,{ref:"stringEditModal",visible:this.state.stringEditModalVisible,value:this.state.stringEditModalValue,onSave:this.saveStringEditModal,onClose:this.closeStringEditModal}))}}]),t}(u.default.Component)).defaultProps={id:"code-editor",mode:"javascript",theme:"idle_fingers",fontSize:13,defaultCode:"",showGutter:!0,highlightActiveLine:!0,showPrintMargin:!1,autoScrollEditorIntoView:!0,autoFocus:!1,stringEditModalEnabled:!1,setHeightToLineCount:!1,maxLines:10,minLines:11,editorCommands:[],notifyUnsavedChanges:!1,ignorableErrors:[],change:function(){},blur:function(){}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ViewsTabsSidebarLayout=t.ChangesSidebarLayout=t.DocsTabsSidebarLayout=t.TabsSidebarContent=t.TabsSidebarHeader=void 0;var o=n(1),i=a(o),r=n(0),l=a(r),s=n(77),u=n(469),c=a(u),d=n(425),f=a(d),p=n(423),h=a(p),m=n(238),_=a(m),g=n(429),E=a(g),b=n(426),y=a(b),v=n(246),N=a(v),D=n(247),O=a(D),S=n(245),T=a(S),C=n(244),w=n(30),I=a(w),A=n(37),R=a(A),P=t.TabsSidebarHeader=function(e){var t=e.hideQueryOptions,n=e.hideJumpToDoc,a=e.database,o=e.dbName,i=e.dropDownLinks,r=e.docURL,u=e.endpoint,c=e.endpointAddQueryOptions,d=e.fetchUrl,p=e.ddocsOnly,h=e.queryDocs,m=e.selectedNavItem;return l.default.createElement("header",{className:"two-panel-header"},l.default.createElement("div",{className:"flex-layout flex-row"},l.default.createElement("div",{id:"header-docs-left"},l.default.createElement(f.default,{dbName:o,dropDownLinks:i})),l.default.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},l.default.createElement("div",{id:"right-header",className:"flex-fill"},l.default.createElement(y.default,{hideQueryOptions:t,hideJumpToDoc:n,database:a,fetchUrl:d,ddocsOnly:p,queryDocs:h,selectedNavItem:m})),l.default.createElement(T.default,{docURL:r,endpoint:u,endpointAddQueryOptions:c}),l.default.createElement("div",{id:"notification-center-btn",className:"flex-fill"},l.default.createElement(s.NotificationCenterButton,null)))))};P.propTypes={dbName:i.default.string.isRequired,dropDownLinks:i.default.array.isRequired,docURL:i.default.string,endpoint:i.default.string,showIncludeAllDocs:i.default.bool,hideQueryOptions:i.default.bool,hideJumpToDoc:i.default.bool,database:i.default.object.isRequired,queryDocs:i.default.func,selectedNavItem:i.default.object},P.defaultProps={hideHeaderBar:!1};var L=t.TabsSidebarContent=function(e){var t=e.hideFooter,n=e.lowerContent,a=e.upperContent,o=e.fetchUrl,i=e.databaseName,r=e.queryDocs;return l.default.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},l.default.createElement("aside",{id:"sidebar-content",className:"scrollable"},l.default.createElement(c.default,null)),l.default.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},l.default.createElement("div",{id:"dashboard-upper-content"},a),l.default.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},n),l.default.createElement("div",{id:"footer"},t?null:l.default.createElement(O.default,{databaseName:i,fetchUrl:o,queryDocs:r}))))};L.defaultProps={hideFooter:!1},L.propTypes={hideFooter:i.default.bool,lowerContent:i.default.object,upperContent:i.default.object};var k=(t.DocsTabsSidebarLayout=function(e){var t=e.database,n=e.designDocs,a=e.docURL,o=e.endpoint,i=e.dbName,r=e.dropDownLinks,s=e.fetchUrl,u=e.ddocsOnly,c=e.deleteEnabled,d=void 0===c||c,f=e.selectedNavItem,p=function(e){return(0,C.queryAllDocs)(s,e)};R.default.isViewSelected(f)&&(p=function(e){return(0,C.queryMapReduceView)(s,e)});var h=l.default.createElement(N.default,{fetchUrl:s,designDocs:n,ddocsOnly:u,databaseName:i,fetchAtStartup:!0,queryDocs:p,docType:I.default.INDEX_RESULTS_DOC_TYPE.VIEW,deleteEnabled:d});return l.default.createElement("div",{id:"dashboard",className:"with-sidebar"},l.default.createElement(P,{docURL:a,endpoint:o,endpointAddQueryOptions:!0,dbName:i,dropDownLinks:r,database:t,fetchUrl:s,ddocsOnly:u,queryDocs:p,selectedNavItem:f}),l.default.createElement(L,{lowerContent:h,fetchUrl:s,databaseName:i,queryDocs:p}))},t.ChangesSidebarLayout=function(e){var t=e.docURL,n=e.database,a=e.endpoint,o=e.dbName,i=e.dropDownLinks;return l.default.createElement("div",{id:"dashboard",className:"with-sidebar"},l.default.createElement(P,{docURL:t,endpoint:a,dbName:o,dropDownLinks:i,database:n,hideQueryOptions:!0}),l.default.createElement(L,{upperContent:l.default.createElement(h.default.ChangesTabContent,null),lowerContent:l.default.createElement(h.default.ChangesController,null),hideFooter:!0}))},t.ViewsTabsSidebarLayout=function(e){var t=e.showEditView,n=e.database,a=e.docURL,o=e.endpoint,i=e.dbName,r=e.dropDownLinks,s=t?l.default.createElement(_.default.EditorController,null):l.default.createElement(E.default.DesignDocInfo,null);return l.default.createElement("div",{id:"dashboard",className:"with-sidebar"},l.default.createElement(P,{endpoint:o,docURL:a,dbName:i,dropDownLinks:r,database:n,queryDocs:function(){},hideQueryOptions:!0,hideJumpToDoc:!0}),l.default.createElement(L,{lowerContent:s,hideFooter:!0}))});k.defaultProps={showEditView:!0},k.propTypes={showEditView:i.default.bool,docURL:i.default.string.isRequired,endpoint:i.default.string,dbName:i.default.string.isRequired,dropDownLinks:i.default.array.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=a(o),r=n(2),l=a(r),s=n(101),u=a(s),c=n(46),d=a(c),f=l.default.RouteObject.extend({selectedHeader:"Databases",createDesignDocsCollection:function(){this.designDocs=new u.default.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}})},addSidebar:function(e){var t={designDocs:this.designDocs,database:this.database};e&&(t.selectedNavItem=e),d.default.newOptions(t)},getCrumbs:function(e){return[{type:"back",link:l.default.urls("allDBs","app")},{name:e.id}]},createParams:function(e){var t=i.default.getParams(e);return{urlParams:t,docParams:u.default.QueryParams.parse(t)}}});t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=a(o),r=n(2),l=a(r),s=n(0),u=a(s),c=n(76),d=a(c),f={};f.SidebarStore=l.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._designDocs=new Backbone.Collection,this._selected={navItem:"all-docs",designDocName:"",designDocSection:"",indexName:""},this._loading=!0,this._toggledSections={},this._deleteIndexModalVisible=!1,this._deleteIndexModalDesignDocName="",this._deleteIndexModalText="",this._deleteIndexModalIndexName="",this._deleteIndexModalOnSubmit=function(){},this._cloneIndexModalVisible=!1,this._cloneIndexDesignDocProp="",this._cloneIndexModalTitle="",this._cloneIndexModalSelectedDesignDoc="",this._cloneIndexModalNewDesignDocName="",this._cloneIndexModalNewIndexName="",this._cloneIndexModalIndexLabel="",this._cloneIndexModalOnSubmit=function(){}},newOptions:function(e){this._database=e.database,this._designDocs=e.designDocs,this._loading=!1,e.selectedNavItem&&(this._selected={navItem:e.selectedNavItem,designDocName:"",designDocSection:"",indexName:""})},updatedDesignDocs:function(e){this._designDocs=e},isDeleteIndexModalVisible:function(){return this._deleteIndexModalVisible},getDeleteIndexModalText:function(){return this._deleteIndexModalText},getDeleteIndexModalOnSubmit:function(){return this._deleteIndexModalOnSubmit},isLoading:function(){return this._loading},getDatabase:function(){return this.isLoading()?{}:this._database},toggleContent:function(e,t){return this._toggledSections[e]?t?this.toggleIndexGroup(e,t):void(this._toggledSections[e].visible=!this._toggledSections[e].visible):void(this._toggledSections[e]={visible:!0,indexGroups:{}})},toggleIndexGroup:function(e,t){var n=this._toggledSections[e].indexGroups[t];if(_.isUndefined(n))return void(this._toggledSections[e].indexGroups[t]=!0);this._toggledSections[e].indexGroups[t]=!n},isVisible:function(e,t){return!!this._toggledSections[e]&&(t?this._toggledSections[e].indexGroups[t]:this._toggledSections[e].visible)},getSelected:function(){return this._selected},setSelected:function(e){this._selected={navItem:e.navItem,designDocName:e.designDocName,designDocSection:e.designDocSection,indexName:e.indexName},e.designDocName&&(_.has(this._toggledSections,e.designDocName)||(this._toggledSections[e.designDocName]={visible:!0,indexGroups:{}}),this._toggledSections[e.designDocName].visible=!0,e.designDocSection&&(this._toggledSections[e.designDocName].indexGroups[e.designDocSection]=!0))},getToggledSections:function(){return this._toggledSections},getDatabaseName:function(){return this.isLoading()?"":this._database.safeID()},getDesignDocs:function(){return this._designDocs},getAvailableDesignDocs:function(){var e=this.getDesignDocs().filter(function(e){return!e.isMangoDoc()});return _.map(e,function(e){return e.id})},getDesignDocList:function(){if(this.isLoading())return{};var e=this._designDocs.toJSON();return e=_.filter(e,function(e){return!_.has(e.doc,"language")||"query"!==e.doc.language}),e.map(function(e){return e.safeId=i.default.utils.safeURLName(e._id.replace(/^_design\//,"")),_.extend(e,e.doc)})},showDeleteIndexModal:function(e){this._deleteIndexModalIndexName=e.indexName,this._deleteIndexModalDesignDocName=e.designDocName,this._deleteIndexModalVisible=!0,this._deleteIndexModalText=u.default.createElement("div",null,"Are you sure you want to delete the ",u.default.createElement("code",null,this._deleteIndexModalIndexName)," ",e.indexLabel,"?"),this._deleteIndexModalOnSubmit=e.onDelete},getDeleteIndexModalIndexName:function(){return this._deleteIndexModalIndexName},getDeleteIndexDesignDoc:function(){var e=this._designDocs.find(function(e){return"_design/"+this._deleteIndexModalDesignDocName===e.id},this);return e?e.dDocModel():null},isCloneIndexModalVisible:function(){return this._cloneIndexModalVisible},getCloneIndexModalTitle:function(){return this._cloneIndexModalTitle},showCloneIndexModal:function(e){this._cloneIndexModalIndexLabel=e.indexLabel,this._cloneIndexModalTitle=e.cloneIndexModalTitle,this._cloneIndexModalSourceIndexName=e.sourceIndexName,this._cloneIndexModalSourceDesignDocName=e.sourceDesignDocName,this._cloneIndexModalSelectedDesignDoc="_design/"+e.sourceDesignDocName,this._cloneIndexDesignDocProp="",this._cloneIndexModalVisible=!0,this._cloneIndexModalOnSubmit=e.onSubmit},getCloneIndexModalIndexLabel:function(){return this._cloneIndexModalIndexLabel},getCloneIndexModalOnSubmit:function(){return this._cloneIndexModalOnSubmit},getCloneIndexModalSourceIndexName:function(){return this._cloneIndexModalSourceIndexName},getCloneIndexModalSourceDesignDocName:function(){return this._cloneIndexModalSourceDesignDocName},getCloneIndexDesignDocProp:function(){return this._cloneIndexDesignDocProp},getCloneIndexModalSelectedDesignDoc:function(){return this._cloneIndexModalSelectedDesignDoc},getCloneIndexModalNewDesignDocName:function(){return this._cloneIndexModalNewDesignDocName},getCloneIndexModalNewIndexName:function(){return this._cloneIndexModalNewIndexName},dispatch:function(e){switch(e.type){case d.default.SIDEBAR_SET_SELECTED_NAV_ITEM:this.setSelected(e.options);break;case d.default.SIDEBAR_NEW_OPTIONS:this.newOptions(e.options);break;case d.default.SIDEBAR_TOGGLE_CONTENT:this.toggleContent(e.designDoc,e.indexGroup);break;case d.default.SIDEBAR_FETCHING:this._loading=!0;break;case d.default.SIDEBAR_SHOW_DELETE_INDEX_MODAL:this.showDeleteIndexModal(e.options);break;case d.default.SIDEBAR_HIDE_DELETE_INDEX_MODAL:this._deleteIndexModalVisible=!1;break;case d.default.SIDEBAR_SHOW_CLONE_INDEX_MODAL:this.showCloneIndexModal(e.options);break;case d.default.SIDEBAR_HIDE_CLONE_INDEX_MODAL:this._cloneIndexModalVisible=!1;break;case d.default.SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE:this._cloneIndexModalSelectedDesignDoc=e.options.value;break;case d.default.SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED:this._cloneIndexModalNewDesignDocName=e.options.value;break;case d.default.SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME:this._cloneIndexModalNewIndexName=e.options.value;break;case d.default.SIDEBAR_UPDATED_DESIGN_DOCS:this.updatedDesignDocs(e.options.designDocs),this._loading=!1;break;default:return}this.triggerChange()}}),f.sidebarStore=new f.SidebarStore,f.sidebarStore.dispatchToken=l.default.dispatcher.register(f.sidebarStore.dispatch),t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(253),l=a(r);t.default={toggleNavbarMenu:function(){i.default.dispatch({type:l.default.TOGGLE_NAVBAR_MENU})},addHeaderLink:function(e){i.default.dispatch({type:l.default.ADD_NAVBAR_LINK,link:e})},removeHeaderLink:function(e){i.default.dispatch({type:l.default.REMOVE_NAVBAR_LINK,link:e})},setNavbarVersionInfo:function(e){i.default.dispatch({type:l.default.NAVBAR_SET_VERSION_INFO,version:e})},setNavbarActiveLink:function(e){i.default.dispatch({type:l.default.NAVBAR_ACTIVE_LINK,name:e})},showNavBar:function(){i.default.dispatch({type:l.default.NAVBAR_SHOW})},hideNavBar:function(){i.default.dispatch({type:l.default.NAVBAR_HIDE})}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){e&&s.default.dispatch({type:c.default.INIT_REPLICATION,options:{localSource:e}}),fetch("/_all_dbs",{credentials:"include",headers:{Accept:"application/json; charset=utf-8","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){s.default.dispatch({type:c.default.REPLICATION_DATABASES_LOADED,options:{databases:e}})})}function i(e,t){s.default.dispatch({type:c.default.REPLICATION_UPDATE_FORM_FIELD,options:{fieldName:e,value:t}})}function r(){s.default.dispatch({type:c.default.REPLICATION_CLEAR_FORM})}Object.defineProperty(t,"__esModule",{value:!0}),t.getReplicationStateFrom=t.deleteDocs=t.replicate=void 0;var l=n(2),s=a(l),u=n(260),c=a(u),d=n(499),f=a(d),p=n(47),h=a(p),m=n(135);n(68);var g=t.replicate=function e(t){var n=(0,m.createReplicationDoc)(t),a=fetch("/_replicator",{method:"POST",credentials:"include",headers:{Accept:"application/json; charset=utf-8","Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(e){return e.json()}),o=f.default.getDatabaseLabel(n.source),i=f.default.getDatabaseLabel(n.target);s.default.dispatch({type:c.default.REPLICATION_STARTING});var r=function(e){s.default.addNotification({msg:e.reason,type:"error",clear:!0})};a.then(function(e){if(!e.ok)throw e;s.default.addNotification({msg:"Replication from <code>"+decodeURIComponent(o)+"</code> to <code>"+decodeURIComponent(i)+"</code> has been scheduled.",type:"success",escape:!1,clear:!0})}).catch(function(n){if(n.error&&"not_found"===n.error)return(0,m.createReplicatorDB)().then(function(){return e(t)}).catch(r);r(n)})},E=function(e){s.default.dispatch({type:c.default.REPLICATION_FETCHING_STATUS}),(0,m.fetchReplicationDocs)(e).then(function(e){s.default.dispatch({type:c.default.REPLICATION_STATUS,options:e})})},b=function(){(0,m.supportNewApi)().then(function(e){e&&(s.default.dispatch({type:c.default.REPLICATION_FETCHING_REPLICATE_STATUS}),(0,m.fetchReplicateInfo)().then(function(e){s.default.dispatch({type:c.default.REPLICATION_REPLICATE_STATUS,options:e})}))})},y=function(e){s.default.dispatch({type:c.default.REPLICATION_FILTER_DOCS,options:e})},v=function(e){s.default.dispatch({type:c.default.REPLICATION_FILTER_REPLICATE,options:e})},N=function(){s.default.dispatch({type:c.default.REPLICATION_TOGGLE_ALL_DOCS})},D=function(e){s.default.dispatch({type:c.default.REPLICATION_TOGGLE_DOC,options:e})},O=function(){s.default.dispatch({type:c.default.REPLICATION_TOGGLE_ALL_REPLICATE})},S=function(e){s.default.dispatch({type:c.default.REPLICATION_TOGGLE_REPLICATE,options:e})},T=function(){s.default.dispatch({type:c.default.REPLICATION_CLEAR_SELECTED_DOCS})},C=function(){s.default.dispatch({type:c.default.REPLICATION_CLEAR_SELECTED_REPLICATES})},w=t.deleteDocs=function(e){var t=e.map(function(e){var t=e.raw;return t._deleted=!0,t});s.default.addNotification({msg:"Deleting doc"+(t.length>1?"s":"")+".",type:"success",escape:!1,clear:!0}),fetch("/_replicator/_bulk_docs",{credentials:"include",headers:{Accept:"application/json; charset=utf-8","Content-Type":"application/json"},method:"POST",body:JSON.stringify({docs:t})}).then(function(e){if(!e.ok)throw e;return e.json()}).then(function(){var t="The selected documents have been deleted.";1===e.length&&(t="Document <code>"+e[0]._id+"</code> has been deleted"),s.default.addNotification({msg:t,type:"success",escape:!1,clear:!0}),T(),E()}).catch(function(e){e.json().then(function(e){s.default.addNotification({msg:e.reason,type:"error",clear:!0})})})},I=function(e){s.default.addNotification({msg:"Deleting _replicate"+(e.length>1?"s":"")+".",type:"success",escape:!1,clear:!0}),(0,m.deleteReplicatesApi)(e).then(function(){var t="The selected replications have been deleted.";1===e.length&&(t="Replication <code>"+e[0]._id+"</code> has been deleted"),C(),b(),s.default.addNotification({msg:t,type:"success",escape:!1,clear:!0})},function(e){var t=JSON.parse(e.responseText);s.default.addNotification({msg:t.reason,type:"error",clear:!0})})},A=t.getReplicationStateFrom=function(e){s.default.dispatch({type:c.default.REPLICATION_FETCHING_FORM_STATE}),fetch("/_replicator/"+encodeURIComponent(e),{credentials:"include",headers:{Accept:"application/json; charset=utf-8"},method:"GET"}).then(function(e){return e.json()}).then(function(e){var t={replicationDocName:e._id,replicationType:e.continuous?h.default.REPLICATION_TYPE.CONTINUOUS:h.default.REPLICATION_TYPE.ONE_TIME},n=_.isObject(e.source)?e.source.url:e.source,a=_.isObject(e.target)?e.target.url:e.target;if(n.indexOf(window.location.hostname)>-1){var o=new URL(n);t.replicationSource=h.default.REPLICATION_SOURCE.LOCAL,t.localSource=decodeURIComponent(o.pathname.slice(1))}else t.replicationSource=h.default.REPLICATION_SOURCE.REMOTE,t.remoteSource=(0,m.decodeFullUrl)(n);if(a.indexOf(window.location.hostname)>-1){var i=new URL(a);t.replicationTarget=h.default.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,t.localTarget=decodeURIComponent(i.pathname.slice(1))}else t.replicationTarget=h.default.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,t.remoteTarget=(0,m.decodeFullUrl)(a);s.default.dispatch({type:c.default.REPLICATION_SET_STATE_FROM_DOC,options:t})}).catch(function(e){s.default.addNotification({msg:e.reason,type:"error",clear:!0})})},R=function(){s.default.dispatch({type:c.default.REPLICATION_SHOW_CONFLICT_MODAL})},P=function(){s.default.dispatch({type:c.default.REPLICATION_HIDE_CONFLICT_MODAL})},L=function(e){s.default.dispatch({type:c.default.REPLICATION_CHANGE_ACTIVITY_SORT,options:e})},k=function(e,t){s.default.dispatch({type:c.default.REPLICATION_CHANGE_TAB_SECTION,options:e}),t&&s.default.navigate(t,{trigger:!1})},M=function(){(0,m.supportNewApi)().then(function(e){s.default.dispatch({type:c.default.REPLICATION_SUPPORT_NEW_API,options:e})})};t.default={checkForNewApi:M,initReplicator:o,replicate:g,updateFormField:i,clearReplicationForm:r,getReplicationActivity:E,filterDocs:y,selectAllDocs:N,selectDoc:D,deleteDocs:w,getReplicationStateFrom:A,showConflictModal:R,hideConflictModal:P,changeActivitySort:L,clearSelectedDocs:T,changeTabSection:k,getReplicateActivity:b,filterReplicate:v,selectReplicate:S,selectAllReplicates:O,deleteReplicates:I}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createReplicatorDB=t.deleteReplicatesApi=t.fetchReplicateInfo=t.parseReplicateInfo=t.checkReplicationDocID=t.fetchSchedulerDocs=t.fetchReplicationDocs=t.combineDocsAndScheduler=t.convertState=t.parseReplicationDocs=t.getDocUrl=t.removeSensitiveUrlInfo=t.createReplicationDoc=t.addDocIdAndRev=t.continuous=t.createTarget=t.getTarget=t.getSource=t.removeCredentialsFromUrl=t.getCredentialsFromUrl=t.getAuthHeaders=t.getUsername=t.decodeFullUrl=t.encodeFullUrl=t.supportNewApi=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(367);var i=n(47),r=a(i),l=n(2),s=a(l),u=n(523),c=a(u),d=n(18),f=a(d);n(68);var p=null,h=t.supportNewApi=function(e){return p&&!e||(p=new s.default.Promise(function(e){fetch("/_scheduler/jobs",{credentials:"include",headers:{Accept:"application/json; charset=utf-8"}}).then(function(t){if(t.status>202)return e(!1);e(!0)})})),p},m=t.encodeFullUrl=function(e){if(!e)return"";var t=new URL(e);return t.origin+"/"+encodeURIComponent(t.pathname.slice(1))},_=(t.decodeFullUrl=function(e){if(!e)return"";var t=new URL(e);return t.origin+"/"+decodeURIComponent(t.pathname.slice(1))},t.getUsername=function(){return s.default.session.user().name}),g=t.getAuthHeaders=function(e,t){return e&&t?{Authorization:"Basic "+c.default.encode(e+":"+t)}:{}},E=t.getCredentialsFromUrl=function(e){var t=e.lastIndexOf("@");if(-1===t)return{username:"",password:""};var n=e.startsWith("https")?8:7,a=e.slice(n,t),o=a.indexOf(":");return{username:a.slice(0,o),password:a.slice(o+1,a.length)}},b=t.removeCredentialsFromUrl=function(e){var t=e.lastIndexOf("@");return-1===t?e:(e.startsWith("https")?"https://":"http://")+e.slice(t+1)},y=t.getSource=function(e){var t=e.replicationSource,n=e.localSource,a=e.remoteSource,o=e.username,i=e.password,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,s=l.origin,u=void 0,c=void 0;if(t===r.default.REPLICATION_SOURCE.LOCAL)u=s+"/"+n,c=g(o,i);else{var d=E(a);c=g(d.username,d.password),u=b(a)}return{headers:c,url:m(u)}},v=t.getTarget=function(e){var t=e.replicationTarget,n=e.localTarget,a=e.remoteTarget,o=(e.replicationSource,e.username),i=e.password,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,s=l.origin,u=encodeURIComponent(n),c=g(o,i),d=s+"/"+u;if(t===r.default.REPLICATION_TARGET.NEW_REMOTE_DATABASE||t===r.default.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE){var f=E(a);d=m(b(a)),c=g(f.username,f.password)}return{headers:c,url:d}},N=t.createTarget=function(e){return!!f.default.includes([r.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE,r.default.REPLICATION_TARGET.NEW_REMOTE_DATABASE],e)},D=t.continuous=function(e){return e===r.default.REPLICATION_TYPE.CONTINUOUS},O=t.addDocIdAndRev=function(e,t,n){return e&&(n._id=e),t&&(n._rev=t),n},S=(t.createReplicationDoc=function(e){var t=e.replicationTarget,n=e.replicationSource,a=e.replicationType,o=e.replicationDocName,i=e.password,r=e.localTarget,l=e.localSource,s=e.remoteTarget,u=e.remoteSource,c=e._rev,d=_();return O(o,c,{user_ctx:{name:d,roles:["_admin","_reader","_writer"]},source:y({replicationSource:n,localSource:l,remoteSource:u,username:d,password:i}),target:v({replicationTarget:t,replicationSource:n,remoteTarget:s,localTarget:r,username:d,password:i}),create_target:N(t),continuous:D(a)})},t.removeSensitiveUrlInfo=function(e){try{var t=new URL(e);return t.origin+"/"+decodeURIComponent(t.pathname.slice(1))}catch(t){return e}}),T=t.getDocUrl=function(e){var t=e;return e?("object"===(void 0===e?"undefined":o(e))&&(t=e.url),S(t)):""},C=t.parseReplicationDocs=function(e){return e.map(function(e){return e.doc}).map(function(e){return{_id:e._id,_rev:e._rev,selected:!1,source:T(e.source),target:T(e.target),createTarget:e.create_target,continuous:!0===e.continuous,status:e._replication_state,errorMsg:e._replication_state_reason?e._replication_state_reason:"",statusTime:new Date(e._replication_state_time),startTime:new Date(e._replication_start_time),url:"#/database/_replicator/"+encodeURIComponent(e._id),raw:e}})},w=t.convertState=function(e){return"error"===e.toLowerCase()||"crashing"===e.toLowerCase()?"retrying":e},I=t.combineDocsAndScheduler=function(e,t){return e.map(function(e){var n=t.find(function(t){return t.doc_id===e._id});return n?(e.status=w(n.state),n.start_time&&(e.startTime=new Date(n.start_time)),n.last_updated&&(e.stateTime=new Date(n.last_updated)),e):e})},A=(t.fetchReplicationDocs=function(){return h().then(function(e){var t=fetch("/_replicator/_all_docs?include_docs=true&limit=100",{credentials:"include",headers:{Accept:"application/json; charset=utf-8"}}).then(function(e){return e.json()}).then(function(e){return e.error?[]:C(e.rows.filter(function(e){return-1===e.id.indexOf("_design/")}))});if(!e)return t;var n=A();return s.default.Promise.join(t,n,function(e,t){return I(e,t)}).catch(function(){return[]})})},t.fetchSchedulerDocs=function(){return fetch("/_scheduler/docs?include_docs=true",{credentials:"include",headers:{Accept:"application/json; charset=utf-8"}}).then(function(e){return e.json()}).then(function(e){return e.error?[]:e.docs})}),R=(t.checkReplicationDocID=function(e){var t=s.default.Deferred();return fetch("/_replicator/"+e,{credentials:"include",headers:{Accept:"application/json; charset=utf-8"}}).then(function(e){if("Object Not Found"===e.statusText)return void t.resolve(!1);t.resolve(!0)}),t},t.parseReplicateInfo=function(e){return e.jobs.filter(function(e){return null===e.database}).map(function(e){return{_id:e.id,source:T(e.source.slice(0,e.source.length-1)),target:T(e.target.slice(0,e.target.length-1)),startTime:new Date(e.start_time),statusTime:new Date(e.last_updated),status:w(e.history[0].type),errorMsg:"",selected:!1,continuous:/continuous/.test(e.id),raw:e}})});t.fetchReplicateInfo=function(){return h().then(function(e){return e?fetch("/_scheduler/jobs",{credentials:"include",headers:{Accept:"application/json; charset=utf-8"}}).then(function(e){return e.json()}).then(function(e){return R(e)}):[]})},t.deleteReplicatesApi=function(e){var t=e.map(function(e){var t={replication_id:e._id,cancel:!0};return fetch("/_replicate",{method:"POST",credentials:"include",headers:{Accept:"application/json; charset=utf-8","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()})});return s.default.Promise.all(t)},t.createReplicatorDB=function(){return fetch("/_replicator",{method:"PUT",credentials:"include",headers:{Accept:"application/json; charset=utf-8"}}).then(function(e){if(!e.ok)throw{reason:"Failed to create the _replicator database."};return e.json()}).then(function(){return!0})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={TESTS:{CREATE_DATABASE:"TEST_CREATE_DATABASE",CREATE_DOCUMENT:"TEST_CREATE_DOCUMENT",UPDATE_DOCUMENT:"TEST_UPDATE_DOCUMENT",DELETE_DOCUMENT:"TEST_DELETE_DOCUMENT",CREATE_VIEW:"TEST_CREATE_VIEW",REPLICATION:"TEST_REPLICATION"}};t.default=a},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(44),i=a(o),r=n(18),l=a(r),s={getParams:function(e){e&&("?"===e.substring(0,1)?e=e.substring(1):e.indexOf("?")>-1&&(e=e.split("?")[1]));var t=window.location.hash.split("?")[1];e=e||t||window.location.search.substring(1);var n,a={},o=/\+/g,i=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(o," "))},l=e;if(e)for(;n=i.exec(l);)a[r(n[1])]=r(n[2]);return a},replaceQueryParams:function(e){var t=window.location.hash.replace(/\?.*$/,"");return l.default.isEmpty(e)||(t=t+"?"+i.default.param(e)),t},removeSpecialCharacters:function(e){return e.replace(/[^\w\s]/gi,"")},safeURLName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return encodeURIComponent(e)},getDocTypeFromId:function(e){return e&&/^_design\//.test(e)?"design doc":"doc"},isSystemDatabase:function(e){return/^_/.test(e)},getSafeIdForDoc:function(e){if("design doc"===s.getDocTypeFromId(e)){var t=e.replace(/^_design\//,"");return"_design/"+s.safeURLName(t)}return s.safeURLName(e)},localStorageSet:function(e,t){(l.default.isObject(t)||l.default.isArray(t))&&(t=JSON.stringify(t));var n=!0;try{window.localStorage.setItem(e,t)}catch(e){n=!1}return n},localStorageGet:function(e){var t;if(l.default.has(window.localStorage,e)){t=window.localStorage[e];try{return JSON.parse(t)}catch(e){return t}}return t},stripHTML:function(e){if(!document)return e;var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}};t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(271),i=a(o),r=n(137),l=a(r),s=n(168),u=a(s),c=n(18),d=a(c),f={};f.removeSpecialCharacters=l.default.removeSpecialCharacters,f.safeURL=l.default.safeURLName,f.imageUrl=function(e){return e},f.getDocUrl=function(e){return d.default.has(i.default.DOC_URLS,e)?i.default.DOC_URLS[e]:"#"},f.formatSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=512;if(e<n)return e+" bytes";for(var a=["KB","MB","GB","TB","PB","EB","ZB","YB"],o=0;e>=n&&o<a.length;)o+=1,e/=1024;return e.toFixed(t)+" "+a[o-1]},f.formatDate=function(e){return(0,u.default)(e,"X").format("MMM Do, h:mm:ss a")},f.getDateFromNow=function(e){return(0,u.default)(e,"X").fromNow()},f.escapeJQuerySelector=function(e){return e&&e.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")},t.default=f},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(202),l=a(r);t.default={init:function(e){this.fetchAndSetActiveTasks(e.table,e),i.default.when(e.fetch()).then(function(){this.fetchAndSetActiveTasks(e.table,e),this.setActiveTaskIsLoading(!1)}.bind(this))},fetchAndSetActiveTasks:function(e,t){i.default.dispatch({type:l.default.ACTIVE_TASKS_FETCH_AND_SET,options:{collectionTable:e,backboneCollection:t}})},changePollingInterval:function(e){i.default.dispatch({type:l.default.ACTIVE_TASKS_CHANGE_POLLING_INTERVAL,options:e})},switchTab:function(e){i.default.dispatch({type:l.default.ACTIVE_TASKS_SWITCH_TAB,options:e})},setCollection:function(e){i.default.dispatch({type:l.default.ACTIVE_TASKS_SET_COLLECTION,options:e})},setSearchTerm:function(e){i.default.dispatch({type:l.default.ACTIVE_TASKS_SET_SEARCH_TERM,options:e})},sortByColumnHeader:function(e){i.default.dispatch({type:l.default.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER,options:{columnName:e}})},setActiveTaskIsLoading:function(e){i.default.dispatch({type:l.default.ACTIVE_TASKS_SET_IS_LOADING,options:e})},runPollingUpdate:function(e){e.pollingFetch().then(function(){i.default.dispatch({type:l.default.ACTIVE_TASKS_POLLING_COLLECTION,options:e.table})})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ACTIVE_TASKS_SWITCH_TAB:"ACTIVE_TASKS_SWITCH_TAB",ACTIVE_TASKS_SET_COLLECTION:"ACTIVE_TASKS_SET_COLLECTION",ACTIVE_TASKS_SET_SEARCH_TERM:"ACTIVE_TASKS_SET_SEARCH_TERM",ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:"ACTIVE_TASKS_SORT_BY_COLUMN_HEADER",ACTIVE_TASKS_FETCH_AND_SET:"ACTIVE_TASKS_FETCH_AND_SET",ACTIVE_TASKS_SET_IS_LOADING:"ACTIVE_TASKS_SET_IS_LOADING",ACTIVE_TASKS_POLLING_COLLECTION:"ACTIVE_TASKS_POLLING_COLLECTION"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=a(o),r=n(201),l=a(r),s={};s.AllTasks=Backbone.Collection.extend({url:function(){return i.default.host+"/_active_tasks"},pollingFetch:function(){return l.default.setActiveTaskIsLoading(!0),this.fetch({reset:!0,parse:!0})},parse:function(e){l.default.setActiveTaskIsLoading(!1);var t=[];return _.each(e,function(e){t.push(e)}),this.table=t,e},table:[]}),t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={AUTH_CREDS_VALID:"AUTH_CREDS_VALID",AUTH_CREDS_INVALID:"AUTH_CREDS_INVALID",AUTH_SHOW_PASSWORD_MODAL:"AUTH_SHOW_PASSWORD_MODAL",AUTH_HIDE_PASSWORD_MODAL:"AUTH_HIDE_PASSWORD_MODAL"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AdminLayout=t.AuthLayout=t.OnePaneHeader=void 0;var o=n(0),i=a(o),r=n(29),l=n(96),s=n(128),u=a(s),c=n(95),d=n(2),f=a(d),p=u.default.CreateAdminForm,h=u.default.ChangePasswordForm,m=t.OnePaneHeader=function(e){var t=e.crumbs;return i.default.createElement("header",null,i.default.createElement("div",{className:"flex-layout flex-row"},i.default.createElement("div",{id:"breadcrumbs",className:"flex-body"},i.default.createElement(l.Breadcrumbs,{crumbs:t}))))},_=t.AuthLayout=function(e){var t=e.crumbs,n=e.component;return i.default.createElement(r.OnePane,null,i.default.createElement(m,{crumbs:t}),i.default.createElement(r.OnePaneContent,null,n))},g=function(e){var t=e.changePassword;return i.default.createElement(c.TabElementWrapper,null,i.default.createElement(c.TabElement,{key:1,selected:t,text:"Change Password",onChange:function(){f.default.navigate("#changePassword")}}),i.default.createElement(c.TabElement,{key:2,selected:!t,text:"Create Server Admin",onChange:function(){f.default.navigate("#addAdmin")}}))};t.AdminLayout=function(e){var t=e.crumbs,n=e.changePassword,a=n?i.default.createElement(h,null):i.default.createElement(p,{loginAfter:!1});return i.default.createElement(r.OnePane,null,i.default.createElement(m,{crumbs:t}),i.default.createElement(r.OnePaneContent,null,i.default.createElement("div",{className:"template-content flex-body flex-layout flex-col"},i.default.createElement(g,{changePassword:n}),i.default.createElement("div",{id:"dashboard-conten1t",className:"flex-layout flex-col"},a))))},t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CLUSTER_FETCH_NODES:"CLUSTER_FETCH_NODES"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(206),l=a(r),s=i.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._nodes=[]},setNodes:function(e){this._nodes=e.nodes},getNodes:function(){return this._nodes},dispatch:function(e){switch(e.type){case l.default.CLUSTER_FETCH_NODES:this.setNodes(e.options);break;default:return}this.triggerChange()}}),u=new s;u.dispatchToken=i.default.dispatcher.register(u.dispatch.bind(u)),t.default={nodesStore:u}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=a(o),r=n(2),l=a(r),s=l.default.addon();s.ClusterNodes=Backbone.Model.extend({url:function(e){return"apiurl"===e?window.location.origin+"/_membership":i.default.host+"/_membership"},parse:function(e){var t;return t=e.all_nodes.reduce(function(t,n){var a=-1!==e.cluster_nodes.indexOf(n);return t.push({node:n,isInCluster:a}),t},[]),e.nodes_mapped=t,e}}),t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CMPNTS_DATABASES_SHOWDELETE_MODAL:"CMPNTS_DATABASES_SHOWDELETE_MODAL"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DocLink=t.JSONLink=void 0;var o=n(0),i=a(o);a(n(10)),t.JSONLink=function(e){var t=e.endpoint;return t?i.default.createElement("div",{className:"faux__jsonlink"},i.default.createElement("a",{"data-bypass":!0,className:"faux__jsonlink-link",href:t,target:"_blank"},i.default.createElement("span",{className:"faux__jsonlink-link-brackets"},"{ ","}"),i.default.createElement("span",null,"JSON"))):null},t.DocLink=function(e){var t=e.docURL;return t?i.default.createElement("div",{className:"faux__doclink"},i.default.createElement("a",{"data-bypass":"true",href:t,target:"_blank",className:"faux__doclink-link"},i.default.createElement("i",{className:"icon fonticon-bookmark"}))):null}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Beautify=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(515)),f=a(d),p=n(19),h=f.default.js_beautify?f.default.js_beautify:f.default;t.Beautify=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.noOfLines=function(){return a.props.code.split(/\r\n|\r|\n/).length},a.canBeautify=function(){return 1===a.noOfLines()},a.beautify=function(e){e.preventDefault();var t=h(a.props.code);a.props.beautifiedCode(t)},a.getTooltip=function(){return u.default.createElement(p.Tooltip,{id:"tooltip"},"Switch to editable code format.")},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){if(!this.canBeautify())return null;var e=this.getTooltip();return u.default.createElement(p.OverlayTrigger,{placement:"right",overlay:e},u.default.createElement("button",{onClick:this.beautify,className:"beautify beautify_map btn btn-primary btn-small beautify-tooltip",type:"button"},"Format Code"))}}]),t}(u.default.Component)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LoadLines=void 0;var o=n(0),i=a(o);a(n(10)),t.LoadLines=function(){return i.default.createElement("div",{className:"loading-lines"},i.default.createElement("div",{id:"line1"}," "),i.default.createElement("div",{id:"line2"}," "),i.default.createElement("div",{id:"line3"}," "),i.default.createElement("div",{id:"line4"}," "))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StringEditModal=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=a(f),h=n(19),m=n(141),_=a(m),g=n(37),E=a(g);n(275),n(142),n(143);var b=t.StringEditModal=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.initEditor=function(e){a.editor=_.default.edit(p.default.findDOMNode(a.refs.stringEditor)),a.editor.$blockScrolling=1/0,a.editor.setShowPrintMargin(!1),a.editor.setOption("highlightActiveLine",!0),a.editor.setTheme("ace/theme/idle_fingers"),a.editor.setValue(e,-1)},a.closeModal=function(){a.props.onClose()},a.save=function(){a.props.onSave(a.editor.getValue())},r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.visible&&this.initEditor(this.props.value)}},{key:"componentDidUpdate",value:function(e){if(this.props.visible){var t="";!e.visible&&this.props.visible&&(t=E.default.parseJSON(this.props.value)),this.initEditor(t)}}},{key:"render",value:function(){return d.default.createElement(h.Modal,{dialogClassName:"string-editor-modal",show:this.props.visible,onHide:this.closeModal},d.default.createElement(h.Modal.Header,{closeButton:!0},d.default.createElement(h.Modal.Title,null,"Edit Value ",d.default.createElement("span",{id:"string-edit-header"}))),d.default.createElement(h.Modal.Body,null,d.default.createElement("div",{id:"modal-error",className:"hide alert alert-error"}),d.default.createElement("div",{id:"string-editor-wrapper"},d.default.createElement("div",{ref:"stringEditor",className:"doc-code"}))),d.default.createElement(h.Modal.Footer,null,d.default.createElement("a",{className:"cancel-link",onClick:this.closeModal},"Cancel"),d.default.createElement("button",{id:"string-edit-save-btn",onClick:this.save,className:"btn btn-primary save"},d.default.createElement("i",{className:"fonticon-circle-check"})," Modify Text")))}}]),t}(d.default.Component);b.propTypes={value:u.default.string.isRequired,visible:u.default.bool.isRequired,onClose:u.default.func.isRequired,onSave:u.default.func.isRequired},b.defaultProps={visible:!1,onClose:function(){},onSave:function(){}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ZenModeOverlay=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(11)),f=a(d),p=n(129),h=n(19);n(525);var m={dark:"idle_fingers",light:"dawn"};(t.ZenModeOverlay=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{theme:a.getZenTheme(),code:a.props.defaultCode}},a.getZenTheme=function(){var e=f.default.utils.localStorageGet("zenTheme");return _.isUndefined(e)?"dark":e},a.onChange=function(){a.setState(a.getStoreState())},a.exitZenMode=function(){a.props.onExit(a.getValue())},a.getValue=function(){return a.refs.ace.getValue()},a.toggleTheme=function(){var e="dark"===a.state.theme?"light":"dark";a.setState({theme:e,code:a.getValue()}),f.default.utils.localStorageSet("zenTheme",e)},a.setValue=function(e,t){t=t||-1,a.editor.setValue(e,t)},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e="full-page-editor-modal-wrapper zen-theme-"+this.state.theme,t=[{name:"close",bindKey:{win:"ESC",mac:"ESC"},exec:this.exitZenMode}],n=u.default.createElement(h.Tooltip,{id:"tooltip"},"Exit zen mode (`esc`)"),a=u.default.createElement(h.Tooltip,{id:"tooltip"},"Switch zen theme");return u.default.createElement("div",{className:e},u.default.createElement("div",{className:"zen-mode-controls"},u.default.createElement("ul",null,u.default.createElement("li",null,u.default.createElement(h.OverlayTrigger,{placement:"left",overlay:n},u.default.createElement("span",{className:"fonticon fonticon-resize-small js-exit-zen-mode","data-container":".zen-mode-controls .tooltips",onClick:this.exitZenMode}))),u.default.createElement("li",null,u.default.createElement(h.OverlayTrigger,{placement:"left",overlay:a},u.default.createElement("span",{ref:"theme",className:"fonticon fonticon-picture js-toggle-theme","data-container":".zen-mode-controls .tooltips",title:"Switch zen theme",onClick:this.toggleTheme})))),u.default.createElement("div",{className:"tooltips"})),u.default.createElement(p.CodeEditor,{ref:"ace",autoFocus:!0,theme:m[this.state.theme],defaultCode:this.props.defaultCode,editorCommands:t,ignorableErrors:this.props.ignorableErrors,highlightActiveLine:this.props.highlightActiveLine}))}}]),t}(u.default.Component)).defaultProps={mode:"javascript",defaultCode:"",ignorableErrors:[],onExit:null,highlightActiveLine:!1}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(11),l=a(r),s=n(209),u=a(s),c={};c.DeleteDbModalStore=i.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._deleteModal={showDeleteModal:!1,dbId:"",isSystemDatabase:!1}},setDeleteModal:function(e){e.isSystemDatabase=l.default.utils.isSystemDatabase(e.dbId),this._deleteModal=e},getShowDeleteDatabaseModal:function(){return this._deleteModal},dispatch:function(e){switch(e.type){case u.default.CMPNTS_DATABASES_SHOWDELETE_MODAL:this.setDeleteModal(e.options);break;default:return}this.triggerChange()}}),c.deleteDbModalStore=new c.DeleteDbModalStore,c.deleteDbModalStore.dispatchToken=i.default.dispatcher.register(c.deleteDbModalStore.dispatch),t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(217),i=a(o),r=n(2),l=a(r),s=n(218),u=a(s);t.default={fetchAndEditConfig:function(e){var t=this;l.default.dispatch({type:i.default.LOADING_CONFIG});var n=new u.default.ConfigModel({node:e});n.fetch().then(function(){return t.editSections({sections:n.get("sections"),node:e})})},editSections:function(e){l.default.dispatch({type:i.default.EDIT_CONFIG,options:e})},editOption:function(e){l.default.dispatch({type:i.default.EDIT_OPTION,options:e})},cancelEdit:function(e){l.default.dispatch({type:i.default.CANCEL_EDIT,options:e})},saveOption:function(e,t){var n=this;l.default.dispatch({type:i.default.SAVING_OPTION,options:t});var a=t;return a.node=e,new u.default.OptionModel(a).save().then(function(){return n.optionSaveSuccess(t)},function(e){return n.optionSaveFailure(t,JSON.parse(e.responseText).reason)})},optionSaveSuccess:function(e){l.default.dispatch({type:i.default.OPTION_SAVE_SUCCESS,options:e}),l.default.addNotification({msg:"Option "+e.optionName+" saved",type:"success"})},optionSaveFailure:function(e,t){l.default.dispatch({type:i.default.OPTION_SAVE_FAILURE,options:e}),l.default.addNotification({msg:"Option save failed: "+t,type:"error"})},addOption:function(e,t){var n=this;l.default.dispatch({type:i.default.ADDING_OPTION});var a=t;return a.node=e,new u.default.OptionModel(a).save().then(function(){return n.optionAddSuccess(t)},function(e){return n.optionAddFailure(t,JSON.parse(e.responseText).reason)})},optionAddSuccess:function(e){l.default.dispatch({type:i.default.OPTION_ADD_SUCCESS,options:e}),l.default.addNotification({msg:"Option "+e.optionName+" added",type:"success"})},optionAddFailure:function(e,t){l.default.dispatch({type:i.default.OPTION_ADD_FAILURE,options:e}),l.default.addNotification({msg:"Option add failed: "+t,type:"error"})},deleteOption:function(e,t){var n=this;l.default.dispatch({type:i.default.DELETING_OPTION,options:t});var a=t;return a.node=e,new u.default.OptionModel(a).destroy().then(function(){return n.optionDeleteSuccess(t)},function(e){return n.optionDeleteFailure(t,JSON.parse(e.responseText).reason)})},optionDeleteSuccess:function(e){l.default.dispatch({type:i.default.OPTION_DELETE_SUCCESS,options:e}),l.default.addNotification({msg:"Option "+e.optionName+" deleted",type:"success"})},optionDeleteFailure:function(e,t){l.default.dispatch({type:i.default.OPTION_DELETE_FAILURE,options:e}),l.default.addNotification({msg:"Option delete failed: "+t,type:"error"})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={EDIT_CONFIG:"EDIT_CONFIG",LOADING_CONFIG:"LOADING_CONFIG",EDIT_OPTION:"EDIT_OPTION",CANCEL_EDIT:"CANCEL_EDIT",SAVING_OPTION:"SAVING_OPTION",OPTION_SAVE_SUCCESS:"OPTION_SAVE_SUCCESS",OPTION_SAVE_FAILURE:"OPTION_SAVE_FAILURE",DELETING_OPTION:"DELETING_OPTION",OPTION_DELETE_SUCCESS:"OPTION_DELETE_SUCCESS",OPTION_DELETE_FAILURE:"OPTION_DELETE_FAILURE",ADDING_OPTION:"ADDING_OPTION",OPTION_ADD_SUCCESS:"OPTION_ADD_SUCCESS",OPTION_ADD_FAILURE:"OPTION_ADD_FAILURE"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=a(o),r=n(2),l=a(r),s=l.default.addon();s.OptionModel=Backbone.Model.extend({documentation:l.default.constants.DOC_URLS.CONFIG,url:function(){if(!this.get("node"))throw new Error("no node set");return i.default.host+"/_node/"+this.get("node")+"/_config/"+this.get("sectionName")+"/"+encodeURIComponent(this.get("optionName"))},isNew:function(){return!1},sync:function(e,t){var n={url:t.url(),contentType:"application/json",dataType:"json",data:JSON.stringify(t.get("value"))};return n.type="delete"===e?"DELETE":"PUT",$.ajax(n)}}),s.ConfigModel=Backbone.Model.extend({documentation:l.default.constants.DOC_URLS.CONFIG,url:function(){if(!this.get("node"))throw new Error("no node set");return i.default.host+"/_node/"+this.get("node")+"/_config"},parse:function(e){return{sections:e}}}),t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={EDIT_CORS:"EDIT_CORS",CORS_SET_IS_LOADING:"CORS_SET_IS_LOADING",CORS_SHOW_DELETE_DOMAIN_MODAL:"CORS_SHOW_DELETE_DOMAIN_MODAL",CORS_HIDE_DELETE_DOMAIN_MODAL:"CORS_HIDE_DELETE_DOMAIN_MODAL"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),d=n(11),f=a(d),p=n(15),h=a(p),m=n(55),g=a(m),E=n(224),b=a(E),y=n(221),v=a(y),N=n(223),D=a(N),O=h.default.LoadLines,S=g.default.ConfirmationModal,T=function(e){function t(e){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return l(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.fetchAndLoadCORSOptions()}},{key:"enableCorsChange",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,a=e.node;(!t||_.isEmpty(n)||window.confirm(f.default.i18n.en_US["cors-disable-cors-prompt"]))&&this.props.saveCORS({corsEnabled:!t,origins:n,node:a})}},{key:"save",value:function(){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins,node:this.props.node})}},{key:"originChange",value:function(e){(!e||_.isEmpty(this.props.origins)||window.confirm("Are you sure? Switching to all origin domains will overwrite your specific origin domains."))&&this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:e?["*"]:[],node:this.props.node})}},{key:"addOrigin",value:function(e){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins.concat(e),node:this.props.node})}},{key:"updateOrigin",value:function(e,t){var n=this.props.origins.slice(),a=_.indexOf(n,t);-1!==a&&(n[a]=e,this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:n,node:this.props.node}))}},{key:"deleteOrigin",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,a=e.node,i=e.domainToDelete,r=this.props.origins.indexOf(i);if(-1!==r){var l=[].concat(o(n.slice(0,r)),o(n.slice(r+1)));this.props.saveCORS({corsEnabled:t,origins:l,node:a})}}},{key:"render",value:function(){var e=[this.props.corsEnabled,!this.props.isAllOrigins].every(function(e){return!0===e}),t=c.default.createElement("div",{id:this.props.corsEnabled?"collapsing-container":""},c.default.createElement(b.default,{corsEnabled:this.props.corsEnabled,originChange:this.originChange.bind(this),isAllOrigins:this.props.isAllOrigins}),c.default.createElement(D.default,{updateOrigin:this.updateOrigin.bind(this),deleteOrigin:this.props.showDeleteDomainConfirmation,isVisible:e,origins:this.props.origins}),c.default.createElement(v.default,{addOrigin:this.addOrigin.bind(this),isVisible:e}));this.props.isLoading&&(t=c.default.createElement(O,null));var n=c.default.createElement("span",null,"Are you sure you want to delete ",c.default.createElement("code",null,_.escape(this.props.domainToDelete)),"?");return c.default.createElement("div",{className:"cors-page flex-body"},c.default.createElement("header",{id:"cors-header"},c.default.createElement("p",null,f.default.i18n.en_US["cors-notice"])),c.default.createElement("form",{id:"corsForm",onSubmit:this.save.bind(this)},c.default.createElement("div",{className:"cors-enable"},this.props.corsEnabled?"CORS is currently enabled.":"CORS is currently disabled.",c.default.createElement("br",null),c.default.createElement("button",{type:"button",className:"enable-disable btn btn-secondary",onClick:this.enableCorsChange.bind(this),disabled:this.props.isLoading?"disabled":null},this.props.corsEnabled?"Disable CORS":"Enable CORS")),t),c.default.createElement(S,{title:"Confirm Deletion",visible:this.props.deleteDomainModalVisible,text:n,buttonClass:"btn-danger",onClose:this.props.hideDeleteDomainConfirmation,onSubmit:this.deleteOrigin.bind(this),successButtonLabel:"Delete Domain"}))}}]),t}(u.Component);t.default=T},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(225),p=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={origin:""},n}return r(t,e),l(t,[{key:"onInputChange",value:function(e){this.setState({origin:e.target.value})}},{key:"addOrigin",value:function(e){if(e.preventDefault(),!(0,f.validateDomain)(this.state.origin))return!1;var t=(0,f.normalizeUrls)(this.state.origin);this.props.addOrigin(t),this.setState({origin:""})}},{key:"onKeyUp",value:function(e){if(13==e.keyCode)return this.addOrigin(e)}},{key:"render",value:function(){return this.props.isVisible?d.default.createElement("div",{id:"origin-domains-container"},d.default.createElement("div",{className:"origin-domains"},d.default.createElement("div",{className:"input-append"},d.default.createElement("input",{type:"text",name:"new_origin_domain",placeholder:"https://example.com",onChange:this.onInputChange.bind(this),value:this.state.origin}),d.default.createElement("button",{onClick:this.addOrigin.bind(this),className:"btn btn-secondary add-domain"},d.default.createElement("i",{className:"icon fonticon-ok-circled"})," Add Domain")))):null}}]),t}(c.Component);t.default=p,p.propTypes={isVisible:u.default.bool.isRequired,addOrigin:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(225),p=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={edit:!1,updatedOrigin:n.props.origin},n}return r(t,e),l(t,[{key:"editOrigin",value:function(e){e.preventDefault(),this.setState({edit:!this.state.edit})}},{key:"updateOrigin",value:function(e){e.preventDefault(),(0,f.validateDomain)(this.state.updatedOrigin)&&(this.state.updatedOrigin&&this.props.origin!==this.state.updatedOrigin&&this.props.updateOrigin(this.state.updatedOrigin,this.props.origin),this.setState({edit:!1}))}},{key:"deleteOrigin",value:function(e){e.preventDefault(),this.props.deleteOrigin(this.props.origin)}},{key:"onInputChange",value:function(e){this.setState({updatedOrigin:e.target.value})}},{key:"onKeyUp",value:function(e){if(13===e.keyCode)return this.updateOrigin(e)}},{key:"createOriginDisplay",value:function(){return this.state.edit?d.default.createElement("div",{className:"input-append edit-domain-section"},d.default.createElement("input",{type:"text",name:"update_origin_domain",onChange:this.onInputChange.bind(this),onKeyUp:this.onKeyUp.bind(this),value:this.state.updatedOrigin}),d.default.createElement("button",{onClick:this.updateOrigin.bind(this),className:"btn btn-primary update-origin"}," Update ")):d.default.createElement("div",{className:"js-url url-display"},this.props.origin)}},{key:"render",value:function(){var e=this.createOriginDisplay();return d.default.createElement("tr",null,d.default.createElement("td",null,e),d.default.createElement("td",{width:"30"},d.default.createElement("span",null,d.default.createElement("a",{className:"fonticon-pencil",onClick:this.editOrigin.bind(this),title:"Edit domain."}))),d.default.createElement("td",{width:"30"},d.default.createElement("span",null,d.default.createElement("a",{href:"#","data-bypass":"true",className:"fonticon-trash",onClick:this.deleteOrigin.bind(this),title:"Delete domain."}))))}}]),t}(c.Component);t.default=p,p.propTypes={origin:u.default.string.isRequired,updateOrigin:u.default.func.isRequired,deleteOrigin:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(222),p=a(f),h=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"createRows",value:function(){var e=this;return this.props.origins.map(function(t,n){return d.default.createElement(p.default,{updateOrigin:e.props.updateOrigin,deleteOrigin:e.props.deleteOrigin,key:n,origin:t})})}},{key:"render",value:function(){var e=this.props,t=e.origins,n=e.isVisible;if(!t)return null;if(!n||0===t.length)return null;var a=this.createRows();return d.default.createElement("table",{id:"origin-domain-table",className:"table table-striped"},d.default.createElement("tbody",null,a))}}]),t}(c.Component);t.default=h,h.propTypes={isVisible:u.default.bool.isRequired,origins:u.default.arrayOf(u.default.string),updateOrigin:u.default.func.isRequired,deleteOrigin:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"onOriginChange",value:function(e){"all"===e.target.value&&this.props.isAllOrigins||("selected"!==e.target.value||this.props.isAllOrigins)&&this.props.originChange("all"===e.target.value)}},{key:"render",value:function(){return this.props.corsEnabled?d.default.createElement("div",null,d.default.createElement("p",null,d.default.createElement("strong",null," Origin Domains ")," "),d.default.createElement("p",null,"Databases will accept requests from these domains: "),d.default.createElement("label",{className:"radio"},d.default.createElement("input",{type:"radio",checked:this.props.isAllOrigins,value:"all",onChange:this.onOriginChange.bind(this),name:"all-domains"})," All domains ( * )"),d.default.createElement("label",{className:"radio"},d.default.createElement("input",{type:"radio",checked:!this.props.isAllOrigins,value:"selected",onChange:this.onOriginChange.bind(this),name:"selected-domains"})," Restrict to specific domains")):null}}]),t}(c.Component);t.default=f,f.propTypes={corsEnabled:u.default.bool,isAllOrigins:u.default.bool,originChange:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeUrls=t.validateCORSDomain=t.validateDomain=void 0;var o=n(2),i=a(o),r=(t.validateDomain=function(e){return!!r(e)||(i.default.addNotification({msg:"Please enter a valid domain, starting with http/https.",type:"error",clear:!0}),!1)},t.validateCORSDomain=function(e){return/^https?:\/\/(.+)(:\d{2,5})?$/.test(e)});t.normalizeUrls=function(e){var t=document.createElement("a");return t.href=e,/:/.test(e)?t.protocol+"//"+t.host:t.protocol+"//"+t.hostname}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=[],a=[],o=0;e.forEach(function(r){i(f.default.urls("databaseBaseURL","server",r)).then(function(e){n.push(e)}).fail(function(){a.push(r)}).always(function(){++o===e.length&&s({dbList:e,databaseDetails:n,failedDbs:a,fullDbList:t})})})}function i(e){return $.ajax({cache:!1,url:e,dataType:"json"}).then(function(e){return e})}function r(){return i(f.default.urls("allDBs","server"))}function l(e,t,n){var a=(t-1)*n,o=t*n;return e.slice(a,o)}function s(e){f.default.dispatch({type:g.default.DATABASES_UPDATE,options:e})}Object.defineProperty(t,"__esModule",{value:!0});var u=n(11),c=a(u),d=n(2),f=a(d),p=n(228),h=a(p),m=n(227),g=a(m),E=n(72),b=a(E);t.default={getDatabaseList:r,paginate:l,getDatabaseDetails:o,fetch:i,init:function(){var e=this,t=c.default.getParams(),n=t.page?parseInt(t.page,10):1,a=f.default.constants.MISC.DEFAULT_PAGE_SIZE;this.setStartLoading(),this.setPage(n),r(a,n).then(function(t){var i=l(t,n,a);e.updateDatabases({dbList:i,databaseDetails:[],failedDbs:[],fullDbList:t}),o(i,t)})},updateDatabases:s,setPage:function(e){f.default.dispatch({type:g.default.DATABASES_SETPAGE,options:{page:e}})},setStartLoading:function(){f.default.dispatch({type:g.default.DATABASES_STARTLOADING})},setLoadComplete:function(){f.default.dispatch({type:g.default.DATABASES_LOADCOMPLETE})},createNewDatabase:function(e){if(_.isNull(e)||0===e.trim().length)return void f.default.addNotification({msg:"Please enter a valid database name",type:"error",clear:!0});e=e.trim(),f.default.dispatch({type:g.default.DATABASES_SET_PROMPT_VISIBLE,options:{visible:!1}});var t=h.default.databasesStore.obtainNewDatabaseModel(e);f.default.addNotification({msg:"Creating database."}),t.save().done(function(){f.default.addNotification({msg:"Database created successfully",type:"success",clear:!0});var t=f.default.urls("allDocs","app",c.default.utils.safeURLName(e),"?limit="+b.default.DocLimit);c.default.router.navigate(t,{trigger:!0})}).error(function(e){var t=JSON.parse(e.responseText).reason;f.default.addNotification({msg:"Create database failed: "+t,type:"error",clear:!0})})},jumpToDatabase:function(e){if(!_.isNull(e)&&0!==e.trim().length){e=e.trim();var t=f.default.urls("allDocs","app",c.default.utils.safeURLName(e),"");return setTimeout(function(){f.default.navigate(t)})}},fetchAllDbsWithKey:function(e,t){var n="?"+$.param({startkey:JSON.stringify(e),endkey:JSON.stringify(e+"é¦™"),limit:30}),a=c.default.host+"/_all_dbs"+n;$.ajax({cache:!1,url:a,dataType:"json"}).then(function(e){var n=e.map(function(e){return{value:e,label:e}});t(null,{options:n})})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={DATABASES_SETPAGE:"DATABASES_SETPAGE",DATABASES_SET_PROMPT_VISIBLE:"DATABASES_SET_PROMPT_VISIBLE",DATABASES_STARTLOADING:"DATABASES_STARTLOADING",DATABASES_LOADCOMPLETE:"DATABASES_LOADCOMPLETE",DATABASES_UPDATE:"DATABASES_UPDATE"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(2),r=a(i),l=n(227),s=a(l),u=n(72),c=a(u),d=n(138),f=a(d),p=c.default.Model,h=r.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._loading=!1,this._promptVisible=!1,this._page=1,this._dbList=[],this._databaseDetails=[],this._failedDbs=[],this._fullDbList=[]},getPage:function(){return this._page},isLoading:function(){return this._loading},setLoading:function(e){this._loading=e},isPromptVisible:function(){return this._promptVisible},setPromptVisible:function(e){this._promptVisible=e},obtainNewDatabaseModel:function(e){return new p({id:e,name:e})},doesDatabaseExist:function(e){return-1!==this._dbList.indexOf(e)},getTotalAmountOfDatabases:function(){return this._fullDbList.length},getDbList:function(){var e=this;return this._dbList.map(function(t){var n=e._databaseDetails.filter(function(e){return e.db_name===t}),a={id:t,encodedId:encodeURIComponent(t),url:r.default.urls("allDocsSanitized","app",t),failed:-1!==e._failedDbs.indexOf(t)};return o({},a,e._getDetails(n[0]))})},_getDetails:function(e){if(!e)return{};var t=e.data_size||e.disk_size||0;return{dataSize:f.default.formatSize(t),docCount:e.doc_count,docDelCount:e.doc_del_count,showTombstoneWarning:e.doc_del_count>e.doc_count}},dispatch:function(e){switch(e.type){case s.default.DATABASES_SETPAGE:this._page=e.options.page;break;case s.default.DATABASES_SET_PROMPT_VISIBLE:this.setPromptVisible(e.options.visible);break;case s.default.DATABASES_STARTLOADING:this.setLoading(!0);break;case s.default.DATABASES_LOADCOMPLETE:this.setLoading(!1);break;case s.default.DATABASES_UPDATE:this._fullDbList=e.options.fullDbList,this._dbList=e.options.dbList,this._databaseDetails=e.options.databaseDetails,this._failedDbs=e.options.failedDbs,this.setLoading(!1);break;default:return}this.triggerChange()}}),m=new h;m.dispatchToken=r.default.dispatcher.register(m.dispatch.bind(m)),t.default={databasesStore:m,DatabasesStoreConstructor:h}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(11),r=a(i),l=n(2),s=a(l),u=n(230),c=a(u),d=n(231),f=a(d),p=n(37),h=a(p),m=f.default.changesStore;t.default={addFilter:function(e){s.default.dispatch({type:c.default.ADD_CHANGES_FILTER_ITEM,filter:e})},removeFilter:function(e){s.default.dispatch({type:c.default.REMOVE_CHANGES_FILTER_ITEM,filter:e})},initChanges:function(e){s.default.dispatch({type:c.default.INIT_CHANGES,options:e}),o=null,this.getLatestChanges()},getLatestChanges:function(){var e={limit:100};o&&(e.since=m.getLastSeqNum(),e.timeout=6e4,e.feed="longpoll");var t=$.param(e),n=r.default.utils.safeURLName(m.getDatabaseName()),a=s.default.urls("changes","server",n,"?"+t);o=$.getJSON(a),o.then(this.updateChanges.bind(this))},updateChanges:function(e){var t=h.default.getSeqNum(e.last_seq);t!==m.getLastSeqNum()&&s.default.dispatch({type:c.default.UPDATE_CHANGES,changes:e.results,seqNum:t})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={INIT_CHANGES:"INIT_CHANGES",UPDATE_CHANGES:"UPDATE_CHANGES",ADD_CHANGES_FILTER_ITEM:"ADD_CHANGES_FILTER_ITEM",REMOVE_CHANGES_FILTER_ITEM:"REMOVE_CHANGES_FILTER_ITEM",UPDATE_CHANGES_FILTER:"UPDATE_CHANGES_FILTER",TOGGLE_CHANGES_CODE_VISIBILITY:"TOGGLE_CHANGES_CODE_VISIBILITY"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(230),l=a(r),s=n(37),u=a(s),c=i.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._isLoaded=!1,this._filters=[],this._changes=[],this._databaseName="",this._maxChangesListed=100,this._showingSubset=!1,this._lastSequenceNum=null},initChanges:function(e){this.reset(),this._databaseName=e.databaseName},isLoaded:function(){return this._isLoaded},updateChanges:function(e,t){this._lastSequenceNum=e;var n=0===this._changes.length;_.each(this._changes,function(e){e.isNew=!1});var a=_.map(t,function(e){var t=u.default.getSeqNum(e.seq);return{id:e.id,seq:t,deleted:!!_.has(e,"deleted")&&e.deleted,changes:e.changes,doc:e.doc,isNew:!n}});this._changes=a.concat(this._changes),this._isLoaded=!0},getChanges:function(){this._showingSubset=!1;var e=0;return _.filter(this._changes,function(t){if(e>=this._maxChangesListed)return this._showingSubset=!0,!1;var n=JSON.stringify(t),a=_.every(this._filters,function(e){return new RegExp(e,"i").test(n)});return a&&e++,a},this)},addFilter:function(e){this._filters.push(e)},removeFilter:function(e){this._filters=_.without(this._filters,e)},getFilters:function(){return this._filters},hasFilter:function(e){return _.includes(this._filters,e)},getDatabaseName:function(){return this._databaseName},isShowingSubset:function(){return this._showingSubset},setMaxChanges:function(e){this._maxChangesListed=e},getLastSeqNum:function(){return this._lastSequenceNum},dispatch:function(e){switch(e.type){case l.default.INIT_CHANGES:this.initChanges(e.options);break;case l.default.UPDATE_CHANGES:this.updateChanges(e.seqNum,e.changes);break;case l.default.ADD_CHANGES_FILTER_ITEM:this.addFilter(e.filter);break;case l.default.REMOVE_CHANGES_FILTER_ITEM:this.removeFilter(e.filter);break;default:return}this.triggerChange()}}),d={};d.changesStore=new c,d.changesStore.dispatchToken=i.default.dispatcher.register(d.changesStore.dispatch),t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(233),l=a(r),s=n(234),u=a(s),c=u.default.designDocInfoStore;t.default={fetchDesignDocInfo:function(e){var t=this,n=e.ddocName,a=e.designDocInfo;return i.default.dispatch({type:l.default.DESIGN_FETCHING}),a.fetch().then(function(){t.monitorDesignDoc({ddocName:n,designDocInfo:a})})},monitorDesignDoc:function(e){e.intervalId=window.setInterval(_.bind(this.refresh,this),5e3),i.default.dispatch({type:l.default.DESIGN_DOC_MONITOR,options:e})},refresh:function(){c.getDesignDocInfo().fetch().then(function(){i.default.dispatch({type:l.default.DESIGN_REFRESH})})},stopRefresh:function(){window.clearInterval(c.getIntervalId())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={DESIGN_DOC_MONITOR:"DESIGN_DOC_MONITOR",DESIGN_FETCHING:"DESIGN_FETCHING",DESIGN_REFRESH:"DESIGN_REFRESH"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(233),l=a(r),s={};s.DesignDocInfoStore=i.default.Store.extend({initialize:function(){this._isLoading=!0},isLoading:function(){return this._isLoading},getDdocName:function(){return this._ddocName},getDesignDocInfo:function(){return this._designDocInfo},monitorDesignDoc:function(e){this._isLoading=!1,this._designDocInfo=e.designDocInfo,this._ddocName=e.ddocName,this._intervalId=e.intervalId},getIntervalId:function(){return this._intervalId},getViewIndex:function(){return this._isLoading?{}:this._designDocInfo.get("view_index")},dispatch:function(e){switch(e.type){case l.default.DESIGN_FETCHING:this._isLoading=!0,this.triggerChange();break;case l.default.DESIGN_DOC_MONITOR:this.monitorDesignDoc(e.options),this.triggerChange();break;case l.default.DESIGN_DOC_REFRESH:this.triggerChange();break;default:return}}}),s.designDocInfoStore=new s.DesignDocInfoStore,s.designDocInfoStore.dispatchToken=i.default.dispatcher.register(s.designDocInfoStore.dispatch),t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.doc;D.default.dispatch({type:S.default.RESET_DOC}),t.fetch().then(function(){D.default.dispatch({type:S.default.DOC_LOADED,options:{doc:t}}),e.onLoaded&&e.onLoaded()},function(n){404===n.status&&E("The "+t.id+" document does not exist."),D.default.navigate(D.default.urls("allDocs","app",e.database.id,""))})}function i(e,t,n){t?(D.default.addNotification({msg:"Saving document.",clear:!0}),e.save().then(function(){n(e.prettyJSON()),D.default.navigate("#/"+D.default.urls("allDocs","app",D.default.url.encode(e.database.id)),{trigger:!0})}).fail(function(e){D.default.addNotification({msg:"Save failed: "+JSON.parse(e.responseText).reason,type:"error",fade:!1,clear:!0})})):e.validationError&&"Cannot change a documents id."===e.validationError?(E("You cannot edit the _id of an existing document. Try this: Click 'Clone Document', then change the _id on the clone before saving."),delete e.validationError):E("Please fix the JSON errors and try saving again.")}function r(){D.default.dispatch({type:S.default.SHOW_DELETE_DOC_CONFIRMATION_MODAL})}function l(){D.default.dispatch({type:S.default.HIDE_DELETE_DOC_CONFIRMATION_MODAL})}function s(e){var t=e.database.safeID(),n="?rev="+e.get("_rev");$.ajax({url:D.default.urls("document","server",t,e.safeID(),n),type:"DELETE",contentType:"application/json; charset=UTF-8",xhrFields:{withCredentials:!0},success:function(){D.default.addNotification({msg:"Your document has been successfully deleted.",clear:!0}),D.default.navigate(D.default.urls("allDocs","app",t,""))},error:function(){D.default.addNotification({msg:"Failed to delete your document!",type:"error",clear:!0})}})}function u(){D.default.dispatch({type:S.default.SHOW_CLONE_DOC_MODAL})}function c(){D.default.dispatch({type:S.default.HIDE_CLONE_DOC_MODAL})}function d(e,t,n){var a=v.default.utils.getSafeIdForDoc(n);c(),t.copy(a).then(function(){t.set({_id:a}),D.default.navigate("/database/"+e.safeID()+"/"+a,{trigger:!0}),D.default.addNotification({msg:"Document has been duplicated."})},function(e){var t="Could not duplicate document, reason: "+e.responseText+".";D.default.addNotification({msg:t,type:"error"})})}function f(){D.default.dispatch({type:S.default.SHOW_UPLOAD_MODAL})}function p(){D.default.dispatch({type:S.default.HIDE_UPLOAD_MODAL})}function h(e){if(0===e.files.length)return void D.default.dispatch({type:S.default.FILE_UPLOAD_ERROR,options:{error:"Please select a file to be uploaded."}});D.default.dispatch({type:S.default.START_FILE_UPLOAD}),b=$.ajaxSettings.xhr();var t="?rev="+e.rev,n=e.doc.getDatabase().safeID(),a=e.doc.safeID(),i=e.files[0];$.ajax({url:D.default.urls("document","attachment",n,a,i.name,t),type:"PUT",data:i,contentType:i.type,processData:!1,xhrFields:{withCredentials:!0},xhr:function(){return b.upload.onprogress=function(e){var t=e.loaded/e.total*100;D.default.dispatch({type:S.default.SET_FILE_UPLOAD_PERCENTAGE,options:{percent:t}})},b},success:function(){o({doc:e.doc,onLoaded:function(){D.default.dispatch({type:S.default.FILE_UPLOAD_SUCCESS}),D.default.addNotification({msg:"Document saved successfully.",type:"success",clear:!0})}.bind(this)})},error:function(e){_.isEmpty(e.responseText)||D.default.dispatch({type:S.default.FILE_UPLOAD_ERROR,options:{error:JSON.parse(e.responseText).reason}})}})}function m(){b.abort()}function g(){D.default.dispatch({type:S.default.RESET_UPLOAD_MODAL})}function E(e){D.default.addNotification({msg:e,type:"error",clear:!0})}Object.defineProperty(t,"__esModule",{value:!0});var b,y=n(11),v=a(y),N=n(2),D=a(N),O=n(236),S=a(O);t.default={initDocEditor:o,saveDoc:i,showCloneDocModal:u,hideCloneDocModal:c,cloneDoc:d,showDeleteDocModal:r,hideDeleteDocModal:l,deleteDoc:s,showUploadModal:f,hideUploadModal:p,uploadAttachment:h,cancelUpload:m,resetUploadModal:g}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={RESET_DOC:"RESET_DOC",DOC_LOADED:"DOC_LOADED",SHOW_CLONE_DOC_MODAL:"SHOW_CLONE_DOC_MODAL",HIDE_CLONE_DOC_MODAL:"HIDE_CLONE_DOC_MODAL",SHOW_DELETE_DOC_CONFIRMATION_MODAL:"SHOW_DELETE_DOC_CONFIRMATION_MODAL",HIDE_DELETE_DOC_CONFIRMATION_MODAL:"HIDE_DELETE_DOC_CONFIRMATION_MODAL",SHOW_UPLOAD_MODAL:"SHOW_UPLOAD_MODAL",HIDE_UPLOAD_MODAL:"HIDE_UPLOAD_MODAL",RESET_UPLOAD_MODAL:"RESET_UPLOAD_MODAL",SHOW_STRING_EDIT_MODAL:"SHOW_STRING_EDIT_MODAL",HIDE_STRING_EDIT_MODAL:"HIDE_STRING_EDIT_MODAL",FILE_UPLOAD_SUCCESS:"FILE_UPLOAD_SUCCESS",FILE_UPLOAD_ERROR:"FILE_UPLOAD_ERROR",START_FILE_UPLOAD:"START_FILE_UPLOAD",SET_FILE_UPLOAD_PERCENTAGE:"SET_FILE_UPLOAD_PERCENTAGE"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CLEAR_INDEX:"CLEAR_INDEX",EDIT_INDEX:"EDIT_INDEX",EDIT_NEW_INDEX:"EDIT_NEW_INDEX",SELECT_REDUCE_CHANGE:"SELECT_REDUCE_CHANGE",VIEW_SAVED:"VIEW_SAVED",VIEW_CREATED:"VIEW_CREATED",DESIGN_DOC_CHANGE:"DESIGN_DOC_CHANGE",DESIGN_DOC_NEW_NAME_UPDATED:"DESIGN_DOC_NEW_NAME_UPDATED",NEW_DESIGN_DOC:"NEW_DESIGN_DOC",VIEW_NAME_CHANGE:"VIEW_NAME_CHANGE",VIEW_ADD_DESIGN_DOC:"VIEW_ADD_DESIGN_DOC",VIEW_UPDATE_MAP_CODE:"VIEW_UPDATE_MAP_CODE",VIEW_UPDATE_REDUCE_CODE:"VIEW_UPDATE_REDUCE_CODE"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(15),i=a(o),r=n(239),l=a(r),s=n(433),u=a(s),c=n(240),d=a(c),f=i.default.StyledSelect;t.default={EditorController:u.default,ReduceEditor:d.default,DesignDocSelector:l.default,StyledSelect:f}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(2)),h=a(p),m=n(15),_=a(m),g=_.default.StyledSelect,E=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"validate",value:function(){return"new-doc"!==this.props.selectedDesignDocName||""!==this.props.newDesignDocName||(h.default.addNotification({msg:"Please name your design doc.",type:"error"}),this.newDesignDocInput.focus(),!1)}},{key:"getDocList",value:function(){return this.props.designDocList?this.props.designDocList.map(function(e){return d.default.createElement("option",{key:e,value:e},e)}):[]}},{key:"selectDesignDoc",value:function(e){this.props.onSelectDesignDoc(e.target.value)}},{key:"updateDesignDocName",value:function(e){this.props.onChangeNewDesignDocName(e.target.value)}},{key:"getNewDDocField",value:function(){var e=this;if("new-doc"===this.props.selectedDesignDocName)return d.default.createElement("div",{id:"new-ddoc-section",className:"span5"},d.default.createElement("label",{className:"control-label",htmlFor:"new-ddoc"},"_design/"),d.default.createElement("div",{className:"controls"},d.default.createElement("input",{type:"text",id:"new-ddoc",placeholder:"newDesignDoc",ref:function(t){e.newDesignDocInput=t},onChange:this.updateDesignDocName.bind(this)})))}},{key:"getDocLink",value:function(){return this.props.docLink?d.default.createElement("a",{className:"help-link","data-bypass":"true",href:this.props.docLink,target:"_blank"},d.default.createElement("i",{className:"icon-question-sign"})):null}},{key:"render",value:function(){var e=d.default.createElement("optgroup",{label:"Select a document"},d.default.createElement("option",{value:"new-doc"},"New document"),this.getDocList());return d.default.createElement("div",{className:"design-doc-group control-group"},d.default.createElement("div",{className:"span3"},d.default.createElement("label",{htmlFor:"ddoc"},this.props.designDocLabel,this.getDocLink()),d.default.createElement(g,{selectChange:this.selectDesignDoc.bind(this),selectValue:this.props.selectedDesignDocName,selectId:"faux__edit-view__design-doc",selectContent:e})),this.getNewDDocField())}}]),t}(c.Component);t.default=E,E.defaultProps={designDocLabel:"Design Document",selectedDesignDocName:"",newDesignDocName:""},E.propTypes={designDocList:u.default.array.isRequired,onSelectDesignDoc:u.default.func.isRequired,onChangeNewDesignDocName:u.default.func.isRequired,selectedDesignDocName:u.default.string.isRequired,newDesignDocName:u.default.string.isRequired,designDocLabel:u.default.string,docURL:u.default.string}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(11)),f=a(d),p=n(15),h=a(p),m=n(241),g=a(m),E=n(97),b=a(E),y=f.default.helpers.getDocUrl,v=g.default.indexEditorStore,N=h.default.CodeEditorPanel,D=h.default.StyledSelect,O=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStoreState(),n}return r(t,e),l(t,[{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){v.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){v.off("change",this.onChange)}},{key:"getStoreState",value:function(){return{reduce:v.getReduce(),reduceOptions:v.reduceOptions(),reduceSelectedOption:v.reduceSelectedOption(),hasCustomReduce:v.hasCustomReduce(),hasReduce:v.hasReduce()}}},{key:"getOptionsList",value:function(){return _.map(this.state.reduceOptions,function(e,t){return u.default.createElement("option",{key:t,value:e},e)},this)}},{key:"getReduceValue",value:function(){return this.state.hasReduce?this.state.hasCustomReduce?this.refs.reduceEditor.getValue():this.state.reduce:null}},{key:"getEditor",value:function(){return this.refs.reduceEditor.getEditor()}},{key:"updateReduceCode",value:function(e){b.default.updateReduceCode(e)}},{key:"selectChange",value:function(e){b.default.selectReduceChanged(e.target.value)}},{key:"render",value:function(){var e=this.getOptionsList(),t=void 0;return this.state.hasCustomReduce&&(t=u.default.createElement(N,{ref:"reduceEditor",id:"reduce-function",title:"Custom Reduce function",defaultCode:this.state.reduce,allowZenMode:!1,blur:this.updateReduceCode.bind(this)})),u.default.createElement("div",null,u.default.createElement("div",{className:"control-group"},u.default.createElement("label",{htmlFor:"reduce-function-selector"},u.default.createElement("span",null,"Reduce (optional)"),u.default.createElement("a",{className:"help-link","data-bypass":"true",href:y("REDUCE_FUNCS"),target:"_blank"},u.default.createElement("i",{className:"icon-question-sign"}))),u.default.createElement(D,{selectContent:e,selectChange:this.selectChange.bind(this),selectId:"reduce-function-selector",selectValue:this.state.reduceSelectedOption})),t)}}]),t}(s.Component);t.default=O},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(237),l=a(r),s=n(45),u=a(s),c={};c.IndexEditorStore=i.default.Store.extend({defaultMap:"function (doc) {\n  emit(doc._id, 1);\n}",defaultReduce:"function (keys, values, rereduce) {\n  if (rereduce) {\n    return sum(values);\n  } else {\n    return values.length;\n  }\n}",initialize:function(){this.reset()},reset:function(){this._designDocs=[],this._isLoading=!0,this._view={reduce:"",map:this.defaultMap},this._database={id:"0"}},editIndex:function(e){this._database=e.database,this._newView=e.newView,this._viewName=e.viewName||"viewName",this._newDesignDoc=e.newDesignDoc||!1,this._newDesignDocName="",this._designDocs=e.designDocs,this._designDocId=e.designDocId,this._originalViewName=this._viewName,this._originalDesignDocName=e.designDocId,this.setView(),this._isLoading=!1},isLoading:function(){return this._isLoading},setView:function(){this._newView||this._newDesignDoc?this._view={reduce:"",map:this.defaultMap}:this._view=this.getDesignDoc().get("views")[this._viewName]},getDatabase:function(){return this._database},getMap:function(){return this._view.map},setMap:function(e){this._view.map=e},getReduce:function(){return this._view.reduce},setReduce:function(e){this._view.reduce=e},getDesignDoc:function(){return this._designDocs.find(function(e){return this._designDocId==e.id},this).dDocModel()},getDesignDocs:function(){return this._designDocs},getAvailableDesignDocs:function(){var e=this.getDesignDocs().filter(function(e){return!e.isMangoDoc()});return _.map(e,function(e){return e.id})},getDesignDocId:function(){return this._designDocId},setDesignDocId:function(e){this._designDocId=e},isNewDesignDoc:function(){return this._newDesignDoc},isNewView:function(){return this._newView},getViewName:function(){return this._viewName},setViewName:function(e){this._viewName=e},hasCustomReduce:function(){return!!this.hasReduce()&&!_.includes(this.builtInReduces(),this.getReduce())},hasReduce:function(){return!!this.getReduce()},getOriginalViewName:function(){return this._originalViewName},getOriginalDesignDocName:function(){return this._originalDesignDocName},builtInReduces:function(){return["_sum","_count","_stats"]},reduceSelectedOption:function(){return this.hasReduce()?this.hasCustomReduce()?"CUSTOM":this.getReduce():"NONE"},reduceOptions:function(){return this.builtInReduces().concat(["CUSTOM","NONE"])},updateReduceFromSelect:function(e){return"NONE"===e?void this.setReduce(null):"CUSTOM"===e?void this.setReduce(this.defaultReduce):void this.setReduce(e)},addDesignDoc:function(e){this._designDocs.add(e,{merge:!0}),this._designDocId=e._id},getNewDesignDocName:function(){return this._newDesignDocName},getSaveDesignDoc:function(){if("new-doc"===this._designDocId){var e={_id:"_design/"+this._newDesignDocName,views:{},language:"javascript"};return new u.default.Doc(e,{database:this._database})}var t=this._designDocs.find(function(e){return e.id===this._designDocId}.bind(this));return t?t.dDocModel():null},dispatch:function(e){switch(e.type){case l.default.CLEAR_INDEX:this.reset();break;case l.default.EDIT_INDEX:this.editIndex(e.options);break;case l.default.VIEW_NAME_CHANGE:this.setViewName(e.name);break;case l.default.EDIT_NEW_INDEX:this.editIndex(e.options);break;case l.default.SELECT_REDUCE_CHANGE:this.updateReduceFromSelect(e.reduceSelectedOption);break;case l.default.DESIGN_DOC_CHANGE:this.setDesignDocId(e.options.value);break;case l.default.VIEW_SAVED:case l.default.VIEW_CREATED:break;case l.default.VIEW_ADD_DESIGN_DOC:this.addDesignDoc(e.designDoc),this.setView();break;case l.default.VIEW_UPDATE_MAP_CODE:this.setMap(e.code);break;case l.default.VIEW_UPDATE_REDUCE_CODE:this.setReduce(e.code);break;case l.default.DESIGN_DOC_NEW_NAME_UPDATED:this._newDesignDocName=e.options.value;break;default:return}this.triggerChange()}}),c.indexEditorStore=new c.IndexEditorStore,c.indexEditorStore.dispatchToken=i.default.dispatcher.register(c.indexEditorStore.dispatch),t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetPagination=t.paginatePrevious=t.decrementSkipForPagePrevious=t.paginateNext=t.incrementSkipForPageNext=t.updatePerPageResults=t.resetFetchParamsBeforePerPageChange=t.setPerPage=t.toggleShowAllColumns=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(2),r=a(i),l=n(54),s=n(98),u=a(s),c=(t.toggleShowAllColumns=function(){return{type:u.default.INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS}},t.setPerPage=function(e){return{type:u.default.INDEX_RESULTS_REDUX_SET_PER_PAGE,perPage:e}}),d=t.resetFetchParamsBeforePerPageChange=function(e,t,n){return o({},e,{limit:n+1,skip:t.skip||0})},f=(t.updatePerPageResults=function(e,t,n,a){return t=d(t,n,a),function(o){o(c(a)),o((0,l.fetchDocs)(e,t,n))}},t.incrementSkipForPageNext=function(e,t){return o({},e,{skip:e.skip+t})}),p=(t.paginateNext=function(e,t,n,a){return t=f(t,a),function(a){a({type:u.default.INDEX_RESULTS_REDUX_PAGINATE_NEXT}),a((0,l.fetchDocs)(e,t,n))}},t.decrementSkipForPagePrevious=function(e,t){return o({},e,{skip:Math.max(e.skip-t,0)})});t.paginatePrevious=function(e,t,n,a){return t=p(t,a),function(a){a({type:u.default.INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS}),a((0,l.fetchDocs)(e,t,n))}},t.resetPagination=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.default.constants.MISC.DEFAULT_PAGE_SIZE;return c(e)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.queryOptionsRemoveFilterOnlyDdocs=t.queryOptionsFilterOnlyDdocs=t.queryOptionsToggleIncludeDocs=t.queryOptionsUpdateLimit=t.queryOptionsUpdateSkip=t.queryOptionsToggleDescending=t.queryOptionsUpdateByKeys=t.queryOptionsUpdateBetweenKeys=t.queryOptionsToggleBetweenKeys=t.queryOptionsToggleByKeys=t.queryOptionsUpdateGroupLevel=t.queryOptionsToggleReduce=t.queryOptionsToggleVisibility=t.queryOptionsExecute=t.resetFetchParamsBeforeExecute=void 0;var o=n(98),i=a(o),r=n(54),l=function(e){return{type:i.default.INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS,options:e}},s=t.resetFetchParamsBeforeExecute=function(e){return{limit:e+1,skip:0}};t.queryOptionsExecute=function(e,t,n){var a=s(n);return(0,r.fetchDocs)(e,a,t)},t.queryOptionsToggleVisibility=function(e){return l({isVisible:e})},t.queryOptionsToggleReduce=function(e){return l(e?{reduce:!e}:{reduce:!e,includeDocs:!1})},t.queryOptionsUpdateGroupLevel=function(e){return l({groupLevel:e})},t.queryOptionsToggleByKeys=function(e){return l({showByKeys:!e,showBetweenKeys:!!e})},t.queryOptionsToggleBetweenKeys=function(e){return l({showBetweenKeys:!e,showByKeys:!!e})},t.queryOptionsUpdateBetweenKeys=function(e){return l({betweenKeys:e})},t.queryOptionsUpdateByKeys=function(e){return l({byKeys:e})},t.queryOptionsToggleDescending=function(e){return l({descending:!e})},t.queryOptionsUpdateSkip=function(e){return l({skip:e})},t.queryOptionsUpdateLimit=function(e){return l({limit:e})},t.queryOptionsToggleIncludeDocs=function(e){return l({includeDocs:!e})},t.queryOptionsFilterOnlyDdocs=function(){return l({betweenKeys:{include:!1,startkey:'"_design"',endkey:'"_design0"'},showBetweenKeys:!0,showByKeys:!1})},t.queryOptionsRemoveFilterOnlyDdocs=function(){return l({betweenKeys:{},showBetweenKeys:!1,showByKeys:!1})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.postToIndexBulkDelete=t.postToBulkDocs=t.queryMapReduceView=t.queryAllDocs=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(367),n(68);var i=n(169),r=a(i),l=n(30),s=a(l),u=n(2),c=a(u);t.queryAllDocs=function(e,t){o(t,{reduce:void 0,group:void 0,group_level:void 0});var n=r.default.stringify(t),a=e+(e.includes("?")?"&":"?")+n;return fetch(a,{credentials:"include",headers:{Accept:"application/json; charset=utf-8"}}).then(function(e){return e.json()}).then(function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:s.default.INDEX_RESULTS_DOC_TYPE.VIEW}})},t.queryMapReduceView=function(e,t){void 0===t.reduce&&(t.reduce=!1),t.include_docs&&t.reduce&&(t.reduce=!1,t.group=void 0,t.group_level=void 0);var n=r.default.stringify(t),a=e+(e.includes("?")?"&":"?")+n;return fetch(a,{credentials:"include",headers:{Accept:"application/json; charset=utf-8"}}).then(function(e){return e.json()}).then(function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:s.default.INDEX_RESULTS_DOC_TYPE.VIEW}})},t.postToBulkDocs=function(e,t){var n=c.default.urls("bulk_docs","server",e);return fetch(n,{method:"POST",credentials:"include",body:JSON.stringify(t),headers:{Accept:"application/json; charset=utf-8","Content-Type":"application/json"}}).then(function(e){return e.json()})},t.postToIndexBulkDelete=function(e,t){var n=c.default.urls("mango","index-server-bulk-delete",encodeURIComponent(e));return fetch(n,{method:"POST",credentials:"include",body:JSON.stringify(t),headers:{Accept:"application/json; charset=utf-8","Content-Type":"application/json"}}).then(function(e){return e.json()})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(26),i=n(1),r=a(i),l=n(169),s=a(l),u=n(29),c=n(75),d=n(2),f=a(d),p=function(e,t){var n=e.indexResults,a=t.docUrl,o=t.endpoint,i=t.endpointAddQueryOptions;if(a||(a=f.default.constants.DOC_URLS.GENERAL),o&&i){var r=s.default.stringify((0,c.getQueryOptionsParams)(n));r&&(o=-1==o.indexOf("?")?o+"?"+r:o+"&"+r)}return{docUrl:a,endpoint:o}},h=(0,o.connect)(p)(u.ApiBarWrapper);t.default=h,h.propTypes={databaseName:r.default.string,docUrl:r.default.string,endpoint:r.default.string,endpointAddQueryOptions:r.default.bool}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=a(o),r=n(26),l=n(443),s=a(l),u=n(54),c=n(243),d=n(73),f=n(75),p=function(e,t){var n=e.indexResults;return{docs:(0,f.getDocs)(n),selectedDocs:(0,f.getSelectedDocs)(n),isLoading:(0,f.getIsLoading)(n),hasResults:(0,f.getHasResults)(n),results:(0,f.getDataForRendering)(n,t.databaseName,t.deleteEnabled),isEditable:(0,f.getIsEditable)(n),selectedLayout:(0,f.getSelectedLayout)(n),allDocumentsSelected:(0,f.getAllDocsSelected)(n),hasSelectedItem:(0,f.getHasDocsSelected)(n),numDocsSelected:(0,f.getNumDocsSelected)(n),textEmptyIndex:(0,f.getTextEmptyIndex)(n),docType:(0,f.getDocType)(n),fetchParams:(0,f.getFetchParams)(n),queryOptionsParams:(0,f.getQueryOptionsParams)(n)}},h=function(e,t){return{fetchDocs:function(n,a){e((0,u.fetchDocs)(t.queryDocs,n,a))},selectDoc:function(t,n){e((0,d.selectDoc)(t,n))},bulkDeleteDocs:function(n,a,o){e((0,u.bulkDeleteDocs)(t.databaseName,t.queryDocs,n,t.designDocs,a,o,t.docType))},changeLayout:function(t){e((0,d.changeLayout)(t))},bulkCheckOrUncheck:function(n,a,o){e((0,d.bulkCheckOrUncheck)(n,a,o,t.docType))},changeTableHeaderAttribute:function(t,n){e((0,d.changeTableHeaderAttribute)(t,n))},resetState:function(){e((0,d.resetState)())},queryOptionsToggleIncludeDocs:function(t){e((0,c.queryOptionsToggleIncludeDocs)(t))}}},m=(0,r.connect)(p,h)(s.default);t.default=m,m.propTypes={queryDocs:i.default.func.isRequired,docType:i.default.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=a(o),r=n(26),l=n(434),s=a(l),u=n(242),c=n(75),d=function(e,t){var n=e.indexResults;return{docs:(0,c.getDocs)(n),selectedDocs:(0,c.getSelectedDocs)(n),hasResults:(0,c.getHasResults)(n),pageStart:(0,c.getPageStart)(n),pageEnd:(0,c.getPageEnd)(n),perPage:(0,c.getPerPage)(n),prioritizedEnabled:(0,c.getPrioritizedEnabled)(n),showPrioritizedEnabled:(0,c.getShowPrioritizedEnabled)(n),displayedFields:(0,c.getDisplayedFields)(n,t.databaseName),canShowNext:(0,c.getCanShowNext)(n),canShowPrevious:(0,c.getCanShowPrevious)(n),fetchParams:(0,c.getFetchParams)(n),queryOptionsParams:(0,c.getQueryOptionsParams)(n)}},f=function(e,t){return{toggleShowAllColumns:function(){e((0,u.toggleShowAllColumns)())},updatePerPageResults:function(n,a,o){e((0,u.updatePerPageResults)(t.queryDocs,a,o,n))},paginateNext:function(n,a,o){e((0,u.paginateNext)(t.queryDocs,n,a,o))},paginatePrevious:function(n,a,o){e((0,u.paginatePrevious)(t.queryDocs,n,a,o))}}},p=(0,r.connect)(d,f)(s.default);t.default=p,p.propTypes={queryDocs:i.default.func.isRequired}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),r=o(i),l=n(2),s=o(l),u=n(249),c=o(u),d=n(54),f=a(d),p=n(99),h=a(p);t.default={loadQueryHistory:function(e){return{type:c.default.MANGO_LOAD_QUERY_HISTORY,options:e}},newQueryFindCode:function(e){return{type:c.default.MANGO_NEW_QUERY_FIND_CODE,options:e}},showQueryExplain:function(e){return{type:c.default.MANGO_SHOW_EXPLAIN_RESULTS,options:e}},hideQueryExplain:function(){return{type:c.default.MANGO_HIDE_EXPLAIN_RESULTS}},newQueryCreateIndexTemplate:function(e){return{type:c.default.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE,options:e}},loadIndexTemplates:function(e){return{type:c.default.MANGO_LOAD_INDEX_TEMPLATES,options:e}},requestSaveIndex:function(){return{type:c.default.MANGO_SAVE_INDEX_REQUEST}},saveIndex:function(e){var t=this,n=e.databaseName,a=e.indexCode,o=e.fetchParams;return s.default.addNotification({msg:"Saving index for query...",type:"info",clear:!0}),function(e){return e(t.requestSaveIndex()),h.createIndex(n,a).then(function(){var t="#"+s.default.urls("mango","query-app",r.default.utils.safeURLName(n)),a=function(e){return h.fetchIndexes(n,e)};e(f.fetchDocs(a,o,{})),s.default.addNotification({msg:'Index is ready for querying. <a href="'+t+'">Run a Query.</a>',type:"success",clear:!0,escape:!1})}).catch(function(e){s.default.addNotification({msg:"Failed to create index. "+t.errorReason(e),type:"error",clear:!0})})}},errorReason:function(e){return"Reason: "+(e&&e.message||"n/a")},runExplainQuery:function(e){var t=this,n=e.databaseName,a=e.queryCode;return function(e){return h.fetchQueryExplain(n,a).then(function(n){e(t.showQueryExplain({explainPlan:n}))}).catch(function(){s.default.addNotification({msg:"There was an error fetching the query plan.",type:"error",clear:!0})})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MANGO_NEW_QUERY_FIND_CODE:"MANGO_NEW_QUERY_FIND_CODE",MANGO_LOAD_QUERY_HISTORY:"MANGO_LOAD_QUERY_HISTORY",MANGO_LOAD_INDEX_TEMPLATES:"MANGO_LOAD_INDEX_TEMPLATES",MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:"MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE",MANGO_SAVE_INDEX_REQUEST:"MANGO_SAVE_INDEX_REQUEST",MANGO_SHOW_EXPLAIN_RESULTS:"MANGO_SHOW_EXPLAIN_RESULTS",MANGO_HIDE_EXPLAIN_RESULTS:"MANGO_HIDE_EXPLAIN_RESULTS"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=h.default.urls("databaseBaseURL","server",e);D=(0,y.default)(n);var a=$.Deferred(),o=$.Deferred();$.when(a,o).done(function(t,n){var a=i(t.paths,t.winner,Object.keys(t.deleted)),o=a[0];if(!o)return r(t,n,a,null,e);D.get(n._id,{rev:o}).then(function(o){r(t,n,a,o,e)})}),D.get(t).then(o.resolve),(0,E.default)(D,t).then(a.resolve)}function i(e,t,n){return e.reduce(function(e,n){return n[0]!==t&&e.push(n[0]),e},[]).filter(function(e){return-1===n.indexOf(e)})}function r(e,t,n,a,o){h.default.dispatch({type:_.default.REV_BROWSER_REV_TREE_LOADED,options:{tree:e,doc:t,conflictDoc:a,conflictingRevs:n,databaseName:o}})}function l(e){h.default.dispatch({type:_.default.REV_BROWSER_DIFF_ENABLE_DIFF_VIEW,options:{enableDiff:e}})}function s(e,t){D.get(e._id,{rev:t}).then(function(t){u(e,t)})}function u(e,t){h.default.dispatch({type:_.default.REV_BROWSER_DIFF_DOCS_READY,options:{theirs:t,ours:e}})}function c(e,t){h.default.dispatch({type:_.default.REV_BROWSER_SHOW_CONFIRM_MODAL,options:{show:e,docToWin:t}})}function d(e,t,n,a){var o=i(n,a,[]),r=f(t,o);$.ajax({url:h.default.urls("bulk_docs","server",e,""),type:"POST",contentType:"application/json; charset=UTF-8",data:JSON.stringify(r),success:function(){h.default.addNotification({msg:"Conflicts successfully solved.",clear:!0}),c(!1,null),h.default.navigate(h.default.urls("allDocs","app",e,""))},error:function(){h.default.addNotification({msg:"Failed to delete clean up conflicts!",type:"error",clear:!0})}})}function f(e,t){return{docs:t.map(function(t){return{_id:e,_rev:t,_deleted:!0}})}}Object.defineProperty(t,"__esModule",{value:!0});var p=n(2),h=a(p),m=n(251),_=a(m),g=n(850),E=a(g),b=n(651),y=a(b),v=n(647),N=a(v);y.default.plugin(N.default);var D=void 0;t.default={getConflictingRevs:i,selectRevAsWinner:d,buildBulkDeletePayload:f,chooseLeaves:s,dispatchDocsToDiff:u,initDiffEditor:o,dispatchData:r,toggleDiffView:l,showConfirmModal:c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={REV_BROWSER_REV_TREE_LOADED:"REV_TREE_LOADED",REV_BROWSER_DIFF_DOCS_READY:"REV_BROWSER_DIFF_DOCS_READY",REV_BROWSER_DIFF_ENABLE_DIFF_VIEW:"REV_BROWSER_DIFF_ENABLE_DIFF_VIEW",REV_BROWSER_SHOW_CONFIRM_MODAL:"REV_BROWSER_SHOW_CONFIRM_MODAL"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(11)),h=a(p),m=n(2),g=a(m),E=n(132),b=a(E),y=n(46),v=a(y),N=n(15),D=a(N),O=n(215),S=a(O),T=n(70),C=a(T),w=n(97),I=a(w),A=n(238),R=a(A),P=n(55),L=a(P),k=n(37),M=a(k),x=n(19);n(103);var j=b.default.sidebarStore,U=D.default.DeleteDatabaseModal,V=D.default.LoadLines,B=D.default.MenuDropDown,F=R.default.DesignDocSelector,q=L.default.ConfirmationModal,H=S.default.deleteDbModalStore,G=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getNewButtonLinks=function(){return M.default.getNewButtonLinks(a.props.databaseName)},a.buildDocLinks=function(){var e=g.default.urls("base","app",a.props.databaseName);return g.default.getExtensions("docLinks").map(function(t){return d.default.createElement("li",{key:t.url,className:this.getNavItemClass(t.url)},d.default.createElement("a",{id:t.url,href:e+t.url},t.title))},a)},a.getNavItemClass=function(e){return e===a.props.selectedNavItem?"active":""},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e=this.buildDocLinks(),t=g.default.url.encode(this.props.databaseName),n="#"+g.default.urls("changes","app",t,""),a="#"+g.default.urls("permissions","app",t),o=g.default.urls("allDocs","app",t,""),i=g.default.urls("mango","query-app",t),r=h.default.i18n.en_US["run-query-with-mango"],l=this.getNewButtonLinks();return d.default.createElement("ul",{className:"nav nav-list"},d.default.createElement("li",{className:this.getNavItemClass("all-docs")},d.default.createElement("a",{id:"all-docs",href:"#/"+o,className:"toggle-view"},"All Documents"),d.default.createElement("div",{id:"new-all-docs-button",className:"add-dropdown"},d.default.createElement(B,{links:l}))),d.default.createElement("li",{className:this.getNavItemClass("mango-query")},d.default.createElement("a",{id:"mango-query",href:"#"+i,className:"toggle-view"},r)),d.default.createElement("li",{className:this.getNavItemClass("permissions")},d.default.createElement("a",{id:"permissions",href:a},"Permissions")),d.default.createElement("li",{className:this.getNavItemClass("changes")},d.default.createElement("a",{id:"changes",href:n},"Changes")),e,d.default.createElement("li",{className:this.getNavItemClass("design-docs")},d.default.createElement("a",{id:"design-docs",href:"#/"+o+'?startkey="_design"&endkey="_design0"',className:"toggle-view"},"Design Documents"),d.default.createElement("div",{id:"new-design-docs-button",className:"add-dropdown"},d.default.createElement(B,{links:l}))))}}]),t}(d.default.Component);G.propTypes={selectedNavItem:u.default.string.isRequired};var W=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={placement:"bottom"},a.setPlacement=function(e){var t=document.getElementById(e).getBoundingClientRect().top,n=150,o=t+n>window.innerHeight?"top":"bottom";a.setState({placement:o})},a.createItems=function(){var e=a.props.items.sort();return _.map(e,function(e,t){var n=g.default.urls(this.props.urlNamespace,"app",encodeURIComponent(this.props.database.id),encodeURIComponent(this.props.designDocName)),a=this.props.selectedIndex===e?"active":"";return d.default.createElement("li",{className:a,key:t},d.default.createElement("a",{id:this.props.designDocName+"_"+e,href:"#/"+n+encodeURIComponent(e),className:"toggle-view"},e),d.default.createElement(x.OverlayTrigger,{ref:"indexMenu-"+t,trigger:"click",onEnter:this.setPlacement.bind(this,this.props.designDocName+"_"+e),placement:this.state.placement,rootClose:!0,overlay:d.default.createElement(x.Popover,{id:"index-menu-component-popover"},d.default.createElement("ul",null,d.default.createElement("li",{onClick:this.indexAction.bind(this,"edit",{indexName:e,onEdit:this.props.onEdit})},d.default.createElement("span",{className:"fonticon fonticon-file-code-o"}),"Edit"),d.default.createElement("li",{onClick:this.indexAction.bind(this,"clone",{indexName:e,onClone:this.props.onClone})},d.default.createElement("span",{className:"fonticon fonticon-files-o"}),"Clone"),d.default.createElement("li",{onClick:this.indexAction.bind(this,"delete",{indexName:e,onDelete:this.props.onDelete})},d.default.createElement("span",{className:"fonticon fonticon-trash"}),"Delete")))},d.default.createElement("span",{className:"index-menu-toggle fonticon fonticon-wrench2"})))},a)},a.indexAction=function(e,t,n){switch(n.preventDefault(),$("body").trigger("click"),e){case"delete":v.default.showDeleteIndexModal(t.indexName,a.props.designDocName,a.props.indexLabel,t.onDelete);break;case"clone":v.default.showCloneIndexModal(t.indexName,a.props.designDocName,a.props.indexLabel,t.onClone);break;case"edit":t.onEdit(a.props.database.id,a.props.designDocName,t.indexName)}},a.toggle=function(e){e.preventDefault(),a.props.toggle(a.props.designDocName,a.props.title)},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){if(0===this.props.items.length)return null;var e="accordion-header index-group-header",t="index-list accordion-body collapse";this.props.isExpanded&&(e+=" down",t+=" in");var n=this.props.title,a=this.props.designDocName,o="nav-design-function-"+a+this.props.selector;return d.default.createElement("li",{id:o},d.default.createElement("a",{className:e,"data-toggle":"collapse",onClick:this.toggle},d.default.createElement("div",{className:"fonticon-play"}),n),d.default.createElement(x.Collapse,{in:this.props.isExpanded},d.default.createElement("ul",{className:t},this.createItems())))}}]),t}(d.default.Component);W.propTypes={urlNamespace:u.default.string.isRequired,indexLabel:u.default.string.isRequired,database:u.default.object.isRequired,designDocName:u.default.string.isRequired,items:u.default.array.isRequired,isExpanded:u.default.bool.isRequired,selectedIndex:u.default.string.isRequired,onDelete:u.default.func.isRequired,onClone:u.default.func.isRequired};var K=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={updatedSidebarListTypes:a.props.sidebarListTypes},a.indexList=function(){return _.map(a.state.updatedSidebarListTypes,function(e,t){var n=_.has(this.props.toggledSections,e.name)&&this.props.toggledSections[e.name],a="";return this.props.selectedNavInfo.designDocSection===e.name&&(a=this.props.selectedNavInfo.indexName),d.default.createElement(W,{icon:e.icon,isExpanded:n,urlNamespace:e.urlNamespace,indexLabel:e.indexLabel,onEdit:e.onEdit,onDelete:e.onDelete,onClone:e.onClone,selectedIndex:a,toggle:this.props.toggle,database:this.props.database,designDocName:this.props.designDocName,key:t,title:e.name,selector:e.selector,items:_.keys(this.props.designDoc[e.selector])})}.bind(a))},a.toggle=function(e){e.preventDefault(),a.props.toggle(a.props.designDocName)},a.getNewButtonLinks=function(){var e=g.default.urls("databaseBaseURL","app",encodeURIComponent(a.props.database.id)),t=a.props.designDocName;return[{title:"Add New",links:_.reduce(g.default.getExtensions("sidebar:links"),function(n,a){return n.push({title:a.title,url:"#"+e+"/"+a.url+"/"+encodeURIComponent(t),icon:"fonticon-plus-circled"}),n},[{title:"New View",url:"#"+g.default.urls("new","addView",encodeURIComponent(a.props.database.id),encodeURIComponent(t)),icon:"fonticon-plus-circled"}])}]},r=n,i(a,r)}return r(t,e),l(t,[{key:"componentWillMount",value:function(){if(_.isEmpty(this.state.updatedSidebarListTypes)||_.has(this.state.updatedSidebarListTypes[0],"selector")&&"views"!==this.state.updatedSidebarListTypes[0].selector){var e=this.state.updatedSidebarListTypes;e.unshift({selector:"views",name:"Views",urlNamespace:"view",indexLabel:"view",onDelete:I.default.deleteView,onClone:I.default.cloneView,onEdit:I.default.gotoEditViewPage}),this.setState({updatedSidebarListTypes:e})}}},{key:"render",value:function(){var e=this.getNewButtonLinks(),t="design-doc-section accordion-header",n="design-doc-body accordion-body collapse";this.props.isExpanded&&(t+=" down",n+=" in");var a=this.props.designDocName,o=g.default.urls("designDocs","app",this.props.database.id,a),i="metadata"===this.props.selectedNavInfo.designDocSection?"active":"";return d.default.createElement("li",{className:"nav-header"},d.default.createElement("div",{id:"sidebar-tab-"+a,className:t},d.default.createElement("div",{id:"nav-header-"+a,onClick:this.toggle,className:"accordion-list-item"},d.default.createElement("div",{className:"fonticon-play"}),d.default.createElement("p",{className:"design-doc-name"},d.default.createElement("span",{title:"_design/"+a},a))),d.default.createElement("div",{className:"new-button add-dropdown"},d.default.createElement(B,{links:e}))),d.default.createElement(x.Collapse,{in:this.props.isExpanded},d.default.createElement("ul",{className:n,id:this.props.designDocName},d.default.createElement("li",{className:i},d.default.createElement("a",{href:"#/"+o,className:"toggle-view accordion-header"},"Metadata")),this.indexList())))}}]),t}(d.default.Component);K.propTypes={database:u.default.object.isRequired,sidebarListTypes:u.default.array.isRequired,isExpanded:u.default.bool.isRequired,selectedNavInfo:u.default.object.isRequired,toggledSections:u.default.object.isRequired,designDocName:u.default.string.isRequired};var X=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.designDocList=function(){return _.map(a.props.designDocs,function(e,t){var n=decodeURIComponent(e.safeId),a=!1,o={};_.has(this.props.toggledSections,n)&&(a=this.props.toggledSections[n].visible,o=this.props.toggledSections[n].indexGroups);var i={};return"designDoc"===this.props.selectedNav.navItem&&this.props.selectedNav.designDocName===n&&(i=this.props.selectedNav),d.default.createElement(K,{toggle:this.props.toggle,sidebarListTypes:this.sidebarListTypes,isExpanded:a,toggledSections:o,selectedNavInfo:i,key:t,designDoc:e,designDocName:n,database:this.props.database})}.bind(a))},r=n,i(a,r)}return r(t,e),l(t,[{key:"componentWillMount",value:function(){var e=g.default.getExtensions("sidebar:list");this.sidebarListTypes=_.isUndefined(e)?[]:e}},{key:"render",value:function(){return d.default.createElement("ul",{className:"nav nav-list"},this.designDocList())}}]),t}(d.default.Component),z=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{database:j.getDatabase(),selectedNav:j.getSelected(),designDocs:j.getDesignDocs(),designDocList:j.getDesignDocList(),availableDesignDocIds:j.getAvailableDesignDocs(),toggledSections:j.getToggledSections(),isLoading:j.isLoading(),deleteDbModalProperties:H.getShowDeleteDatabaseModal(),deleteIndexModalVisible:j.isDeleteIndexModalVisible(),deleteIndexModalText:j.getDeleteIndexModalText(),deleteIndexModalOnSubmit:j.getDeleteIndexModalOnSubmit(),deleteIndexModalIndexName:j.getDeleteIndexModalIndexName(),deleteIndexModalDesignDoc:j.getDeleteIndexDesignDoc(),cloneIndexModalVisible:j.isCloneIndexModalVisible(),cloneIndexModalTitle:j.getCloneIndexModalTitle(),cloneIndexModalSelectedDesignDoc:j.getCloneIndexModalSelectedDesignDoc(),cloneIndexModalNewDesignDocName:j.getCloneIndexModalNewDesignDocName(),cloneIndexModalOnSubmit:j.getCloneIndexModalOnSubmit(),cloneIndexDesignDocProp:j.getCloneIndexDesignDocProp(),cloneIndexModalNewIndexName:j.getCloneIndexModalNewIndexName(),cloneIndexSourceIndexName:j.getCloneIndexModalSourceIndexName(),cloneIndexSourceDesignDocName:j.getCloneIndexModalSourceDesignDocName(),cloneIndexModalIndexLabel:j.getCloneIndexModalIndexLabel()}},a.onChange=function(){var e=a.getStoreState();a.props.reduxUpdatedDesignDocList&&a.props.reduxUpdatedDesignDocList(e.designDocList),a.setState(e)},a.showDeleteDatabaseModal=function(e){C.default.showDeleteDatabaseModal(e)},a.deleteIndex=function(){var e="designDoc"===a.state.selectedNav.navItem&&"_design/"+a.state.selectedNav.designDocName===a.state.deleteIndexModalDesignDoc.id&&a.state.selectedNav.indexName===a.state.deleteIndexModalIndexName;a.state.deleteIndexModalOnSubmit({isOnIndex:e,indexName:a.state.deleteIndexModalIndexName,designDoc:a.state.deleteIndexModalDesignDoc,designDocs:a.state.designDocs,database:a.state.database})},a.cloneIndex=function(){a.state.cloneIndexModalOnSubmit({sourceIndexName:a.state.cloneIndexSourceIndexName,sourceDesignDocName:a.state.cloneIndexSourceDesignDocName,targetDesignDocName:a.state.cloneIndexModalSelectedDesignDoc,newDesignDocName:a.state.cloneIndexModalNewDesignDocName,newIndexName:a.state.cloneIndexModalNewIndexName,designDocs:a.state.designDocs,database:a.state.database,onComplete:v.default.hideCloneIndexModal})},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){j.on("change",this.onChange,this),H.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){j.off("change",this.onChange),H.off("change",this.onChange,this)}},{key:"render",value:function(){return this.state.isLoading?d.default.createElement(V,null):d.default.createElement("nav",{className:"sidenav"},d.default.createElement(G,{selectedNavItem:this.state.selectedNav.navItem,databaseName:this.state.database.id}),d.default.createElement(X,{selectedNav:this.state.selectedNav,toggle:v.default.toggleContent,toggledSections:this.state.toggledSections,designDocs:this.state.designDocList,database:this.state.database}),d.default.createElement(U,{showHide:this.showDeleteDatabaseModal,modalProps:this.state.deleteDbModalProperties}),d.default.createElement(q,{title:"Confirm Deletion",visible:this.state.deleteIndexModalVisible,text:this.state.deleteIndexModalText,onClose:v.default.hideDeleteIndexModal,onSubmit:this.deleteIndex}),d.default.createElement(Y,{visible:this.state.cloneIndexModalVisible,title:this.state.cloneIndexModalTitle,close:v.default.hideCloneIndexModal,submit:this.cloneIndex,designDocArray:this.state.availableDesignDocIds,selectedDesignDoc:this.state.cloneIndexModalSelectedDesignDoc,newDesignDocName:this.state.cloneIndexModalNewDesignDocName,newIndexName:this.state.cloneIndexModalNewIndexName,indexLabel:this.state.cloneIndexModalIndexLabel}))}}]),t}(d.default.Component),Y=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.submit=function(){if(a.refs.designDocSelector.validate())return""===a.props.newIndexName?void g.default.addNotification({msg:"Please enter the new index name.",type:"error",clear:!0}):void a.props.submit()},a.close=function(e){e&&e.preventDefault(),a.props.close()},a.setNewIndexName=function(e){v.default.setNewCloneIndexName(e.target.value)},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){return d.default.createElement(x.Modal,{dialogClassName:"clone-index-modal",show:this.props.visible,onHide:this.close},d.default.createElement(x.Modal.Header,{closeButton:!0},d.default.createElement(x.Modal.Title,null,this.props.title)),d.default.createElement(x.Modal.Body,null,d.default.createElement("form",{className:"form",method:"post",onSubmit:this.submit},d.default.createElement("p",null,"Select the design document where the cloned ",this.props.indexLabel," will be created, and then enter a name for the cloned ",this.props.indexLabel,"."),d.default.createElement("div",{className:"row"},d.default.createElement(F,{ref:"designDocSelector",designDocList:this.props.designDocArray,selectedDesignDocName:this.props.selectedDesignDoc,newDesignDocName:this.props.newDesignDocName,onSelectDesignDoc:v.default.selectDesignDoc,onChangeNewDesignDocName:v.default.updateNewDesignDocName})),d.default.createElement("div",{className:"clone-index-name-row"},d.default.createElement("label",{className:"new-index-title-label",htmlFor:"new-index-name"},this.props.indexLabel," Name"),d.default.createElement("input",{type:"text",id:"new-index-name",value:this.props.newIndexName,onChange:this.setNewIndexName,placeholder:"New view name"})))),d.default.createElement(x.Modal.Footer,null,d.default.createElement("a",{href:"#",className:"cancel-link",onClick:this.close,"data-bypass":"true"},"Cancel"),d.default.createElement("button",{onClick:this.submit,"data-bypass":"true",className:"btn btn-primary save"},d.default.createElement("i",{className:"icon fonticon-ok-circled"})," Clone ",this.props.indexLabel)))}}]),t}(d.default.Component);Y.propTypes={visible:u.default.bool.isRequired,title:u.default.string,close:u.default.func.isRequired,submit:u.default.func.isRequired,designDocArray:u.default.array.isRequired,selectedDesignDoc:u.default.string.isRequired,newDesignDocName:u.default.string.isRequired,newIndexName:u.default.string.isRequired,indexLabel:u.default.string.isRequired},Y.defaultProps={title:"Clone Index",visible:!1},t.default={SidebarController:z,DesignDoc:K,CloneIndexModal:Y}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ADD_NAVBAR_LINK:"ADD_NAVBAR_LINK",TOGGLE_NAVBAR_MENU:"TOGGLE_NAVBAR_MENU",UPDATE_NAVBAR_LINK:"UPDATE_NAVBAR_LINK",CLEAR_NAVBAR_LINK:"CLEAR_NAVBAR_LINK",REMOVE_NAVBAR_LINK:"REMOVE_NAVBAR_LINK",NAVBAR_SET_VERSION_INFO:"NAVBAR_SET_VERSION_INFO",NAVBAR_ACTIVE_LINK:"NAVBAR_ACTIVE_LINK",NAVBAR_HIDE:"NAVBAR_HIDE",NAVBAR_SHOW:"NAVBAR_SHOW",NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION:"NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION",NAVBAR_SHOW_LOGIN_BUTTON:"NAVBAR_SHOW_LOGIN_BUTTON",NAVBAR_SHOW_LOGOUT_BUTTON:"NAVBAR_SHOW_LOGOUT_BUTTON"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(253),l=a(r),s=n(18),u={};u.NavBarStore=i.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._isMinimized=!0,this._activeLink=null,this._version=null,this._navLinks=[],this._footerNavLinks=[],this._bottomNavLinks=[],this._navBarVisible=!0,this._loginSectionVisible=!1,this._loginVisibleInsteadOfLogout=!0},getIsLoginSectionVisible:function(){return this._loginSectionVisible},getIsLoginVisibleInsteadOfLogout:function(){return this._loginVisibleInsteadOfLogout},isNavBarVisible:function(){return this._navBarVisible},showNavBar:function(){this._navBarVisible=!0},hideNavBar:function(){this._navBarVisible=!1},addLink:function(e){return e.top&&!e.bottomNav?void this._navLinks.unshift(e):e.top&&e.bottomNav?void this._bottomNavLinks.unshift(e):e.bottomNav?void this._bottomNavLinks.push(e):e.footerNav?void this._footerNavLinks.push(e):void this._navLinks.push(e)},removeLink:function(e){var t=this.getLinkSection(e),n=(0,s.findIndex)(t,function(t){return t.id===e.id});-1!==n&&t.splice(n,1)},getNavLinks:function(){return this._navLinks},getBottomNavLinks:function(){return this._bottomNavLinks},getFooterNavLinks:function(){return this._footerNavLinks},toggleMenu:function(){this._isMinimized=!this._isMinimized},getLinkSection:function(e){var t=this._navLinks;return e.bottomNav&&(t=this._bottomNavLinks),e.footerNav&&(t=this._footerNavLinks),t},updateLink:function(e){var t=void 0,n=this.getLinkSection(e);(t=_.find(n,function(t){return t.id===e.id}))&&(t.title=e.title,t.href=e.href)},getVersion:function(){return this._version},setVersion:function(e){this._version=e},getActiveLink:function(){return this._activeLink},setActiveLink:function(e){this._activeLink=e},isMinimized:function(){return this._isMinimized},dispatch:function(e){switch(e.type){case l.default.ADD_NAVBAR_LINK:this.addLink(e.link);break;case l.default.TOGGLE_NAVBAR_MENU:this.toggleMenu();break;case l.default.UPDATE_NAVBAR_LINK:this.updateLink(e.link);break;case l.default.CLEAR_NAVBAR_LINK:this.reset();break;case l.default.REMOVE_NAVBAR_LINK:this.removeLink(e.link);break;case l.default.NAVBAR_SET_VERSION_INFO:this.setVersion(e.version);break;case l.default.NAVBAR_ACTIVE_LINK:this.setActiveLink(e.name);break;case l.default.NAVBAR_HIDE:this.hideNavBar();break;case l.default.NAVBAR_SHOW:this.showNavBar();break;case l.default.NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION:this._loginSectionVisible=e.visible;break;case l.default.NAVBAR_SHOW_LOGIN_BUTTON:this._loginSectionVisible=!0,this._loginVisibleInsteadOfLogout=!0;break;case l.default.NAVBAR_SHOW_LOGOUT_BUTTON:this._loginSectionVisible=!0,this._loginVisibleInsteadOfLogout=!1;break;default:return}this.triggerChange()}}),u.navBarStore=new u.NavBarStore,u.navBarStore.dispatchToken=i.default.dispatcher.register(u.navBarStore.dispatch),t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ADD_NOTIFICATION:"ADD_NOTIFICATION",SHOW_NOTIFICATION_CENTER:"SHOW_NOTIFICATION_CENTER",HIDE_NOTIFICATION_CENTER:"HIDE_NOTIFICATION_CENTER",CLEAR_SINGLE_NOTIFICATION:"CLEAR_SINGLE_NOTIFICATION",CLEAR_ALL_NOTIFICATIONS:"CLEAR_ALL_NOTIFICATIONS",SELECT_NOTIFICATION_FILTER:"SELECT_NOTIFICATION_FILTER",START_HIDING_NOTIFICATION:"START_HIDING_NOTIFICATION",HIDE_NOTIFICATION:"HIDE_NOTIFICATION",HIDE_ALL_NOTIFICATIONS:"HIDE_ALL_NOTIFICATIONS",SHOW_PERMANENT_NOTIFICATION:"SHOW_PERMANENT_NOTIFICATION",HIDE_PERMANENT_NOTIFICATION:"HIDE_PERMANENT_NOTIFICATION"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updatePermissionUnsafe=t.deletePermission=t.updatePermission=t.deletePermissionFromObject=t.setPermissionOnObject=t.fetchPermissions=t.receivedPermissions=void 0;var o=n(2),i=a(o);n(68);var r=n(258),l=n(257),s=t.receivedPermissions=function(e){return{type:l.PERMISSIONS_UPDATE,permissions:e}},u=(t.fetchPermissions=function(e){return function(t){return fetch(e,{headers:{Accept:"application/json"},credentials:"include"}).then(function(e){return e.json()}).then(function(e){if(e.error&&e.reason)throw t(s({admins:{roles:["_admin"]},members:{roles:["_admin"]}})),new Error(e.reason);t(s(e))}).catch(function(e){i.default.addNotification({msg:"Failed to retrieve permissions. Please try again. Reason:"+e.message,type:"error"})})}},t.setPermissionOnObject=function(e,t,n,a){if((0,r.isValueAlreadySet)(e,t,n,a))throw new Error("Role/Name has already been added");return(0,r.addValueToPermissions)(e,t,n,a)}),c=t.deletePermissionFromObject=function(e,t,n,a){if(!(0,r.isValueAlreadySet)(e,t,n,a))throw new Error("Role/Name does not exist");return e[t][n]=e[t][n].filter(function(e){return e!==a}),e},d=(t.updatePermission=function(e,t,n,a,o){return function(r){u(t,n,a,o),d(e,t,r).catch(function(e){i.default.addNotification({msg:e.message,type:"error"})})}},t.deletePermission=function(e,t,n,a,o){return function(r){c(t,n,a,o),d(e,t,r).catch(function(e){i.default.addNotification({msg:e.message,type:"error"})})}},t.updatePermissionUnsafe=function(e,t,n){return fetch(e,{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){if(!e.ok)throw new Error(e.reason);return e}).then(function(){return i.default.addNotification({msg:"Database permissions has been updated."}),n(s(t))}).catch(function(e){i.default.addNotification({msg:"Could not update permissions - reason: "+e,type:"error"})})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PERMISSIONS_UPDATE="PERMISSIONS_UPDATE"},function(e,t,n){"use strict";function a(e,t,n,a){return!!e[t]&&!!e[t][n]&&-1!==e[t][n].indexOf(a)}function o(e,t,n,a){return e[t]||(e[t]={}),e[t][n]||(e[t][n]=[]),e[t][n].push(a),e}Object.defineProperty(t,"__esModule",{value:!0}),t.isValueAlreadySet=a,t.addValueToPermissions=o},function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case l.PERMISSIONS_UPDATE:var n=t.permissions;return r({},e,{isLoading:!1,security:n,adminRoles:o("admins",n),adminNames:i("admins",n),memberRoles:o("members",n),memberNames:i("members",n)});default:return e}}function o(e,t){return t[e]&&t[e].roles?t[e].roles:[]}function i(e,t){return t[e]&&t[e].names?t[e].names:[]}Object.defineProperty(t,"__esModule",{value:!0}),t.getMemberRoles=t.getMemberNames=t.getAdminNames=t.getAdminRoles=t.getSecurity=t.getIsLoading=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=a;var l=n(257),s={isLoading:!0,security:{},adminRoles:[],adminNames:[],memberNames:[],memberRoles:[]};t.getIsLoading=function(e){return e.isLoading},t.getSecurity=function(e){return e.security},t.getAdminRoles=function(e){return e.adminRoles},t.getAdminNames=function(e){return e.adminNames},t.getMemberNames=function(e){return e.memberNames},t.getMemberRoles=function(e){return e.memberRoles}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={INIT_REPLICATION:"INIT_REPLICATION",CHANGE_REPLICATION_SOURCE:"CHANGE_REPLICATION_SOURCE",REPLICATION_DATABASES_LOADED:"REPLICATION_DATABASES_LOADED",REPLICATION_UPDATE_FORM_FIELD:"REPLICATION_UPDATE_FORM_FIELD",REPLICATION_CLEAR_FORM:"REPLICATION_CLEAR_FORM",REPLICATION_STARTING:"REPLICATION_STARTING",REPLICATION_STATUS:"REPLICATION_STATUS",REPLICATION_FETCHING_STATUS:"REPLICATION_FETCHING_STATUS",REPLICATION_FILTER_DOCS:"REPLICATION_FILTER_DOCS",REPLICATION_TOGGLE_ALL_DOCS:"REPLICATION_TOGGLE_ALL_DOCS",REPLICATION_TOGGLE_DOC:"REPLICATION_TOGGLE_DOC",REPLICATION_DELETE_DOCS:"REPLICATION_DELETE_DOCS",REPLICATION_SET_STATE_FROM_DOC:"REPLICATION_SET_STATE_FROM_DOC",REPLICATION_SHOW_CONFLICT_MODAL:"REPLICATION_SHOW_CONFLICT_MODAL",REPLICATION_HIDE_CONFLICT_MODAL:"REPLICATION_HIDE_CONFLICT_MODAL",REPLICATION_CHANGE_ACTIVITY_SORT:"REPLICATION_CHANGE_ACTIVITY_SORT",REPLICATION_CLEAR_SELECTED_DOCS:"REPLICATION_CLEAR_SELECTED_DOCS",REPLICATION_CHANGE_TAB_SECTION:"REPLICATION_CHANGE_TAB_SECTION",REPLICATION_FETCHING_REPLICATE_STATUS:"REPLICATION_FETCHING_REPLICATE_STATUS",REPLICATION_REPLICATE_STATUS:"REPLICATION_REPLICATE_STATUS",REPLICATION_SUPPORT_NEW_API:"REPLICATION_SUPPORT_NEW_API",REPLICATION_FILTER_REPLICATE:"REPLICATION_FILTER_REPLICATE",REPLICATION_TOGGLE_ALL_REPLICATE:"REPLICATION_TOGGLE_ALL_REPLICATE",REPLICATION_TOGGLE_REPLICATE:"REPLICATION_TOGGLE_REPLICATE",REPLICATION_CLEAR_SELECTED_REPLICATES:"REPLICATION_CLEAR_SELECTED_REPLICATES",REPLICATION_FETCHING_FORM_STATE:"REPLICATION_FETCHING_FORM_STATE"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ReplicationHeader=t.ReplicationFilter=void 0;var o=n(1),i=a(o),r=n(0),l=a(r),s=t.ReplicationFilter=function(e){var t=e.value,n=e.onChange;return l.default.createElement("div",{className:"replication__filter"},l.default.createElement("i",{className:"replication__filter-icon fonticon-filter"}),l.default.createElement("input",{type:"text",placeholder:"Filter replications",className:"replication__filter-input",value:t,onChange:function(e){n(e.target.value)}}))};s.propTypes={value:i.default.string.isRequired,onChange:i.default.func.isRequired},(t.ReplicationHeader=function(e){var t=e.filter,n=e.onFilterChange;return l.default.createElement("div",{className:"replication__activity_header"},l.default.createElement("div",null),l.default.createElement(s,{value:t,onChange:n}),l.default.createElement("a",{href:"#/replication/_create",className:"btn save replication__activity_header-btn btn-primary"},l.default.createElement("i",{className:"icon fonticon-plus-circled"}),"New Replication"))}).propTypes={filter:i.default.string.isRequired,onFilterChange:i.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ReplicationTable=t.formatUrl=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(19),p=n(168),h=a(p),m=n(102),_=n(135),g=t.formatUrl=function(e){var t=new URL((0,_.removeCredentialsFromUrl)(e)),n=encodeURIComponent(t.pathname.slice(1));return e.indexOf(window.location.hostname)>-1?d.default.createElement("span",null,t.origin+"/",d.default.createElement("a",{href:"#/database/"+n+"/_all_docs"},t.pathname.slice(1))):""+t.origin+t.pathname},E=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={modalVisible:!1},n}return r(t,e),l(t,[{key:"showModal",value:function(){this.setState({modalVisible:!0})}},{key:"closeModal",value:function(){this.setState({modalVisible:!1})}},{key:"getErrorIcon",value:function(){var e=this.props.status;return"error"!==e&&"retrying"!==e?null:d.default.createElement("span",null,d.default.createElement("a",{"data-bypass":"true",className:"replication__row-btn replication__row-btn--warning icon-exclamation-sign",onClick:this.showModal.bind(this),title:"View error message"}),d.default.createElement(m.ErrorModal,{onClick:this.closeModal.bind(this),onClose:this.closeModal.bind(this),errorMsg:this.props.errorMsg,visible:this.state.modalVisible,status:e}))}},{key:"render",value:function(){var e=this.props,t=e.statusTime,n=e.status,a=(0,h.default)(t),o=d.default.createElement("span",null,n);if(a.isValid()){var i=a.format("MMM Do, h:mm a"),r=d.default.createElement(f.Tooltip,{id:""},"Last updated: ",i);o=d.default.createElement(f.OverlayTrigger,{placement:"top",overlay:r},d.default.createElement("span",null,n))}return d.default.createElement("td",{className:"replication__row-status replication__row-status--"+n},o,this.getErrorIcon())}}]),t}(d.default.Component);E.propTypes={statusTime:u.default.any,status:u.default.string,errorMsg:u.default.string.isRequired},E.defaultProps={status:""};var b=function(e){var t=e.onlyDeleteAction,n=e._id,a=e.url,o=e.deleteDocs,i=[];return t||(i.push(d.default.createElement("li",{className:"replication__row-list",key:1},d.default.createElement("a",{href:"#replication/id/"+encodeURIComponent(n),className:"replication__row-btn icon-wrench replication__row-btn--no-left-pad",title:"Edit replication","data-bypass":"true"}))),i.push(d.default.createElement("li",{className:"replication__row-list",key:2},d.default.createElement("a",{className:"replication__row-btn fonticon-document",title:"Edit replication document",href:a,"data-bypass":"true"})))),i.push(d.default.createElement("li",{className:"replication__row-list",key:3},d.default.createElement("a",{className:"replication__row-btn icon-trash "+(t?"replication__row-btn--no-left-pad":"")+" ",title:"Delete "+(t?"job":"document")+" "+n,onClick:function(){return o(n)}}))),d.default.createElement("ul",{className:"replication__row-actions-list"},i)};b.propTypes={_id:u.default.string.isRequired,url:u.default.string,error:u.default.bool.isRequired,errorMsg:u.default.string.isRequired,deleteDocs:u.default.func.isRequired};var y=function(e){var t=e._id,n=e.source,a=e.target,o=e.type,i=e.startTime,r=e.status,l=e.statusTime,s=e.url,u=e.selected,c=e.selectDoc,f=e.errorMsg,p=e.deleteDocs,m=e.onlyDeleteAction,_=e.showStateRow,y=(0,h.default)(i),v=y.isValid()?y.format("MMM Do, h:mm a"):"",N=null;return _&&(N=d.default.createElement(E,{statusTime:l,status:r,errorMsg:f})),d.default.createElement("tr",{className:"replication__table-row"},d.default.createElement("td",{className:"replication__table-col"},d.default.createElement("input",{checked:u,type:"checkbox",onChange:function(){return c(t)}})," "),d.default.createElement("td",{className:"replication__table-col"},g(n)),d.default.createElement("td",{className:"replication__table-col"},g(a)),d.default.createElement("td",{className:"replication__table-col"},v),d.default.createElement("td",{className:"replication__table-col"},o),N,d.default.createElement("td",{className:"replication__table-col"},d.default.createElement(b,{onlyDeleteAction:m,deleteDocs:p,_id:t,url:s,error:"error"===r||"retrying"===r,errorMsg:f})))};y.propTypes={_id:u.default.string.isRequired,source:u.default.string.isRequired,target:u.default.string.isRequired,type:u.default.string.isRequired,status:u.default.string,url:u.default.string,statusTime:u.default.object.isRequired,startTime:u.default.object,selected:u.default.bool.isRequired,selectDoc:u.default.func.isRequired,errorMsg:u.default.string.isRequired,deleteDocs:u.default.func.isRequired,onlyDeleteAction:u.default.bool.isRequired,showStateRow:u.default.bool.isRequired};var v=function(e){var t=e.isSelected,n=e.deleteDocs,a=e.someDocsSelected,o=e.onCheck,i=a?d.default.createElement("button",{onClick:function(){return n()},className:"bulk-select-trash fonticon fonticon-trash",title:"Delete all selected"}):null;return d.default.createElement("div",{className:"replication__bulk-select-wrapper"},d.default.createElement("div",{className:"replication__bulk-select-header"},d.default.createElement("input",{className:"replication__bulk-select-input",checked:t,type:"checkbox",onChange:o})),i)};v.propTypes={isSelected:u.default.bool.isRequired,someDocsSelected:u.default.bool.isRequired,onCheck:u.default.func.isRequired,deleteDocs:u.default.func.isRequired};var N=function(e){var t=e.msg;return d.default.createElement("tr",null,d.default.createElement("td",{colSpan:"7",className:"replication__empty-row"},t))};N.defaultProps={msg:"There is no replicator-db activity or history to display."},(t.ReplicationTable=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"sort",value:function(e,t,n){var a=n.sort(function(t,n){return t[e]<n[e]?-1:t[e]>n[e]?1:0});return t||a.reverse(),a}},{key:"renderRows",value:function(){var e=this;return 0===this.props.docs.length?d.default.createElement(N,null):this.sort(this.props.column,this.props.descending,this.props.docs).map(function(t,n){return d.default.createElement(y,{key:n,_id:t._id,selected:t.selected,selectDoc:e.props.selectDoc,source:t.source,target:t.target,type:!0===t.continuous?"Continuous":"One time",status:t.status,statusTime:t.statusTime,startTime:t.startTime,url:t.url,deleteDocs:e.props.deleteDocs,errorMsg:t.errorMsg,doc:t,onlyDeleteAction:e.props.onlyDeleteAction,showStateRow:e.props.showStateRow})})}},{key:"iconDirection",value:function(e){return e!==this.props.column||this.props.descending?"fonticon-down-dir":"fonticon-up-dir"}},{key:"onSort",value:function(e){var t=this;return function(){t.props.changeSort({descending:e!==t.props.column||!t.props.descending,column:e})}}},{key:"isSelected",value:function(e){return e===this.props.column?"replication__table--selected":""}},{key:"stateCol",value:function(){return this.props.showStateRow?d.default.createElement("th",{className:"replication__table-header-status",onClick:this.onSort("status")},"State",d.default.createElement("span",{className:"replication__table-header-icon "+this.iconDirection("status")+" "+this.isSelected("status")})):null}},{key:"render",value:function(){return d.default.createElement(f.Table,{striped:!0},d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",{className:"replication__table-bulk-select"},d.default.createElement(v,{isSelected:this.props.allDocsSelected,onCheck:this.props.selectAllDocs,someDocsSelected:this.props.someDocsSelected,deleteDocs:this.props.deleteDocs})),d.default.createElement("th",{className:"replication__table-header-source",onClick:this.onSort("source")},"Source",d.default.createElement("span",{className:"replication__table-header-icon "+this.iconDirection("source")+" "+this.isSelected("source")})),d.default.createElement("th",{className:"replication__table-header-target",onClick:this.onSort("target")},"Target",d.default.createElement("span",{className:"replication__table-header-icon "+this.iconDirection("target")+" "+this.isSelected("target")})),d.default.createElement("th",{className:"replication__table-header-time",onClick:this.onSort("statusTime")},"Start Time",d.default.createElement("span",{className:"replication__table-header-icon "+this.iconDirection("statusTime")+" "+this.isSelected("statusTime")})),d.default.createElement("th",{className:"replication__table-header-type",onClick:this.onSort("continuous")},"Type",d.default.createElement("span",{className:"replication__table-header-icon "+this.iconDirection("continuous")+" "+this.isSelected("continuous")})),this.stateCol(),d.default.createElement("th",{className:"replication__table-header-actions"},"Actions"))),d.default.createElement("tbody",null,this.renderRows()))}}]),t}(d.default.Component)).defaultProps={onlyDeleteAction:!1,showStateRow:!0}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=n(19),l=i.default.createElement(r.Tooltip,{id:"tooltip",className:"replication__tooltip"},i.default.createElement("p",null,"If you know the credentials for the remote account, you can use that remote username and password."),i.default.createElement("p",null,"If a remote database granted permissions to your local account, you can use the local-account username and password."),i.default.createElement("p",null,"If the remote database granted permissions to unauthenticated connections, you do not need to enter a username or password.")),s=i.default.createElement(r.Tooltip,{id:"tooltip",className:"replication__tooltip"},"Enter the username and password of the remote account."),u=function(e){var t=e.newRemote,n=t?'If a "new" database already exists, data will replicate into that existing database.':null;return i.default.createElement("div",{className:"replication__remote-connection-url-text"},"https://$USERNAME:$PASSWORD@$REMOTE_SERVER/$DATABASE Â ",i.default.createElement(r.OverlayTrigger,{placement:"right",overlay:t?s:l},i.default.createElement("i",{className:"replication__remote_icon_help icon icon-question-sign"})),i.default.createElement("p",null,n))};t.default=u},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=a(o),r=n(2),l=a(r),s=l.default.addon();s.Model=Backbone.Model.extend({documentation:i.default.host+"/_utils/docs",url:function(e){return"apiurl"===e?window.location.origin+"/_cluster_setup":"/_cluster_setup"},validate:function(e){return e.username?e.password?e.bind_address&&"127.0.0.1"===e.bind_address&&!e.singlenode?"Bind address can not be 127.0.0.1":e.port&&_.isNaN(+e.port)?"Bind port must be a number":e.nodeCount&&_.isNaN(+e.nodeCount)?"Node count must be a number":e.nodeCount&&e.nodeCount<1?"Node count must be >= 1":void 0:"Admin password is required":"Admin name is required"}}),t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(264),l=a(r),s=n(266),u=a(s),c=n(267),d=a(c),f=n(127),p=a(f),h=d.default.setupStore;t.default={getClusterStateFromCouch:function(){var e=new l.default.Model;e.fetch().then(function(){i.default.dispatch({type:u.default.SETUP_SET_CLUSTERSTATUS,options:{state:e.get("state")}})})},finishClusterSetup:function(e){$.ajax({type:"POST",url:"/_cluster_setup",contentType:"application/json",dataType:"json",data:JSON.stringify({action:"finish_cluster"})}).success(function(){i.default.addNotification({msg:e,type:"success",fade:!1,clear:!0}),i.default.navigate("#setup/finish")}).fail(function(){i.default.addNotification({msg:"There was an error. Please check your setup and try again.",type:"error",fade:!1,clear:!0})})},setupSingleNode:function(){var e=h.getUsername(),t=h.getPassword(),n=new l.default.Model({action:"enable_single_node",username:e,password:t,bind_address:h.getBindAdressForSetupNode(),port:h.getPortForSetupNode(),singlenode:!0});n.on("invalid",function(e,t){i.default.addNotification({msg:t,type:"error",fade:!1,clear:!0})}),n.save().then(function(){return p.default.login({name:e,password:t})}).then(function(){i.default.addNotification({msg:"Single node setup successful.",type:"success",fade:!1,clear:!0}),i.default.navigate("#setup/finish")}.bind(this))},addNode:function(e){function t(){var e=new l.default.Model({action:"add_node",username:n,password:a,host:d,port:f,singlenode:!1});g.save().then(function(){return e.save()}).then(function(){i.default.dispatch({type:u.default.SETUP_ADD_NODE_TO_LIST,options:{value:{port:f,remoteAddress:d}}}),i.default.addNotification({msg:"Added node",type:"success",fade:!1,clear:!0})}).fail(function(e){var t=JSON.parse(e.responseText).reason;i.default.addNotification({msg:"Adding node failed: "+t,type:"error",fade:!1,clear:!0})})}var n=h.getUsername(),a=h.getPassword(),o=h.getPortForSetupNode(),r=h.getBindAdressForSetupNode(),s=h.getNodeCountForSetupNode(),c=h.getAdditionalNode().bindAddress,d=h.getAdditionalNode().remoteAddress,f=h.getAdditionalNode().port,m=new l.default.Model({action:"enable_cluster",username:n,password:a,bind_address:r,port:o,node_count:s,singlenode:!1});m.on("invalid",function(e,t){i.default.addNotification({msg:t,type:"error",fade:!1,clear:!0})});var _={action:"enable_cluster",username:n,password:a,bind_address:c,port:f,node_count:s,remote_node:d,remote_current_user:n,remote_current_password:a};e&&(delete _.remote_current_user,delete _.remote_current_password);var g=new l.default.Model(_);g.on("invalid",function(e,t){i.default.addNotification({msg:t,type:"error",fade:!1,clear:!0})}),m.save().always(function(){p.default.login({name:n,password:a}).then(function(){t()})})},resetAddtionalNodeForm:function(){i.default.dispatch({type:u.default.SETUP_RESET_ADDITIONAL_NODE})},alterPortAdditionalNode:function(e){i.default.dispatch({type:u.default.SETUP_PORT_ADDITIONAL_NODE,options:{value:e}})},alterRemoteAddressAdditionalNode:function(e){i.default.dispatch({type:u.default.SETUP_REMOTE_ADDRESS_ADDITIONAL_NODE,options:{value:e}})},alterBindAddressAdditionalNode:function(e){i.default.dispatch({type:u.default.SETUP_BIND_ADDRESS_ADDITIONAL_NODE,options:{value:e}})},setUsername:function(e){i.default.dispatch({type:u.default.SETUP_SET_USERNAME,options:{value:e}})},setPassword:function(e){i.default.dispatch({type:u.default.SETUP_SET_PASSWORD,options:{value:e}})},setPortForSetupNode:function(e){i.default.dispatch({type:u.default.SETUP_PORT_FOR_SINGLE_NODE,options:{value:e}})},setBindAddressForSetupNode:function(e){i.default.dispatch({type:u.default.SETUP_BIND_ADDRESS_FOR_SINGLE_NODE,options:{value:e}})},setNodeCount:function(e){i.default.dispatch({type:u.default.SETUP_NODE_COUNT,options:{value:e}})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SETUP_SET_CLUSTERSTATUS:"SETUP_SET_CLUSTERSTATUS",SETUP_SET_USERNAME:"SETUP_SET_USERNAME",SETUP_SET_PASSWORD:"SETUP_SET_PASSWORD",SETUP_BIND_ADDRESS_FOR_SINGLE_NODE:"SETUP_BIND_ADDRESS_FOR_SINGLE_NODE",SETUP_PORT_FOR_SINGLE_NODE:"SETUP_PORT_FOR_SINGLE_NODE",SETUP_PORT_ADDITIONAL_NODE:"SETUP_PORT_ADDITIONAL_NODE",SETUP_BIND_ADDRESS_ADDITIONAL_NODE:"SETUP_BIND_ADDRESS_ADDITIONAL_NODE",SETUP_REMOTE_ADDRESS_ADDITIONAL_NODE:"SETUP_REMOTE_ADDRESS_ADDITIONAL_NODE",SETUP_RESET_ADDITIONAL_NODE:"SETUP_RESET_ADDITIONAL_NODE",SETUP_ADD_NODE_TO_LIST:"SETUP_ADD_NODE_TO_LIST",SETUP_NODE_COUNT:"SETUP_NODE_COUNT"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(266),l=a(r),s=i.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._clusterState=[],this._username="",this._password="",this._setupNode={bindAddress:"0.0.0.0",port:5984,nodeCount:3},this.resetAddtionalNode(),this._nodeList=[]},resetAddtionalNode:function(){this._additionalNode={bindAddress:"0.0.0.0",port:5984,remoteAddress:"127.0.0.1"}},setClusterState:function(e){this._clusterState=e.state},getClusterState:function(){return this._clusterState},getNodeList:function(){return this._nodeList},getIsAdminParty:function(){return i.default.session.isAdminParty()},setUsername:function(e){this._username=e.value},setPassword:function(e){this._password=e.value},getUsername:function(){return this._username},getPassword:function(){return this._password},setBindAdressForSetupNode:function(e){this._setupNode.bindAddress=e.value},setPortForSetupNode:function(e){this._setupNode.port=e.value},getPortForSetupNode:function(){return this._setupNode.port},getBindAdressForSetupNode:function(){return this._setupNode.bindAddress},setNodeCountForSetupNode:function(e){this._setupNode.nodeCount=Math.min(e.value,3)},getNodeCountForSetupNode:function(){return this._setupNode.nodeCount},setBindAdressForAdditionalNode:function(e){this._additionalNode.bindAddress=e.value},setPortForAdditionalNode:function(e){this._additionalNode.port=e.value},setRemoteAddressForAdditionalNode:function(e){this._additionalNode.remoteAddress=e.value},getAdditionalNode:function(){return this._additionalNode},addNodeToList:function(e){this._nodeList.push(e.value),this.resetAddtionalNode()},getHostForSetupNode:function(){return"127.0.0.1"},dispatch:function(e){var t=this;switch(e.type){case l.default.SETUP_SET_CLUSTERSTATUS:this.setClusterState(e.options);break;case l.default.SETUP_SET_USERNAME:this.setUsername(e.options);break;case l.default.SETUP_SET_PASSWORD:this.setPassword(e.options);break;case l.default.SETUP_BIND_ADDRESS_FOR_SINGLE_NODE:this.setBindAdressForSetupNode(e.options);break;case l.default.SETUP_PORT_FOR_SINGLE_NODE:this.setPortForSetupNode(e.options);break;case l.default.SETUP_PORT_ADDITIONAL_NODE:this.setPortForAdditionalNode(e.options);break;case l.default.SETUP_BIND_ADDRESS_ADDITIONAL_NODE:this.setBindAdressForAdditionalNode(e.options);break;case l.default.SETUP_REMOTE_ADDRESS_ADDITIONAL_NODE:this.setRemoteAddressForAdditionalNode(e.options);break;case l.default.SETUP_ADD_NODE_TO_LIST:this.addNodeToList(e.options);break;case l.default.SETUP_RESET_ADDITIONAL_NODE:this.resetAddtionalNode();break;case l.default.SETUP_NODE_COUNT:this.setNodeCountForSetupNode(e.options);break;default:return}setTimeout(function(){t.triggerChange()})}}),u=new s;u.dispatchToken=i.default.dispatcher.register(u.dispatch.bind(u)),t.default={setupStore:u,SetupStore:s}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(136),l=a(r),s=n(270),u=a(s),c=n(269),d=a(c),f=function(e){i.default.dispatch({type:d.default.VERIFY_INSTALL_SINGLE_TEST_COMPLETE,test:e,success:!0})},p=function(e){return function(t){t&&(i.default.dispatch({type:d.default.VERIFY_INSTALL_SINGLE_TEST_COMPLETE,test:e,success:!1}),i.default.addNotification({msg:"Error: "+JSON.parse(t.responseText).reason,type:"error"}))}};t.default={resetStore:function(){i.default.dispatch({type:d.default.VERIFY_INSTALL_RESET})},startVerification:function(){i.default.dispatch({type:d.default.VERIFY_INSTALL_START});var e=u.default.testProcess;e.setup().then(function(){return e.saveDB()},p(l.default.TESTS.CREATE_DATABASE)).then(function(){return f(l.default.TESTS.CREATE_DATABASE),e.saveDoc()},p(l.default.TESTS.CREATE_DOCUMENT)).then(function(){return f(l.default.TESTS.CREATE_DOCUMENT),e.updateDoc()},p(l.default.TESTS.UPDATE_DOCUMENT)).then(function(){return f(l.default.TESTS.UPDATE_DOCUMENT),e.destroyDoc()},p(l.default.TESTS.DELETE_DOCUMENT)).then(function(){return f(l.default.TESTS.DELETE_DOCUMENT),e.setupView()},p(l.default.TESTS.CREATE_VIEW)).then(function(){return e.testView()},p(l.default.TESTS.CREATE_VIEW)).then(function(){return f(l.default.TESTS.CREATE_VIEW),e.setupReplicate()},p(l.default.TESTS.CREATE_VIEW)).then(function(){return e.testReplicate()},p(l.default.TESTS.REPLICATION)).then(function(){f(l.default.TESTS.REPLICATION),i.default.dispatch({type:d.default.VERIFY_INSTALL_ALL_TESTS_COMPLETE}),i.default.addNotification({msg:"Success! Your CouchDB installation is working. Time to Relax.",type:"success"}),e.removeDBs()},p(l.default.TESTS.REPLICATION))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={VERIFY_INSTALL_START:"VERIFY_INSTALL_START",VERIFY_INSTALL_RESET:"VERIFY_INSTALL_RESET",VERIFY_INSTALL_SINGLE_TEST_COMPLETE:"VERIFY_INSTALL_SINGLE_TEST_COMPLETE",VERIFY_INSTALL_ALL_TESTS_COMPLETE:"VERIFY_INSTALL_ALL_TESTS_COMPLETE"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,i,r=n(11),l=a(r),s=n(2),u=a(s),c=n(72),d=a(c),f=n(45),p=a(f),h=u.default.addon(),m=new d.default.Model({id:"verifytestdb",name:"verifytestdb"}),g=new d.default.Model({id:"verifytestdb_replicate",name:"verifytestdb_replicate"});h.testProcess={saveDoc:function(){return o=new p.default.Doc({_id:"test_doc_1",a:1},{database:m}),o.save()},destroyDoc:function(){return o.destroy()},updateDoc:function(){return o.set({b:"hello"}),o.save()},saveDB:function(){return m.save()},setupDB:function(e){var t=u.default.Deferred();return e.fetch().then(function(){return e.destroy()},function(){t.resolve()}).then(function(){t.resolve()},function(e,n,a){"Unauthorized"===a&&t.reject(e,n,a)}),t},setup:function(){return u.default.when([this.setupDB(m),this.setupDB(g)])},testView:function(){var e=u.default.Deferred();return $.get(i.url()+"/_view/testview").then(function(t){t=_.isString(t)?JSON.parse(t):t;var n=t.rows[0];if(6===n.value)return e.resolve();var a={reason:"Values expect 6, got "+n.value};e.reject({responseText:JSON.stringify(a)})},e.reject),e},setupView:function(){var e=new p.default.Doc({_id:"test_doc_10",a:1},{database:m}),t=new p.default.Doc({_id:"test_doc_20",a:2},{database:m}),n=new p.default.Doc({_id:"test_doc_30",a:3},{database:m});return i=new p.default.Doc({_id:"_design/view_check",views:{testview:{map:"function (doc) { emit(doc._id, doc.a); }",reduce:"_sum"}}},{database:m}),u.default.when([e.save(),t.save(),n.save(),i.save()])},setupReplicate:function(){return $.ajax({url:l.default.host+"/_replicate",contentType:"application/json",type:"POST",dataType:"json",processData:!1,data:JSON.stringify({create_target:!0,source:"verifytestdb",target:"verifytestdb_replicate"})})},testReplicate:function(){var e=u.default.Deferred();return g.fetch().then(function(){var t=g.get("doc_count");if(4===t)return void e.resolve();var n={reason:"Replication Failed, expected 4 docs got "+t};e.reject({responseText:JSON.stringify(n)})},e.reject),e},removeDBs:function(){g.destroy(),m.destroy()}},t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MISC:{TRAY_TOGGLE_SPEED:250,DEFAULT_PAGE_SIZE:20},DATABASES:{DOCUMENT_LIMIT:100},EVENTS:{TRAY_OPENED:"tray:opened",NAVBAR_SIZE_CHANGED:"navbar:size_changed"},DOC_URLS:{GENERAL:"/_utils/docs/intro/api.html#documents",ALL_DBS:"/_utils/docs/api/server/common.html?highlight=all_dbs#get--_all_dbs",REPLICATION:"/_utils/docs/replication/replicator.html#basics",DESIGN_DOCS:"/_utils/docs/couchapp/ddocs.html#design-docs",DESIGN_DOC_METADATA:"/_utils/docs/api/ddoc/common.html#api-ddoc-view-index-info",VIEW_FUNCS:"/_utils/docs/couchapp/ddocs.html#view-functions",MAP_FUNCS:"/_utils/docs/couchapp/ddocs.html#map-functions",REDUCE_FUNCS:"/_utils/docs/couchapp/ddocs.html#reduce-and-rereduce-functions",API_REF:"/_utils/docs/http-api.html",DB_PERMISSION:"/_utils/docs/api/database/security.html#db-security",STATS:"/_utils/docs/api/server/common.html?highlight=stats#get--_stats",ACTIVE_TASKS:"/_utils/docs/api/server/common.html?highlight=stats#active-tasks",LOG:"/_utils/docs/api/server/common.html?highlight=stats#log",CONFIG:"/_utils/docs/config/index.html",VIEWS:"/_utils/docs/intro/overview.html#views",MANGO_INDEX:"/_utils/docs/intro/api.html#documents",MANGO_SEARCH:"/_utils/docs/intro/api.html#documents",CHANGES:"/_utils/docs/api/database/changes.html?highlight=changes#post--db-_changes"}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(43),r=a(i),l=n(18),s=a(l),u={router:{navigate:function(){}},masterLayout:{},addHeaderLink:function(e){u.dispatch({type:"ADD_NAVBAR_LINK",link:e})},addNotification:function(e){e=s.default.extend({msg:"Notification Event Triggered!",type:"info",escape:!0,clear:!1},e),u.dispatch({type:"ADD_NOTIFICATION",options:{info:e}})},config:function(e){return s.default.extend(this,e)}};u.Deferred=function(){return $.Deferred()},u.when=function(e){return e instanceof Array?$.when.apply(null,e):$.when(e)},u.addonExtensions={initialize:function(){},RouteObjects:{},Views:{}},u.addon=function(e){return s.default.extend(s.default.clone(u.addonExtensions),e)},u.View=r.default.View.extend({establish:function(){return null},loaderClassname:"loader",manage:!0,forceRender:function(){this.hasRendered=!1}});var c={fetchOnce:function(e){var t=s.default.extend({},e);return this._deferred&&"rejected"!==this._deferred.state()&&!t.forceFetch||(this._deferred=this.fetch()),this._deferred}};u.Model=r.default.Model.extend({}),u.Collection=r.default.Collection.extend({}),s.default.each([u.Model,u.Collection],function(e){s.default.extend(e.prototype,c)});var d=s.default.extend({},r.default.Events);u.registerExtension=function(e,t){d[e]||(d[e]=[]),d.trigger("add:"+e,t),d[e].push(t)},u.unRegisterExtension=function(e){var t=d[e];t&&(d.trigger("remove:"+e,t),delete d[e])},u.getExtensions=function(e){var t=d[e];return t||(t=[]),t},u.removeExtensionItem=function(e,t,n){var a=d[e];if(a){var o=arguments[arguments.length-1];s.default.isObject(t)&&!n&&(o=function(e){return s.default.isEqual(e,t)}),a=s.default.filter(a,function(e){return!o(e)}),d[e]=a,d.trigger("removeItem:"+e,t)}},u.extensions=d,u.setSession=function(e){u.session=e},u.reducers={},u.addReducers=function(e){u.reducers=o({},u.reducers,e)},u.middlewares=[],u.addMiddleware=function(e){e&&"function"==typeof e&&u.middlewares.push(e)},t.default=u},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(77),d=n(479),f=a(d),p=n(133),h=a(p),m=n(254),_=a(m),g=n(6),E=a(g),b=_.default.navBarStore,y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={routerOptions:e.router.currentRouteOptions},e.router.currentRouteOptions&&e.router.currentRouteOptions.selectedHeader&&h.default.setNavbarActiveLink(n.state.routerOptions.selectedHeader),n}return r(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.props.router.on("new-component",function(t){e.setState({routerOptions:t}),h.default.setNavbarActiveLink(e.state.routerOptions.selectedHeader)}),this.props.router.on("trigger-update",function(){e.forceUpdate()})}},{key:"render",value:function(){return this.state.routerOptions?this.state.routerOptions.component||null:null}}]),t}(u.default.Component),v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStoreState(),n}return r(t,e),l(t,[{key:"getStoreState",value:function(){return{isPrimaryNavMinimized:b.isMinimized()}}},{key:"componentDidMount",value:function(){b.on("change",this.onChange,this)}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"render",value:function(){var e=(0,E.default)({closeMenu:this.state.isPrimaryNavMinimized});return u.default.createElement("div",null,u.default.createElement(c.PermanentNotification,null),u.default.createElement("div",{id:"notifications"},u.default.createElement(c.NotificationController,null)),u.default.createElement("div",{role:"main",id:"main",className:e},u.default.createElement("div",{id:"app-container"},u.default.createElement("div",{className:"wrapper"},u.default.createElement("div",{className:"pusher"},u.default.createElement(y,{router:this.props.router})),u.default.createElement("div",{id:"primary-navbar"},u.default.createElement(f.default,null))))))}}]),t}(u.default.Component);t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(471),i=a(o),r=n(390),l=a(r),s=n(71),u=a(s),c=n(422),d=a(c),f=n(502),p=a(f),h=n(373),m=a(h),_=n(387),g=a(_),E=n(405),b=a(E),y=n(490),v=a(y),N=n(412),D=a(N),O=n(482),S=a(O),T=n(378),C=a(T),w=n(505),I=a(w),A=n(419),R=a(A);t.default=[i.default,l.default,u.default,d.default,p.default,m.default,g.default,b.default,v.default,D.default,S.default,C.default,I.default,R.default]},,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(376),l=a(r);n(594),l.default.initialize=function(){i.default.addHeaderLink({title:"Active Tasks",icon:"fonticon-activetasks",href:"#/activetasks"})},t.default=l.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTasksPollingWidgetController=t.ActiveTasksController=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(11),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(377)),h=a(p),m=n(203),g=a(m),E=n(201),b=a(E),y=n(15),v=a(y),N=v.default.TabElement,D=v.default.TabElementWrapper,O=v.default.Polling,S=h.default.activeTasksStore,T=t.ActiveTasksController=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{collection:S.getCollection(),searchTerm:S.getSearchTerm(),selectedRadio:S.getSelectedRadio(),sortByHeader:S.getSortByHeader(),headerIsAscending:S.getHeaderIsAscending()}},a.onChange=function(){a.setState(a.getStoreState())},a.setNewSearchTerm=function(e){b.default.setSearchTerm(e)},a.switchTab=function(e){b.default.switchTab(e)},a.tableHeaderOnClick=function(e){b.default.sortByColumnHeader(e)},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){b.default.init(new g.default.AllTasks),S.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){S.off("change",this.onChange,this)}},{key:"render",value:function(){var e=this.state,t=e.collection,n=e.searchTerm,a=e.selectedRadio,o=e.sortByHeader,i=e.headerIsAscending,r=this.setNewSearchTerm,l=this.tableHeaderOnClick;return d.default.createElement("div",{id:"active-tasks-page",className:"scrollable"},d.default.createElement("div",{className:"inner"},d.default.createElement(C,{searchTerm:n,selectedRadio:a,onSearch:r,onRadioClick:this.switchTab}),d.default.createElement(w,{collection:t,searchTerm:n,selectedRadio:a,onTableHeaderClick:l,sortByHeader:o,headerIsAscending:i})))}}]),t}(d.default.Component),C=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.checked=function(e){return a.props.selectedRadio===e},a.onRadioClick=function(e){var t=e.target.value;a.props.onRadioClick(t)},a.createFilterTabs=function(){return a.props.radioNames.map(function(e,t){var n=a.checked(e);return d.default.createElement(N,{key:t,selected:n,text:e,onChange:a.onRadioClick})})},a.searchTermChange=function(e){var t=e.target.value;a.props.onSearch(t)},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e=this.createFilterTabs();return d.default.createElement(D,null,e,d.default.createElement("li",{className:"component-tab-list-element"},d.default.createElement("input",{id:"active-tasks-search-box",className:"searchbox",type:"text",name:"search",placeholder:"Search for databases...",value:this.props.searchTerm,onChange:this.searchTermChange})))}}]),t}(d.default.Component);C.defaultProps={radioNames:["All Tasks","Replication","Database Compaction","Indexer","View Compaction"]};var w=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props.collection,t=this.props.selectedRadio,n=this.props.searchTerm,a=this.props.sortByHeader,o=this.props.onTableHeaderClick,i=this.props.headerIsAscending;return d.default.createElement("div",{id:"dashboard-lower-content"},d.default.createElement("table",{id:"active-tasks-table",className:"table table-bordered table-striped active-tasks"},d.default.createElement(I,{onTableHeaderClick:o,sortByHeader:a,headerIsAscending:i}),d.default.createElement(R,{collection:e,selectedRadio:t,searchTerm:n})))}}]),t}(d.default.Component),I=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.createTableHeadingFields=function(){var e=a.props.onTableHeaderClick,t=a.props.sortByHeader,n=a.props.headerIsAscending;return a.props.headerNames.map(function(a){return d.default.createElement(A,{headerName:a[0],displayName:a[1],key:a[0],onTableHeaderClick:e,sortByHeader:t,headerIsAscending:n})})},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("thead",null,d.default.createElement("tr",null,this.createTableHeadingFields()))}}]),t}(d.default.Component);I.defaultProps={headerNames:[["type","Type"],["database","Database"],["started-on","Started on"],["updated-on","Updated on"],["pid","PID"],["progress","Status"]]};var A=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.arrow=function(){var e=a.props.sortByHeader,t=a.props.headerName,n=a.props.headerIsAscending,o=n?"icon icon-caret-up":"icon icon-caret-down";if(e===t)return d.default.createElement("i",{className:o})},a.onTableHeaderClick=function(e){var t=e.target.value;a.props.onTableHeaderClick(t)},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e=this.arrow(),t="header-field "+this.props.headerName;return d.default.createElement("td",{className:t+" tableheader",value:this.props.headerName},d.default.createElement("input",{type:"radio",name:"header-field",id:this.props.headerName,value:this.props.headerName,className:"header-field radio",onChange:this.onTableHeaderClick}),d.default.createElement("label",{className:"header-field label-text active-tasks-header noselect",htmlFor:this.props.headerName},this.props.displayName," ",e))}}]),t}(d.default.Component),R=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{filteredTable:S.getFilteredTable(a.props.collection)}},a.createRows=function(){var e=""===a.props.searchTerm.trim();return 0===a.state.filteredTable.length?e?a.noActiveTasks():a.noActiveTasksMatchFilter():_.map(a.state.filteredTable,function(e,t){return d.default.createElement(P,{key:t,item:e})})},a.noActiveTasks=function(){var e=a.props.selectedRadio;return"All Tasks"===e&&(e=""),d.default.createElement("tr",{className:"no-matching-database-on-search"},d.default.createElement("td",{colSpan:"6"},"No active ",e," tasks."))},a.noActiveTasksMatchFilter=function(){var e=a.props.selectedRadio;return"All Tasks"===e&&(e=""),d.default.createElement("tr",{className:"no-matching-database-on-search"},d.default.createElement("td",{colSpan:"6"},"No active ",e,' tasks match with filter: "',a.props.searchTerm,'"'))},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentWillReceiveProps",value:function(){this.setState({filteredTable:S.getFilteredTable(this.props.collection)})}},{key:"render",value:function(){return d.default.createElement("tbody",{className:"js-tasks-go-here"},this.createRows())}}]),t}(d.default.Component),P=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getInfo=function(e){return{type:e.type,objectField:k.getDatabaseFieldMessage(e),started_on:k.getTimeInfo(e.started_on),updated_on:k.getTimeInfo(e.updated_on),pid:e.pid.replace(/[<>]/g,""),progress:k.getProgressMessage(e)}},a.multilineMessage=function(e,t){t||(t="");var n="multiline-active-tasks-message "+t;return e.map(function(e,t){return d.default.createElement("p",{key:t,className:n},e)})},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e=this.getInfo(this.props.item),t=this.multilineMessage(e.objectField,"to-from-database"),n=this.multilineMessage(e.started_on,"time"),a=this.multilineMessage(e.updated_on,"time"),o=this.multilineMessage(e.progress);return d.default.createElement("tr",null,d.default.createElement("td",null,e.type),d.default.createElement("td",null,t),d.default.createElement("td",null,n),d.default.createElement("td",null,a),d.default.createElement("td",null,e.pid),d.default.createElement("td",null,o))}}]),t}(d.default.Component),L=t.ActiveTasksPollingWidgetController=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{collection:S.getBackboneCollection()}},a.onChange=function(){a.setState(a.getStoreState())},a.runPollingUpdate=function(){b.default.runPollingUpdate(a.state.collection)},a.getPluralForLabel=function(){return"1"===a.state.pollingInterval?"":"s"},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){S.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){S.off("change",this.onChange,this)}},{key:"render",value:function(){return d.default.createElement("div",{className:"active-tasks__polling-wrapper"},d.default.createElement(O,{min:1,max:30,stepSize:1,startValue:15,valueUnits:"second",onPoll:this.runPollingUpdate}))}}]),t}(d.default.Component),k={getTimeInfo:function(e){return[u.default.helpers.formatDate(e),u.default.helpers.getDateFromNow(e)]},getDatabaseFieldMessage:function(e){var t=e.type,n=[];return"replication"===t?(n.push("From: "+e.source),n.push("To: "+e.target)):"indexer"===t?(n.push(e.database),n.push("(View: "+e.design_document+")")):n.push(e.database),n},getProgressMessage:function(e){var t=[],n=e.type;return _.has(e,"progress")&&t.push("Progress: "+e.progress+"%"),"indexer"===n?t.push("Processed "+e.changes_done+" of "+e.total_changes+" changes."):"replication"===n&&(t.push(e.docs_written+" docs written."),_.has(e,"changes_pending")&&t.push(e.changes_pending+" pending changes.")),_.has(e,"changes_done")&&t.push(e.changes_done+" Changes done."),t},getSourceSequence:function(e){return e.source_seq}};t.default={ActiveTasksController:T,ActiveTasksFilterTabs:C,ActiveTaskTable:w,ActiveTasksTableHeader:I,TableHeader:A,ActiveTasksTableBody:R,ActiveTaskTableBodyContents:P,ActiveTasksPollingWidgetController:L}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTasksLayout=void 0;var o=n(0),i=a(o),r=n(2),l=a(r),s=n(29),u=n(374),c=[{name:"Active Tasks"}],d=t.ActiveTasksLayout=function(){return i.default.createElement(s.OnePane,null,i.default.createElement(s.OnePaneHeader,{crumbs:c,docURL:l.default.constants.DOC_URLS.ACTIVE_TASKS,endpoint:window.location.origin+"/_active_tasks"},i.default.createElement(u.ActiveTasksPollingWidgetController,null)),i.default.createElement(s.OnePaneContent,null,i.default.createElement(u.ActiveTasksController,null)))};t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=n(2),l=a(r),s=n(203),u=a(s),c=n(375),d=a(c),f=l.default.RouteObject.extend({selectedHeader:"Active Tasks",routes:{"activetasks/:id":"showActiveTasks",activetasks:"showActiveTasks"},roles:["_admin"],showActiveTasks:function(){return i.default.createElement(d.default,null)}});u.default.RouteObjects=[f],t.default=u.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(202),l=a(r),s=i.default.Store.extend({initialize:function(){this._prevSortbyHeader="started-on",this._headerIsAscending=!0,this._selectedRadio="All Tasks",this._sortByHeader="started-on",this._searchTerm="",this._pollingIntervalSeconds=5},initAfterFetching:function(e,t){this._collection=e,this.sortCollectionByColumnHeader(this._sortByHeader),this._backboneCollection=t,this.setIsLoading(!0,new Date)},isLoading:function(){return this._isLoading},setIsLoading:function(e,t){e?(this._startTimeForLoading=t,this._isLoading=!0):t-this._startTimeForLoading<800?setTimeout(function(){this._isLoading=!1,this.triggerChange()}.bind(this),800):this._isLoading=!1},getSelectedRadio:function(){return this._selectedRadio},setSelectedRadio:function(e){this._selectedRadio=e},setCollectionFromPolling:function(e){this.setCollection(e),this.sortCollectionByColumnHeader(this._prevSortbyHeader,!1)},setCollection:function(e){this._collection=e},getCollection:function(){return this._collection},getBackboneCollection:function(){return this._backboneCollection},setSearchTerm:function(e){this._searchTerm=e},getSearchTerm:function(){return this._searchTerm},getSortByHeader:function(){return this._sortByHeader},setSortByHeader:function(e){this._sortByHeader=e},getHeaderIsAscending:function(){return this._headerIsAscending},toggleHeaderIsAscending:function(){if(this._prevSortbyHeader===this._sortByHeader)return void(this._headerIsAscending=!this._headerIsAscending);this._headerIsAscending=!0},sortCollectionByColumnHeader:function(e){var t=this._collection,n=_.sortBy(t,function(t){var n=e;return _.isUndefined(t[n])&&(n="source"),t[n]});this._prevSortbyHeader=e,this._collection=n},getFilteredTable:function(){var e=[];return this.sortCollectionByColumnHeader(this._sortByHeader),this._collection.map(function(t){var n=this.passesRadioFilter(t),a=this.passesSearchFilter(t);n&&a&&e.push(t)}.bind(this)),this._headerIsAscending||e.reverse(),e},passesSearchFilter:function(e){var t=this._searchTerm,n=new RegExp(t,"g"),a="";return _.has(e,"database")&&(a+=e.database),_.has(e,"source")&&(a+=e.source),_.has(e,"target")&&(a+=e.target),n.test(a)},passesRadioFilter:function(e){var t=this._selectedRadio.toLowerCase().replace(" ","_");return e.type===t||"all_tasks"===t},dispatch:function(e){switch(e.type){case l.default.ACTIVE_TASKS_FETCH_AND_SET:this.initAfterFetching(e.options.collectionTable,e.options.backboneCollection);break;case l.default.ACTIVE_TASKS_SWITCH_TAB:this.setSelectedRadio(e.options),this.triggerChange();break;case l.default.ACTIVE_TASKS_SET_COLLECTION:this.setCollection(e.options),this.triggerChange();break;case l.default.ACTIVE_TASKS_SET_SEARCH_TERM:this.setSearchTerm(e.options),this.triggerChange();break;case l.default.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:this.toggleHeaderIsAscending(),this.setSortByHeader(e.options.columnName),this.sortCollectionByColumnHeader(e.options.columnName),this.triggerChange();break;case l.default.ACTIVE_TASKS_SET_IS_LOADING:this.setIsLoading(e.options,new Date),this.triggerChange();break;case l.default.ACTIVE_TASKS_POLLING_COLLECTION:this.setCollectionFromPolling(e.options),this.triggerChange();break;default:return}}}),u=new s;u.dispatchToken=i.default.dispatcher.register(u.dispatch.bind(u)),t.default={activeTasksStore:u}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(384),l=a(r);n(595);var s=n(386),u=a(s),c=function(){i.default.removeHeaderLink({id:"auth",bottomNav:!0})};i.default.setSession(new u.default({allowAdminParty:!0})),t.default={initialize:function(){i.default.addHeaderLink({id:"auth",title:"Login",href:"#/login",icon:"fonticon-user",bottomNav:!0}),i.default.session.onChange(function(){var e=i.default.session,t=void 0;e.isAdminParty()?(t={id:"auth",title:"Admin Party!",href:"#/createAdmin",icon:"fonticon-user",bottomNav:!0},c(),i.default.addHeaderLink(t),i.default.hideLogin()):e.isLoggedIn()?(t={id:"auth",title:"Your Account",href:"#/changePassword",icon:"fonticon-user",bottomNav:!0},c(),i.default.addHeaderLink(t),i.default.showLogout()):(c(),i.default.showLogin())})},RouteObjects:l.default}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChangePasswordForm=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=a(c),f=n(2),p=a(f),h=n(53),m=n(26),_=t.ChangePasswordForm=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={password:"",passwordConfirm:""},n}return r(t,e),l(t,[{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onChangePasswordConfirm",value:function(e){this.setState({passwordConfirm:e.target.value})}},{key:"componentDidMount",value:function(){d.default.findDOMNode(this.refs.password).focus()}},{key:"changePassword",value:function(e){e.preventDefault(),this.props.changePassword(this.props.username,this.state.password,this.state.passwordConfirm)}},{key:"render",value:function(){return u.default.createElement("div",{className:"faux__auth-page"},u.default.createElement("h3",null,"Change Password"),u.default.createElement("form",{id:"change-password",onSubmit:this.changePassword.bind(this)},u.default.createElement("p",null,"Enter your new password."),u.default.createElement("input",{id:"password",type:"password",ref:"password",name:"password",placeholder:"Password",size:"24",onChange:this.onChangePassword.bind(this),value:this.state.password}),u.default.createElement("br",null),u.default.createElement("input",{id:"password-confirm",type:"password",name:"password_confirm",placeholder:"Verify Password",size:"24",onChange:this.onChangePasswordConfirm.bind(this),value:this.state.passwordConfirm}),u.default.createElement("br",null),u.default.createElement("p",null,u.default.createElement("button",{type:"submit",className:"btn btn-primary"},"Change"))))}}]),t}(u.default.Component);t.default=(0,m.connect)(function(){return{username:p.default.session.user().name}},{changePassword:h.changePassword})(_)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateAdminForm=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=a(f),h=n(53),m=n(26),_=t.CreateAdminForm=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={username:"",password:""},n}return r(t,e),l(t,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"componentDidMount",value:function(){p.default.findDOMNode(this.refs.username).focus()}},{key:"createAdmin",value:function(e){e.preventDefault(),this.props.createAdmin(this.state.username,this.state.password,this.props.loginAfter)}},{key:"render",value:function(){return d.default.createElement("div",{className:"faux__auth-page"},d.default.createElement("h3",null,"Create Admins"),d.default.createElement("p",null,"Before a server admin is configured, all clients have admin privileges. This is fine when HTTP access is restricted to trusted users. ",d.default.createElement("strong",null,"If end-users will be accessing this CouchDB, you must create an admin account to prevent accidental (or malicious) data loss.")),d.default.createElement("p",null,"Server admins can create and destroy databases, install and update _design documents, run the test suite, and edit all aspects of CouchDB configuration."),d.default.createElement("form",{id:"create-admin-form",onSubmit:this.createAdmin.bind(this)},d.default.createElement("input",{id:"username",type:"text",ref:"username",name:"name",placeholder:"Username",size:"24",onChange:this.onChangeUsername.bind(this)}),d.default.createElement("br",null),d.default.createElement("input",{id:"password",type:"password",name:"password",placeholder:"Password",size:"24",onChange:this.onChangePassword.bind(this)}),d.default.createElement("p",null,"Non-admin users have read and write access to all databases, which are controlled by validation. CouchDB can be configured to block all access to anonymous users."),d.default.createElement("button",{type:"submit",id:"create-admin",className:"btn btn-primary"},"Create Admin")))}}]),t}(d.default.Component);_.propTypes={loginAfter:u.default.bool.isRequired},_.defaultProps={loginAfter:!1},t.default=(0,m.connect)(null,{createAdmin:h.createAdmin})(_)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=a(f),h=n(53),m=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={username:"",password:""},e}return r(t,e),l(t,[{key:"onInputChange",value:function(e){this.state[e.target.name]=e.target.value,this.setState(this.state)}},{key:"submit",value:function(e){e.preventDefault(),this.checkUnrecognizedAutoFill()||this.login(this.state.username,this.state.password)}},{key:"checkUnrecognizedAutoFill",value:function(){if(""!==this.state.username||""!==this.state.password)return!1;var e=this.props.testBlankUsername?this.props.testBlankUsername:p.default.findDOMNode(this.refs.username).value,t=this.props.testBlankPassword?this.props.testBlankPassword:p.default.findDOMNode(this.refs.password).value;return this.setState({username:e,password:t}),this.login(e,t),!0}},{key:"login",value:function(e,t){(0,h.login)(e,t,this.props.urlBack)}},{key:"componentDidMount",value:function(){p.default.findDOMNode(this.refs.username).focus()}},{key:"render",value:function(){return d.default.createElement("div",{className:"couch-login-wrapper"},d.default.createElement("div",{className:"row-fluid"},d.default.createElement("div",{className:"span12"},d.default.createElement("form",{id:"login",onSubmit:this.submit.bind(this)},d.default.createElement("p",{className:"help-block"},"Enter your username and password."),d.default.createElement("input",{id:"username",type:"text",name:"username",ref:"username",placeholder:"Username",size:"24",onChange:this.onInputChange.bind(this),value:this.state.username}),d.default.createElement("br",null),d.default.createElement("input",{id:"password",type:"password",name:"password",ref:"password",placeholder:"Password",size:"24",onChange:this.onInputChange.bind(this),value:this.state.password}),d.default.createElement("br",null),d.default.createElement("button",{id:"submit",className:"btn btn-success",type:"submit"},"Log In")))))}}]),t}(d.default.Component);m.defaultProps={urlBack:""},m.propTypes={urlBack:u.default.string.isRequired},t.default=m},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(19),p=n(53),h=n(15),m=a(h),_=n(2),g=a(_),E=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={password:""},n.authenticate=n.authenticate.bind(n),n.onKeyPress=n.onKeyPress.bind(n),n}return r(t,e),l(t,[{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.authenticate()}},{key:"authenticate",value:function(){var e=g.default.session.user().name;this.props.onSubmit(e,this.state.password,this.props.onSuccess)}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,a=t.onClose,o=t.submitBtnLabel,i=t.headerTitle,r=t.modalMessage;return this.props.visible?d.default.createElement(f.Modal,{dialogClassName:"enter-password-modal",show:n,onHide:function(){return a()}},d.default.createElement(f.Modal.Header,{closeButton:!0},d.default.createElement(f.Modal.Title,null,i)),d.default.createElement(f.Modal.Body,null,r,d.default.createElement("input",{style:{width:"385px"},type:"password",className:"password-modal-input",placeholder:"Enter your password",autoFocus:!0,value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},onKeyPress:this.onKeyPress})),d.default.createElement(f.Modal.Footer,null,d.default.createElement("a",{className:"cancel-link",onClick:function(){return a()}},"Cancel"),d.default.createElement(m.default.ConfirmButton,{text:o,onClick:this.authenticate}))):null}}]),t}(d.default.Component);E.propTypes={visible:u.default.bool.isRequired,modalMessage:u.default.oneOfType([u.default.string,u.default.element]),onSubmit:u.default.func.isRequired,onClose:u.default.func.isRequired,submitBtnLabel:u.default.string},E.defaultProps={headerTitle:"Enter Password",visible:!1,modalMessage:"",onClose:p.hidePasswordModal,onSubmit:p.authenticate,onSuccess:function(){},submitBtnLabel:"Continue"},t.default=E},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=n(2),l=a(r),s=n(69),u=a(s),c=n(205),d=n(11),f=a(d),p=n(128),h=a(p),m=n(53),_=h.default.LoginForm,g=h.default.CreateAdminForm,E=[{name:"Log In to CouchDB"}];t.default=l.default.RouteObject.extend({routes:{"login?*extra":"login",login:"login",logout:"logout",createAdmin:"checkNodes","createAdmin/:node":"createAdminForNode"},checkNodes:function(){u.default.navigateToNodeBasedOnNodeCount("/createAdmin/")},login:function(){return i.default.createElement(c.AuthLayout,{crumbs:E,component:i.default.createElement(_,{urlBack:f.default.getParams().urlback})})},logout:function(){(0,m.logout)()},createAdminForNode:function(){u.default.fetchNodes();var e=[{name:"Create Admin"}];return i.default.createElement(c.AuthLayout,{crumbs:e,component:i.default.createElement(g,{loginAfter:!0})})}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(383),i=a(o),r=n(385),l=a(r);t.default=[i.default,l.default]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=n(2),l=a(r),s=n(69),u=a(s),c=n(205);t.default=l.default.RouteObject.extend({hideNotificationCenter:!0,hideApiBar:!0,selectedHeader:"Your Account",routes:{changePassword:{route:"checkNodesForPasswordChange",roles:["fx_loggedIn"]},"changePassword/:node":{route:"changePassword",roles:["fx_loggedIn"]},addAdmin:{route:"checkNodesForAddAdmin",roles:["_admin"]},"addAdmin/:node":{route:"addAdmin",roles:["_admin"]}},checkNodesForPasswordChange:function(){u.default.navigateToNodeBasedOnNodeCount("/changePassword/")},checkNodesForAddAdmin:function(){u.default.navigateToNodeBasedOnNodeCount("/addAdmin/")},changePassword:function(){return u.default.fetchNodes(),i.default.createElement(c.AdminLayout,{crumbs:[{name:"User Management"}],changePassword:!0})},addAdmin:function(){return u.default.fetchNodes(),i.default.createElement(c.AdminLayout,{crumbs:[{name:"User Management"}],changePassword:!1})}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,l.includes)(e,"_admin")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(18),s=n(127),u=a(s),c=n(140),d=a(c),f=function(){function e(t){var n=this;o(this,e),this._user={name:!1,roles:[]},this._onChange={},this._authenticatedPromise=new d.default(function(e,t){n._authenticateResolve=e,n._authenticateReject=t}),this._allowAdminParty=t.allowAdminParty}return r(e,[{key:"isAuthenticated",value:function(){return this._authenticatedPromise}},{key:"setUser",value:function(e){var t=this;return this._user.name!==e.name&&(this._user={name:e.name,roles:e.roles,isAdmin:i(e.roles)},(0,l.each)(this._onChange,function(e){return e(t._user)})),this._user}},{key:"user",value:function(){return this._user}},{key:"getSession",value:function(){var e=this;return u.default.getSession().then(function(t){e.setUser(t),e.isLoggedIn()&&e._authenticateResolve(e.user())}).catch(function(t){e._authenticateReject(t)})}},{key:"isAdminParty",value:function(){return!!this._allowAdminParty&&!this._user.name&&this._user.isAdmin}},{key:"isLoggedIn",value:function(){return!_.isNull(this._user.name)}},{key:"userRoles",value:function(){var e=this._user;return this.isLoggedIn()?(-1===e.roles.indexOf("fx_loggedIn")&&e.roles.push("fx_loggedIn"),e.roles):[]}},{key:"onChange",value:function(e){var t=this,n=(0,l.uniqueId)();return this._onChange[n]=e,function(){delete t._onChange[n]}}},{key:"matchesRoles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0===e.length||_.intersection(this.userRoles(),e).length>0}}]),e}();t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(389),i=a(o);i.default.initialize=function(){},t.default=i.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(207),d=a(c),f=d.default.nodesStore,p=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{nodes:f.getNodes()}},a.onChange=function(){a.setState(a.getStoreState())},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){f.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){f.off("change",this.onChange)}},{key:"render",value:function(){return u.default.createElement("div",{className:"config-warning-cluster-wrapper"},u.default.createElement("div",{className:"config-warning-cluster-container"},u.default.createElement("div",null,u.default.createElement("div",{className:"config-warning-icon-container pull-left"},u.default.createElement("i",{className:"fonticon-attention-circled"})),"It seems that you are running a cluster with ",this.state.nodes.length," nodes. For CouchDB 2.0 we recommend using a configuration management tools like Chef, Ansible, Puppet or Salt (in no particular order) to configure your nodes in a cluster.",u.default.createElement("br",null),u.default.createElement("br",null),u.default.createElement("div",{className:"config-warning-other-text"},"We highly recommend against configuring nodes in your cluster using the HTTP API and suggest using a configuration management tool for all configurations."))))}}]),t}(u.default.Component),h={DisabledConfigController:p};t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=n(2),l=a(r),s=n(208),u=a(s),c=n(388),d=a(c),f=n(69),p=a(f),h=n(29),m=l.default.RouteObject.extend({selectedHeader:"Configuration",routes:{"cluster/disabled":"showDisabledFeatureScreen"},apiUrl:function(){return[this.memberships.url("apiurl"),this.memberships.documentation]},showDisabledFeatureScreen:function(){var e=new u.default.ClusterNodes;return p.default.fetchNodes(),i.default.createElement(h.OnePaneSimpleLayout,{component:i.default.createElement(d.default.DisabledConfigController,null),endpoint:e.url("apiurl"),docURL:e.documentation,crumbs:[{name:"Config disabled"}]})}});u.default.RouteObjects=[m],t.default=u.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(596),t.default={initialize:function(){}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Badge=t.BadgeList=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),t.BadgeList=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getBadges=function(){return a.props.elements.map(function(e,t){return d.default.createElement(h,{label:this.props.getLabel(e),key:t,id:e,remove:this.removeBadge})}.bind(a))},a.removeBadge=function(e,t){a.props.removeBadge(e,t)},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("ul",{className:"component-badgelist"},this.getBadges())}}]),t}(d.default.Component));p.propTypes={elements:u.default.array.isRequired,removeBadge:u.default.func.isRequired},p.defaultProps={getLabel:function(e){return e},getId:function(e){return e}};var h=t.Badge=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.remove=function(e){e.preventDefault(),a.props.remove(a.props.label,a.props.id)},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("li",{className:"component-badge"},d.default.createElement("span",{className:"label label-info"},this.props.label),d.default.createElement("a",{href:"#",className:"label label-info remove-filter",onClick:this.remove,"data-bypass":"true"},"Ã—"))}}]),t}(d.default.Component);h.propTypes={label:u.default.string.isRequired,remove:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BulkActionComponent=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(19)),h=t.BulkActionComponent=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getMultiSelectOptions=function(){return a.props.hasSelectedItem?d.default.createElement("button",{onClick:a.props.removeItem,className:"fonticon "+a.props.bulkIcon,title:a.props.buttonTitle}):null},a.getPopupContent=function(){return d.default.createElement("ul",{className:"bulk-action-component-popover-actions"},d.default.createElement("li",{onClick:a.selectAll},d.default.createElement("i",{className:"icon fonticon-cancel"})," ",a.props.dropdownContentText))},a.selectAll=function(){a.refs.bulkActionPopover.hide(),a.props.selectAll()},a.getOverlay=function(){return d.default.createElement(p.OverlayTrigger,{ref:"bulkActionPopover",trigger:"click",placement:"bottom",rootClose:!0,overlay:d.default.createElement(p.Popover,{id:"bulk-action-component-popover",title:a.props.title},a.getPopupContent())},d.default.createElement("div",{className:"arrow-button"},d.default.createElement("i",{className:"fonticon fonticon-play"})))},a.getMasterSelector=function(){return d.default.createElement("div",{className:"bulk-action-component-panel"},d.default.createElement("input",{type:"checkbox",checked:a.props.isChecked,onChange:a.props.toggleSelect,disabled:a.props.disabled}),a.props.enableOverlay?d.default.createElement("div",{className:"separator"}):null,a.props.enableOverlay?a.getOverlay():null)},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("div",{className:"bulk-action-component"},d.default.createElement("div",{className:"bulk-action-component-selector-group"},this.getMasterSelector(),this.getMultiSelectOptions()))}}]),t}(d.default.Component);h.propTypes={hasSelectedItem:u.default.bool.isRequired,removeItem:u.default.func.isRequired,selectAll:u.default.func,toggleSelect:u.default.func.isRequired,isChecked:u.default.bool.isRequired,disabled:u.default.bool},h.defaultProps={disabled:!1,title:"Select rows that can be...",bulkIcon:"fonticon-trash",buttonTitle:"Delete all selected",dropdownContentText:"Deleted",enableOverlay:!1}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CodeEditorPanel=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(129)),f=n(211),p=n(214),h=["Missing name in function declaration.","['{a}'] is better written in dot notation."];(t.CodeEditorPanel=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{zenModeEnabled:!1,code:a.props.defaultCode}},a.getZenModeIcon=function(){if(a.props.allowZenMode)return u.default.createElement("span",{className:"fonticon fonticon-resize-full zen-editor-icon",title:"Enter Zen mode",onClick:a.enterZenMode})},a.getDocIcon=function(){if(a.props.docLink)return u.default.createElement("a",{className:"help-link","data-bypass":"true",href:a.props.docLink,target:"_blank"},u.default.createElement("i",{className:"icon-question-sign"}))},a.getZenModeOverlay=function(){if(a.state.zenModeEnabled)return u.default.createElement(p.ZenModeOverlay,{defaultCode:a.state.code,mode:a.props.mode,ignorableErrors:h,onExit:a.exitZenMode})},a.enterZenMode=function(){a.setState({zenModeEnabled:!0,code:a.refs.codeEditor.getValue()})},a.exitZenMode=function(e){a.setState({zenModeEnabled:!1}),a.getEditor().setValue(e)},a.getEditor=function(){return a.refs.codeEditor},a.getValue=function(){return a.getEditor().getValue()},a.beautify=function(e){a.setState({code:e}),a.getEditor().setValue(e)},a.update=function(){a.getEditor().setValue(a.state.code)},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){e.defaultCode!==this.props.defaultCode&&this.setState({code:e.defaultCode})}},{key:"render",value:function(){var e="control-group";return this.props.className&&(e+=" "+this.props.className),u.default.createElement("div",{className:e},u.default.createElement("label",null,u.default.createElement("span",null,this.props.title),this.getDocIcon(),this.getZenModeIcon()),u.default.createElement(d.CodeEditor,{id:this.props.id,ref:"codeEditor",mode:"javascript",defaultCode:this.state.code,showGutter:!0,ignorableErrors:h,setHeightToLineCount:!0,maxLines:1e4,blur:this.props.blur}),u.default.createElement(f.Beautify,{code:this.state.code,beautifiedCode:this.beautify}),this.getZenModeOverlay())}}]),t}(u.default.Component)).defaultProps={id:"code-editor",className:"",defaultCode:"",title:"",docLink:"",allowZenMode:!0,blur:function(){}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmButton=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),t.ConfirmButton=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getIcon=function(){return a.props.showIcon?d.default.createElement("i",{className:"icon "+a.props.customIcon}):null},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.buttonType,a=e.id,o=e.style,i=e.text,r=e.disabled;return d.default.createElement("button",{onClick:t,type:"submit",disabled:r,"data-id":this.props["data-id"],className:"btn save "+n,id:a,style:o},this.getIcon(),i)}}]),t}(d.default.Component));p.propTypes={showIcon:u.default.bool,id:u.default.string,customIcon:u.default.string,style:u.default.object,buttonType:u.default.string,"data-id":u.default.string,onClick:u.default.func,disabled:u.default.bool},p.defaultProps={disabled:!1,showIcon:!0,customIcon:"fonticon-ok-circled",buttonType:"btn-primary",style:{},"data-id":null,onClick:function(){}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Copy=t.destroyClipboard=t.initializeClipboard=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(529)),h=a(p),m=void 0,_=t.initializeClipboard=function(e,t){m=new h.default("#copy-"+e),m.on("success",function(){t()})},g=t.destroyClipboard=function(){m.destroy()},E=t.Copy=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"componentDidMount",value:function(){_(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"componentWillUnmount",value:function(){g()}},{key:"componentDidUpdate",value:function(){_(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"getClipboardElement",value:function(){return"icon"===this.props.displayType?d.default.createElement("i",{className:"fontawesome icon-paste"}):this.props.textDisplay}},{key:"getClipboardButton",value:function(){var e="input"===this.props.displayType?"btn copy-button":"copy clipboard-copy-element";return d.default.createElement("button",{className:e,"data-clipboard-text":this.props.text,title:this.props.title,id:"copy-"+this.props.uniqueKey},this.getClipboardElement())}},{key:"render",value:function(){return"input"===this.props.displayType?d.default.createElement("p",null,d.default.createElement("input",{type:"text",className:"input-xxlarge text-field-to-copy",readOnly:!0,value:this.props.text}),this.getClipboardButton()):this.getClipboardButton()}}]),t}(d.default.Component);E.defaultProps={displayType:"icon",textDisplay:"Copy",title:"Copy to clipboard",onClipboardClick:function(){}},E.propTypes={text:u.default.string.isRequired,displayType:u.default.oneOf(["icon","text","input"]),uniqueKey:u.default.string.isRequired,onClipboardClick:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteDatabaseModal=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(19)),h=n(70),m=a(h);(t.DeleteDatabaseModal=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={inputValue:"",disableSubmit:!0},a.close=function(e){e&&e.preventDefault(),a.setState({inputValue:"",disableSubmit:!0}),a.props.showHide({showModal:!1})},a.open=function(){a.props.showHide({showModal:!0})},a.getDatabaseName=function(){return a.props.modalProps.dbId.trim()},a.onInputChange=function(e){var t=e.target.value.trim();a.setState({inputValue:t}),a.setState({disableSubmit:t!==a.getDatabaseName()})},a.onDeleteClick=function(e){e.preventDefault(),m.default.deleteDatabase(a.getDatabaseName())},a.onInputKeypress=function(e){13===e.keyCode&&!0!==a.state.disableSubmit&&m.default.deleteDatabase(a.getDatabaseName())},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props.modalProps.isSystemDatabase,t=this.props.modalProps.showDeleteModal,n=this.props.modalProps.dbId,a=e?d.default.createElement("p",{style:{color:"#d14"},className:"warning"},d.default.createElement("b",null,"You are about to delete a system database, be careful!")):null;return d.default.createElement(p.Modal,{dialogClassName:"delete-db-modal",show:t,onHide:this.close},d.default.createElement(p.Modal.Header,{closeButton:!0},d.default.createElement(p.Modal.Title,null,"Confirm Deletion")),d.default.createElement(p.Modal.Body,null,a,d.default.createElement("p",null,"Warning: This action will permanently delete ",d.default.createElement("code",null,n),". To confirm the deletion of the database and all of the database's documents, you must enter the database's name."),d.default.createElement("input",{type:"text",className:"input-block-level",onKeyUp:this.onInputKeypress,onChange:this.onInputChange,autoFocus:!0})),d.default.createElement(p.Modal.Footer,null,d.default.createElement("a",{href:"#",onClick:this.close,"data-bypass":"true",className:"cancel-link"},"Cancel"),d.default.createElement("button",{disabled:this.state.disableSubmit,onClick:this.onDeleteClick,className:"btn btn-danger delete"},d.default.createElement("i",{className:"icon icon-trash"})," Delete Database")))}}]),t}(d.default.Component)).propTypes={showHide:u.default.func.isRequired,modalProps:u.default.object}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Document=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(2)),h=a(p),m=n(37),g=a(m),E=t.Document=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.onChange=function(e){e.preventDefault(),a.props.docChecked(a.props.doc.id,a.props.doc._rev)},a.getUrlFragment=function(){return a.props.children?d.default.createElement("div",{className:"doc-edit-symbol pull-right",title:"Edit document"},a.props.children):""},a.getExtensionIcons=function(){var e=h.default.getExtensions("DocList:icons");return _.map(e,function(e,t){return d.default.createElement(e,{doc:this.props.doc,key:t})},a)},a.getCheckbox=function(){return a.props.isDeletable?d.default.createElement("div",{className:"checkbox inline"},d.default.createElement("input",{id:"checkbox-"+a.props.docIdentifier,checked:a.props.checked,"data-checked":a.props.checked,type:"checkbox",onChange:a.onChange,className:"js-row-select"}),d.default.createElement("label",{onClick:a.onChange,className:"label-checkbox-doclist",htmlFor:"checkbox-"+a.props.docIdentifier})):d.default.createElement("div",{className:"checkbox-dummy"})},a.onClick=function(e){a.props.onClick(a.props.docIdentifier,a.props.doc,e)},a.getDocContent=function(){if(_.isEmpty(a.props.docContent))return null;var e=a.props.docContent,t=!1;if(a.props.truncate){var n=g.default.truncateDoc(a.props.docContent,a.props.maxRows);t=n.isTruncated,e=n.content}return d.default.createElement("div",{className:"doc-data"},d.default.createElement("pre",{className:"prettyprint"},e),t?d.default.createElement("div",{className:"doc-content-truncated"},"(truncated)"):null)},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("div",{"data-id":this.props.docIdentifier,className:"doc-row"},d.default.createElement("div",{className:"custom-inputs"},this.getCheckbox()),d.default.createElement("div",{className:"doc-item",onClick:this.onClick},d.default.createElement("header",null,d.default.createElement("span",{className:"header-keylabel"},this.props.keylabel),d.default.createElement("span",{className:"header-doc-id"},this.props.header?'"'+this.props.header+'"':null),this.getUrlFragment(),d.default.createElement("div",{className:"doc-item-extension-icons pull-right"},this.getExtensionIcons())),this.getDocContent()),d.default.createElement("div",{className:"clearfix"}))}}]),t}(d.default.Component);E.propTypes={docIdentifier:u.default.string.isRequired,docChecked:u.default.func.isRequired,truncate:u.default.bool,maxRows:u.default.number},E.defaultProps={truncate:!0,maxRows:500}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CustomMenu=t.MenuDropDown=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(19)),f=n(198),p=a(f);(t.MenuDropDown=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.createSectionLinks=function(e){return e?e.map(function(e,t){return a.createEntry(e,t)}):null},a.createEntry=function(e,t){return u.default.createElement("li",{key:t},u.default.createElement("a",{className:e.icon?"icon "+e.icon:"","data-bypass":e.external?"true":"",href:e.url,onClick:e.onClick,target:e.external?"_blank":""},e.title))},a.createSectionTitle=function(e){return e?u.default.createElement("li",{className:"header-label"},e):null},a.createSection=function(){return a.props.links.map(function(e,t){return e.title&&e.links?[a.createSectionTitle(e.title),a.createSectionLinks(e.links)]:a.createEntry(e,"el"+t)})},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e=this.createSection();return u.default.createElement(d.Dropdown,{id:"dropdown-menu"},u.default.createElement(h,{bsRole:"toggle",icon:this.props.icon}),u.default.createElement(m,{bsRole:"menu",className:"arrow"},e),"}")}}]),t}(u.default.Component)).defaultProps={icon:"fonticon-plus-circled"};var h=function(e){function t(e,n){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.handleClick=a.handleClick.bind(a),a}return r(t,e),l(t,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){return u.default.createElement("a",{className:"dropdown-toggle icon "+this.props.icon,style:{fontSize:"1rem",boxShadow:"0px 0px 0px"},onClick:this.handleClick},this.props.children)}}]),t}(u.default.Component),m=t.CustomMenu=function(e){function t(e,n){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.open,a=e.onClose;return u.default.createElement(p.default,{disabled:!n,onRootClose:a},u.default.createElement("ul",{className:"dropdown-menu arrow",role:"menu","aria-labelledby":"dLabel"},t))}}]),t}(u.default.Component)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PaddedBorderedBox=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s);a(n(10)),t.PaddedBorderedBox=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"bordered-box"},u.default.createElement("div",{className:"padded-box"},this.props.children))}}]),t}(u.default.Component)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshBtn=t.Polling=t.resetPollCounter=t.clearPollCounter=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=void a(f),h=t.clearPollCounter=function(){p&&window.clearInterval(p)},m=t.resetPollCounter=function(e,t){h(),p=window.setInterval(t,e)},_=function(e,t,n,a){var o=parseInt(e,10);if(0===o||o>n||o<a)return"off";if(o<60&&"minute"===t)return o+" seconds";var i=o;return"minute"===t&&(i=Math.floor(o/60)),i+" "+(1===i?t:t+"s")},g=t.Polling=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={value:n.props.startValue},n}return r(t,e),l(t,[{key:"componentDidMount",value:function(){this.setPollingCounter(this.state.value)}},{key:"componentWillUnmount",value:function(){h()}},{key:"setPollingCounter",value:function(e){var t=this.props,n=t.min,a=t.max,o=t.onPoll;if(this.setState({value:e}),0===e||e<n||e>a)return void h();m(1e3*e,function(){return o()})}},{key:"updatePollingFreq",value:function(e){this.setPollingCounter(parseInt(e.target.value,10))}},{key:"componentWillReceiveProps",value:function(e){this.props.startValue!==e.startValue&&this.setPollingCounter(e.startValue)}},{key:"render",value:function(){var e=this.props,t=e.stepSize,n=e.min,a=e.max,o=e.valueUnits,i=this.state.value,r=_(i,o,a,n),l="off"===r?"faux__polling-info-value--off":"faux__polling-info-value--active";return d.default.createElement("div",{className:"faux__polling"},d.default.createElement("div",{className:"faux__polling-info"},d.default.createElement("span",{className:"faux__polling-info-text"},"Polling Interval"),d.default.createElement("span",{className:"faux__polling-info-value faux__polling-info-value "+l},r)),d.default.createElement("input",{onChange:this.updatePollingFreq.bind(this),className:"faux__polling-info-slider",type:"range",value:i,min:n,max:a+t,step:t}))}}]),t}(d.default.Component);g.defaultProps={startValue:0,min:0,valueUnits:"minute"},g.propTypes={startValue:u.default.number,valueUnits:u.default.string,min:u.default.number,max:u.default.number.isRequired,stepSize:u.default.number.isRequired,onPoll:u.default.func.isRequired},(t.RefreshBtn=function(e){var t=e.refresh;return d.default.createElement("div",{className:"faux__refresh-btn"},d.default.createElement("a",{className:"faux__refresh-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},d.default.createElement("i",{className:"faux__refresh-icon fonticon-arrows-cw"}),"Refresh"))}).propTypes={refresh:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StyledSelect=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c);a(n(10)),(t.StyledSelect=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("div",{className:"styled-select"},d.default.createElement("label",{htmlFor:this.props.selectId},d.default.createElement("i",{className:"fonticon-down-dir styled-select-icon"}),d.default.createElement("i",{className:"fonticon-down-dir styled-select-hover-icon"}),d.default.createElement("select",{value:this.props.selectValue,id:this.props.selectId,className:this.props.selectValue,onChange:this.props.selectChange},this.props.selectContent)))}}]),t}(d.default.Component)).propTypes={selectValue:u.default.string.isRequired,selectId:u.default.string.isRequired,selectChange:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TabWindowWrapper=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),u=a(s),c=n(1),d=a(c),f=n(0),p=a(f),h=n(95);(t.TabWindowWrapper=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.selectedTab,n=e.tabs,a=n.map(function(e,n){return p.default.createElement(h.TabElement,{key:n,selected:e.name===t,text:e.name,onChange:function(){u.default.navigate(e.route,{redirect:!0})},iconClass:""})}),o=n.reduce(function(e,n){return n.name===t?n:e},{});return o.component?p.default.createElement("div",{className:"tab__wrapper"},p.default.createElement(h.TabElementWrapper,null,a),p.default.createElement("div",{className:"tab__container"},p.default.createElement(o.component,null))):null}}]),t}(p.default.Component)).propTypes={tabs:d.default.array.isRequired,selectedTab:d.default.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleHeaderButton=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s);a(n(10)),(t.ToggleHeaderButton=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.iconDefaultClass,n=e.fonticon,a=e.innerClasses,o=e.selected,i=e.containerClasses,r=e.title,l=e.disabled,s=e.text,c=e.toggleCallback,d=e.active,f=o||d?"js-headerbar-togglebutton-selected":"";return u.default.createElement("button",{title:r,disabled:l,onClick:c,className:"button "+i+" "+f},u.default.createElement("i",{className:t+" "+n+" "+a}),u.default.createElement("span",null,s))}}]),t}(u.default.Component)).defaultProps={innerClasses:"",fonticon:"",containerClasses:"",selected:!1,title:"",disabled:!1,toggleCallback:null,text:"",iconDefaultClass:"icon"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TrayWrapper=t.connectToStores=t.TrayContents=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),c=a(u),d=n(0),f=a(d),p=n(10),h=a(p),m=n(19),_=n(194);(t.TrayContents=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.defaultProps=function(){return{onEnter:function(){},container:a}},a.getChildren=function(e){var t=e[0].style,n="tray show-tray "+a.props.className;return f.default.createElement("div",{key:"1",id:a.props.id,style:{opacity:t.opacity,top:t.top+"px"},className:n},a.props.children)},a.willEnter=function(){return{opacity:(0,_.spring)(1),top:(0,_.spring)(55)}},a.willLeave=function(){return{opacity:(0,_.spring)(0),top:(0,_.spring)(30)}},a.getDefaultStyles=function(){return[{key:"1",style:{opacity:0,top:30}}]},a.getStyles=function(e){return e?e.map(function(e){return{key:"1",style:e.style}}):[{key:"1",style:a.willEnter()}]},r=n,i(a,r)}return r(t,e),s(t,[{key:"render",value:function(){var e=this;return f.default.createElement(m.Overlay,{show:this.props.contentVisible,onHide:this.props.closeTray,placement:"bottom",container:this.props.container,rootClose:!0,target:function(){return h.default.findDOMNode(e.refs.target)},onEnter:this.props.onEnter},f.default.createElement(_.TransitionMotion,{defaultStyles:this.getDefaultStyles(),styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren))}}]),t}(f.default.Component)).propTypes={contentVisible:c.default.bool.isRequired,closeTray:c.default.func.isRequired,onEnter:c.default.func,container:c.default.object},t.connectToStores=function(e,t,n){return function(a){function u(){var e,t,a,r;o(this,u);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return t=a=i(this,(e=u.__proto__||Object.getPrototypeOf(u)).call.apply(e,[this].concat(s))),a.state=n(a.props),a.onChange=function(){a.setState(n(a.props))},a.handleStoresChanged=function(){a.setState(n(a.props))},r=t,i(a,r)}return r(u,a),s(u,[{key:"componentDidMount",value:function(){var e=this;t.forEach(function(t){t.on("change",e.onChange,e)})}},{key:"componentWillUnmount",value:function(){t.forEach(function(e){e.off("change",this.onChange)}.bind(this))}},{key:"render",value:function(){return f.default.createElement(e,l({},this.state,this.props))}}]),u}(f.default.Component)},(t.TrayWrapper=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.renderChildren=function(){return f.default.Children.map(a.props.children,function(e){var t={};return Object.keys(a.props).filter(function(e){return a.props.hasOwnProperty(e)}).map(function(e){return t[e]=a.props[e]}),f.default.cloneElement(e,t)})},r=n,i(a,r)}return r(t,e),s(t,[{key:"render",value:function(){return f.default.createElement("div",null,this.renderChildren())}}]),t}(f.default.Component)).defaultProps={className:""}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(408),l=a(r);n(597),l.default.initialize=function(){i.default.addHeaderLink({title:"Configuration",href:"#/_config",icon:"fonticon-cog",className:"config"})},t.default=l.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=a(f),h=n(409),m=a(h),g=n(216),E=a(g),b=n(19),y=n(15),v=a(y),N=n(55),D=a(N),O=m.default.configStore,S=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{options:O.getOptions(),loading:O.isLoading()}},a.onChange=function(){a.setState(a.getStoreState())},a.saveOption=function(e){E.default.saveOption(a.props.node,e)},a.deleteOption=function(e){E.default.deleteOption(a.props.node,e)},a.editOption=function(e){E.default.editOption(e)},a.cancelEdit=function(){E.default.cancelEdit()},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){O.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){O.off("change",this.onChange)}},{key:"render",value:function(){return this.state.loading?d.default.createElement("div",{className:"view"},d.default.createElement(v.default.LoadLines,null)):d.default.createElement(T,{onDeleteOption:this.deleteOption,onSaveOption:this.saveOption,onEditOption:this.editOption,onCancelEdit:this.cancelEdit,options:this.state.options})}}]),t}(d.default.Component),T=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.createOptions=function(){return _.map(a.props.options,function(e){return d.default.createElement(C,{option:e,onDelete:a.props.onDeleteOption,onSave:a.props.onSaveOption,onEdit:a.props.onEditOption,onCancelEdit:a.props.onCancelEdit,key:e.sectionName+"/"+e.optionName})})},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e=this.createOptions();return d.default.createElement("table",{className:"config table table-striped table-bordered"},d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",{id:"config-section",width:"22%"},"Section"),d.default.createElement("th",{id:"config-option",width:"22%"},"Option"),d.default.createElement("th",{id:"config-value"},"Value"),d.default.createElement("th",{id:"config-trash"}))),d.default.createElement("tbody",null,e))}}]),t}(d.default.Component),C=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.onSave=function(e){var t=a.props.option;t.value=e,a.props.onSave(t)},a.onDelete=function(){a.props.onDelete(a.props.option)},a.onEdit=function(){a.props.onEdit(a.props.option)},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("tr",{className:"config-item"},d.default.createElement("th",null,this.props.option.header&&this.props.option.sectionName),d.default.createElement("td",null,this.props.option.optionName),d.default.createElement(w,{value:this.props.option.value,editing:this.props.option.editing,onSave:this.onSave,onEdit:this.onEdit,onCancelEdit:this.props.onCancelEdit}),d.default.createElement(I,{optionName:this.props.option.optionName,sectionName:this.props.option.sectionName,onDelete:this.onDelete}))}}]),t}(d.default.Component),w=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={value:a.props.value,editing:a.props.editing,saving:a.props.saving},a.onChange=function(e){a.setState({value:e.target.value})},a.onSave=function(){a.state.value!==a.props.value?(a.setState({saving:!0}),a.props.onSave(a.state.value)):a.props.onCancelEdit()},a.getButtons=function(){return a.state.saving?null:d.default.createElement("span",null,d.default.createElement("button",{className:"btn btn-primary fonticon-ok-circled btn-small btn-config-save",onClick:a.onSave.bind(a)}),d.default.createElement("button",{className:"btn fonticon-cancel-circled btn-small btn-config-cancel",onClick:a.props.onCancelEdit}))},r=n,i(a,r)}return r(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){this.props.value!==e.value&&this.setState({saving:!1})}},{key:"render",value:function(){return this.props.editing?d.default.createElement("td",null,d.default.createElement("div",{className:"config-value-form"},d.default.createElement("input",{onChange:this.onChange.bind(this),defaultValue:this.props.value,disabled:this.state.saving,autoFocus:!0,type:"text",className:"config-value-input"}),this.getButtons())):d.default.createElement("td",{className:"config-show-value",onClick:this.props.onEdit},this.props.value)}}]),t}(d.default.Component);w.defaultProps={value:"",editing:!1,saving:!1,onSave:function(){return null},onEdit:function(){return null},onCancelEdit:function(){return null}};var I=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={show:!1},a.onDelete=function(){a.props.onDelete()},a.showModal=function(){a.setState({show:!0})},a.hideModal=function(){a.setState({show:!1})},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("td",{className:"text-center config-item-trash config-delete-value",onClick:this.showModal.bind(this)},d.default.createElement("i",{className:"icon icon-trash"}),d.default.createElement(D.default.ConfirmationModal,{text:"Are you sure you want to delete "+this.props.sectionName+"/"+this.props.optionName+"?",onClose:this.hideModal.bind(this),onSubmit:this.onDelete.bind(this),visible:this.state.show}))}}]),t}(d.default.Component),A=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.addOption=function(e){E.default.addOption(a.props.node,e)},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){return d.default.createElement(R,{onAdd:this.addOption})}}]),t}(d.default.Component),R=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getInitialState(),n}return r(t,e),l(t,[{key:"getInitialState",value:function(){return{sectionName:"",optionName:"",value:"",show:!1}}},{key:"isInputValid",value:function(){return""!==this.state.sectionName&&""!==this.state.optionName&&""!==this.state.value}},{key:"updateSectionName",value:function(e){this.setState({sectionName:e.target.value})}},{key:"updateOptionName",value:function(e){this.setState({optionName:e.target.value})}},{key:"updateValue",value:function(e){this.setState({value:e.target.value})}},{key:"reset",value:function(){this.setState(this.getInitialState())}},{key:"onAdd",value:function(){if(this.isInputValid()){var e={sectionName:this.state.sectionName,optionName:this.state.optionName,value:this.state.value};this.setState({show:!1}),this.props.onAdd(e)}}},{key:"togglePopover",value:function(){this.setState({show:!this.state.show})}},{key:"hidePopover",value:function(){this.setState({show:!1})}},{key:"getPopover",value:function(){return d.default.createElement(b.Popover,{className:"tray",id:"add-option-popover",title:"Add Option"},d.default.createElement("input",{className:"input-section-name",onChange:this.updateSectionName.bind(this),type:"text",name:"section",placeholder:"Section",autoComplete:"off",autoFocus:!0}),d.default.createElement("input",{className:"input-option-name",onChange:this.updateOptionName.bind(this),type:"text",name:"name",placeholder:"Name"}),d.default.createElement("input",{className:"input-value",onChange:this.updateValue.bind(this),type:"text",name:"value",placeholder:"Value"}),d.default.createElement("a",{className:"btn btn-create",onClick:this.onAdd.bind(this)},"Create"))}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{id:"add-option-panel"},d.default.createElement(b.Button,{id:"add-option-button",onClick:this.togglePopover.bind(this),ref:"target"},d.default.createElement("i",{className:"icon icon-plus header-icon"}),"Add Option"),d.default.createElement(b.Overlay,{show:this.state.show,onHide:this.hidePopover.bind(this),placement:"bottom",rootClose:!0,target:function(){return p.default.findDOMNode(e.refs.target)}},this.getPopover()))}}]),t}(d.default.Component),P=function(e){var t=e.active,n=e.link,a=e.title;return d.default.createElement("li",{className:t?"active":""},d.default.createElement("a",{href:"#"+n},a))};P.propTypes={active:u.default.bool.isRequired,link:u.default.string.isRequired,icon:u.default.string,title:u.default.string.isRequired};var L=function(e){var t=e.sidebarItems,n=e.selectedTab,a=t.map(function(e){return d.default.createElement(P,{key:e.title,active:n===e.title,title:e.title,link:e.link})});return d.default.createElement("nav",{className:"sidenav"},d.default.createElement("ul",{className:"nav nav-list"},a))};t.default={Tabs:L,ConfigTableController:S,ConfigTable:T,ConfigOption:C,ConfigOptionValue:w,ConfigOptionTrash:I,AddOptionController:A,AddOptionButton:R}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigLayout=t.ConfigHeader=void 0;var o=n(0),i=a(o),r=n(406),l=a(r),s=n(413),u=a(s),c=n(96),d=n(77),f=n(29),p=t.ConfigHeader=function(e){var t=e.node,n=e.crumbs,a=e.docURL,o=e.endpoint;return i.default.createElement("header",{className:"two-panel-header"},i.default.createElement("div",{className:"flex-layout flex-row"},i.default.createElement("div",{id:"breadcrumbs",className:"faux__config-breadcrumbs"},i.default.createElement(c.Breadcrumbs,{crumbs:n})),i.default.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},i.default.createElement("div",{id:"react-headerbar",className:"flex-body"}," "),i.default.createElement("div",{id:"right-header",className:"flex-fill"},i.default.createElement(l.default.AddOptionController,{node:t})),i.default.createElement(f.ApiBarWrapper,{docURL:a,endpoint:o}),i.default.createElement("div",{id:"notification-center-btn",className:"flex-fill"},i.default.createElement(d.NotificationCenterButton,null)))))},h=t.ConfigLayout=function(e){var t=e.showCors,n=e.docURL,a=e.node,o=e.endpoint,r=e.crumbs,s=[{title:"Main config",link:"_config/"+a},{title:"CORS",link:"_config/"+a+"/cors"}],c=t?"CORS":"Main config",d=t?i.default.createElement(u.default.CORSContainer,{node:a,url:o}):i.default.createElement(l.default.ConfigTableController,{node:a});return i.default.createElement("div",{id:"dashboard",className:"with-sidebar"},i.default.createElement(p,{docURL:n,endpoint:o,node:a,crumbs:r}),i.default.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},i.default.createElement("aside",{id:"sidebar-content",className:"scrollable"},i.default.createElement(l.default.Tabs,{sidebarItems:s,selectedTab:c})),i.default.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},i.default.createElement("div",{id:"dashboard-upper-content"}),i.default.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},d),i.default.createElement("div",{id:"footer"}))))};t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=n(2),l=a(r),s=n(218),u=a(s),c=n(69),d=a(c),f=n(216),p=a(f),h=n(407),m=a(h),_=l.default.RouteObject.extend({selectedHeader:"Configuration",routes:{_config:"checkNodes"},crumbs:[{name:"Config disabled"}],checkNodes:function(){d.default.navigateToNodeBasedOnNodeCount("/_config/")}}),g=l.default.RouteObject.extend({roles:["_admin"],selectedHeader:"Configuration",apiUrl:function(){return[this.configs.url(),this.configs.documentation]},routes:{"_config/:node":"configForNode","_config/:node/cors":"configCorsForNode"},initialize:function(e,t){var n=t[0];this.configs=new u.default.ConfigModel({node:n})},configForNode:function(e){return p.default.fetchAndEditConfig(e),i.default.createElement(m.default,{node:e,docURL:this.configs.documentation,endpoint:this.configs.url(),crumbs:[{name:"Config"}],showCors:!1})},configCorsForNode:function(e){return i.default.createElement(m.default,{node:e,docURL:this.configs.documentation,endpoint:this.configs.url(),crumbs:[{name:"Config"}],showCors:!0})}});u.default.RouteObjects=[g,_],t.default=u.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(217),l=a(r),s=i.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._sections={},this._loading=!0,this._editSectionName=null,this._editOptionName=null},editConfig:function(e){this._sections=e,this._loading=!1,this._editSectionName=null,this._editOptionName=null},getOptions:function(){var e=_.sortBy(_.map(this._sections,function(e,t){return{sectionName:t,options:this.mapSection(e,t)}}.bind(this)),function(e){return e.sectionName});return _.flatten(_.map(e,function(e){return e.options}))},mapSection:function(e,t){var n=this,a=_.sortBy(_.map(e,function(e,a){return{editing:n.isEditing(t,a),sectionName:t,optionName:a,value:e}}),function(e){return e.optionName});return a[0].header=!0,a},editOption:function(e,t){this._editSectionName=e,this._editOptionName=t},isEditing:function(e,t){return e==this._editSectionName&&t==this._editOptionName},stopEditing:function(){this._editOptionName=null,this._editSectionName=null},setLoading:function(){this._loading=!0},isLoading:function(){return this._loading},saveOption:function(e,t,n){this._sections[e]||(this._sections[e]={}),this._sections[e][t]=n||!0},deleteOption:function(e,t){this._sections[e]&&(delete this._sections[e][t],0==Object.keys(this._sections[e]).length&&delete this._sections[e])},dispatch:function(e){if(e.options)var t=e.options.sectionName,n=e.options.optionName,a=e.options.value;switch(e.type){case l.default.EDIT_CONFIG:this.editConfig(e.options.sections,e.options.node);break;case l.default.LOADING_CONFIG:this.setLoading();break;case l.default.EDIT_OPTION:this.editOption(t,n);break;case l.default.CANCEL_EDIT:this.stopEditing();break;case l.default.OPTION_SAVE_SUCCESS:this.saveOption(t,n,a),this.stopEditing();break;case l.default.OPTION_ADD_SUCCESS:this.saveOption(t,n,a);break;case l.default.OPTION_DELETE_SUCCESS:this.deleteOption(t,n)}this.triggerChange()}}),u=new s;u.dispatchToken=i.default.dispatcher.register(u.dispatch.bind(u)),t.default={configStore:u}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeOrigins=t.saveCors=t.hideDomainDeleteConfirmation=t.showDomainDeleteConfirmation=t.loadCORSOptions=t.hideLoadingBars=t.showLoadingBars=t.fetchAndLoadCORSOptions=void 0;var i=n(2),r=o(i),l=n(219),s=o(l),u=n(411),c=a(u),d=(t.fetchAndLoadCORSOptions=function(e,t){return function(n){var a=c.fetchCORSConfig(e),o=c.fetchHttpdConfig(e);r.default.Promise.join(a,o,function(e,a){var o=f({origins:e.origins,corsEnabled:"true"===a.enable_cors,node:t});n(o)}).catch(function(e){r.default.addNotification({msg:"Could not load CORS settings.  "+h(e),type:"error"})})}},t.showLoadingBars=function(){return{type:s.default.CORS_SET_IS_LOADING,isLoading:!0}},t.hideLoadingBars=function(){return{type:s.default.CORS_SET_IS_LOADING,isLoading:!1}}),f=t.loadCORSOptions=function(e){return{type:s.default.EDIT_CORS,options:e,isLoading:!1}},p=(t.showDomainDeleteConfirmation=function(e){return{type:s.default.CORS_SHOW_DELETE_DOMAIN_MODAL,domainToDelete:e}},t.hideDomainDeleteConfirmation=function(){return{type:s.default.CORS_HIDE_DELETE_DOMAIN_MODAL}}),h=(t.saveCors=function(e,t){return function(n){var a=[];return a.push(c.updateEnableCorsToHttpd(e,t.node,t.corsEnabled)),t.corsEnabled&&(a.push(c.updateCorsOrigins(e,t.node,m(t.origins))),a.push(c.updateCorsCredentials(e,t.node)),a.push(c.updateCorsHeaders(e,t.node)),a.push(c.updateCorsMethods(e,t.node))),r.default.Promise.all(a).then(function(){r.default.addNotification({msg:"CORS settings updated.",type:"success",clear:!0}),n(f(t))}).catch(function(e){r.default.addNotification({msg:"Error! Could not save your CORS settings. Please try again. "+h(e),type:"error",clear:!0}),n(p()),n(d())})}},function(e){return"Reason: "+(e&&e.message||"n/a")}),m=t.sanitizeOrigins=function(e){return _.isEmpty(e)?"":e.join(",")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCorsMethods=t.updateCorsHeaders=t.updateCorsCredentials=t.updateCorsOrigins=t.updateEnableCorsToHttpd=t.fetchHttpdConfig=t.fetchCORSConfig=void 0,n(68);var a=(t.fetchCORSConfig=function(e){var t=e+"/cors";return fetch(t,{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",method:"GET"}).then(function(e){return e.json()}).then(function(e){if(e.error)throw new Error(e.reason);return{origins:e.origins?e.origins.split(","):[],methods:e.methods,credentials:e.credentials,headers:e.headers}})},t.fetchHttpdConfig=function(e){var t=e+"/httpd";return fetch(t,{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",method:"GET"}).then(function(e){return e.json()}).then(function(e){if(e.error)throw new Error(e.reason);return e})},t.updateEnableCorsToHttpd=function(e,t,n){if(!t)throw new Error("node not set");var a=e+"/httpd/enable_cors";return fetch(a,{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify(n.toString())}).then(function(e){return e.json()}).then(function(e){if(e.error)throw new Error(e.reason);return e})},t.updateCorsOrigins=function(e,t,n){return a(e,t,"origins",n)},t.updateCorsCredentials=function(e,t){return a(e,t,"credentials","true")},t.updateCorsHeaders=function(e,t){return a(e,t,"headers","accept, authorization, content-type, origin, referer")},t.updateCorsMethods=function(e,t){return a(e,t,"methods","GET, PUT, POST, HEAD, DELETE")},function(e,t,n,a){if(!t)throw new Error("node not set");var o=e+"/cors/"+n;return fetch(o,{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){if(e.error)throw new Error(e.reason);return e})})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o);n(598);var r=n(415),l=a(r),s=i.default.addon();s.initialize=function(){},i.default.addReducers({cors:l.default}),t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(414),i=a(o),r=n(220),l=a(r),s=n(221),u=a(s),c=n(224),d=a(c),f=n(223),p=a(f),h=n(222),m=a(h);t.default={CORSContainer:i.default,CORSScreen:l.default,OriginInput:u.default,Origins:d.default,OriginTable:p.default,OriginRow:m.default}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(26),i=n(220),r=a(i),l=n(410),s=function(e){var t=e.cors;return{node:t.node,corsEnabled:t.corsEnabled,isAllOrigins:t.isAllOrigins,isLoading:t.isLoading,origins:t.origins,deleteDomainModalVisible:t.deleteDomainModalVisible,domainToDelete:t.domainToDelete}},u=function(e,t){return{saveCORS:function(n){e((0,l.showLoadingBars)()),e((0,l.saveCors)(t.url,n))},fetchAndLoadCORSOptions:function(){e((0,l.fetchAndLoadCORSOptions)(t.url,t.node))},showDeleteDomainConfirmation:function(t){e((0,l.showDomainDeleteConfirmation)(t))},hideDeleteDomainConfirmation:function(){e((0,l.hideDomainDeleteConfirmation)())}}},c=(0,o.connect)(s,u)(r.default);t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case l.default.EDIT_CORS:var n=t.options;return i({},e,{isLoading:!1,node:n.node,corsEnabled:n.corsEnabled,isAllOrigins:_.include(n.origins,"*"),origins:n.origins,deleteDomainModalVisible:!1,domainToDelete:""});case l.default.CORS_SHOW_DELETE_DOMAIN_MODAL:return i({},e,{deleteDomainModalVisible:!0,domainToDelete:t.domainToDelete});case l.default.CORS_HIDE_DELETE_DOMAIN_MODAL:return i({},e,{deleteDomainModalVisible:!1,domainToDelete:""});case l.default.CORS_SET_IS_LOADING:return i({},e,{isLoading:t.isLoading});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=o;var r=n(219),l=a(r),s={corsEnabled:!1,origins:[],isAllOrigins:!1,configChanged:!1,shouldSaveChange:!1,node:"",isLoading:!0,deleteDomainModalVisible:!1,domainToDelete:""}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),u=a(s),c=n(1),d=a(c),f=n(0),p=a(f),h=n(10),m=a(h),g=n(15),E=a(g),b=n(215),y=a(b),v=n(70),N=a(v),D=n(55),O=a(D),S=n(228),T=a(S),C=n(226),w=a(C),I=n(32),A=a(I),R=n(19),P=T.default.databasesStore,L=y.default.deleteDbModalStore,k=E.default.DeleteDatabaseModal,M=E.default.ToggleHeaderButton,x=E.default.TrayContents,j=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{dbList:P.getDbList(),loading:P.isLoading(),showDeleteDatabaseModal:L.getShowDeleteDatabaseModal()}},a.onChange=function(){a.setState(a.getStoreState())},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){P.on("change",this.onChange,this),L.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){P.off("change",this.onChange,this),L.off("change",this.onChange,this)}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.dbList;return p.default.createElement(U,{showDeleteDatabaseModal:this.state.showDeleteDatabaseModal,dbList:n,loading:t})}}]),t}(p.default.Component),U=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.createRows=function(e){return e.map(function(e,t){return p.default.createElement(V,{item:e,key:t})})},a.getExtensionColumns=function(){var e=u.default.getExtensions("DatabaseTable:head");return _.map(e,function(e,t){return p.default.createElement(e,{key:t})})},a.showDeleteDatabaseModal=function(){N.default.showDeleteDatabaseModal({showDeleteModal:!a.props.showDeleteDatabaseModal.showDeleteModal})},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){if(this.props.loading)return p.default.createElement("div",{className:"view"},p.default.createElement(E.default.LoadLines,null));var e=this.createRows(this.props.dbList);return p.default.createElement("div",{className:"view"},p.default.createElement(k,{showHide:this.showDeleteDatabaseModal,modalProps:this.props.showDeleteDatabaseModal}),p.default.createElement("table",{className:"table table-striped fauxton-table-list databases"},p.default.createElement("thead",null,p.default.createElement("tr",null,p.default.createElement("th",null,"Name"),p.default.createElement("th",null,"Size"),p.default.createElement("th",null,"# of Docs"),this.getExtensionColumns(),p.default.createElement("th",null,"Actions"))),p.default.createElement("tbody",null,e)))}}]),t}(p.default.Component);U.propTypes={dbList:d.default.array.isRequired,showDeleteDatabaseModal:d.default.object.isRequired,loading:d.default.bool.isRequired};var V=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getExtensionColumns=function(e){var t=u.default.getExtensions("DatabaseTable:databaseRow");return _.map(t,function(t,n){return p.default.createElement(t,{row:e,key:n})})},a.showDeleteDatabaseModal=function(e){N.default.showDeleteDatabaseModal({showDeleteModal:!0,dbId:e})},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=e.encodedId,n=e.id,a=e.url,o=e.dataSize,i=e.docCount,r=e.docDelCount,l=e.showTombstoneWarning,s=e.failed,u=l?p.default.createElement(B,{docCount:i,docDelCount:r}):null;return s?p.default.createElement("tr",null,p.default.createElement("td",{"data-name":"database-load-fail-name"},n),p.default.createElement("td",{colSpan:"4",className:"database-load-fail"},"This database failed to load.")):p.default.createElement("tr",null,p.default.createElement("td",null,p.default.createElement("a",{href:a},n)),p.default.createElement("td",null,o),p.default.createElement("td",null,i," ",u),this.getExtensionColumns(e),p.default.createElement("td",{className:"database-actions"},p.default.createElement("a",{className:"db-actions btn fonticon-replicate set-replication-start",title:"Replicate "+name,href:"#/replication/_create/"+t}),p.default.createElement("a",{className:"db-actions btn icon-lock set-permissions",title:"Set permissions for "+name,href:"#/database/"+t+"/permissions"}),p.default.createElement("a",{className:"db-actions btn icon-trash",onClick:this.showDeleteDatabaseModal.bind(this,n,t),title:"Delete "+n,"data-bypass":"true"})))}}]),t}(p.default.Component);V.propTypes={row:d.default.object};var B=function(e){var t=e.docCount,n=e.docDelCount,a="This database has just "+t+" docs and "+n+" deleted docs",o=p.default.createElement(R.Tooltip,{id:"graveyard-tooltip"},a);return p.default.createElement(R.OverlayTrigger,{placement:"top",overlay:o},p.default.createElement("i",{className:"js-db-graveyard icon icon-exclamation-sign",title:a}))},F=function(){return p.default.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},p.default.createElement(H,{loadOptions:w.default.fetchAllDbsWithKey}),p.default.createElement(q,null))},q=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={isPromptVisible:!1,databaseName:""},a.onTrayToggle=function(){a.setState({isPromptVisible:!a.state.isPromptVisible})},a.closeTray=function(){a.setState({isPromptVisible:!1})},a.focusInput=function(){m.default.findDOMNode(a.refs.newDbName).focus()},a.onKeyUpInInput=function(e){13===e.which&&a.onAddDatabase()},a.onChange=function(e){a.setState({databaseName:e.target.value})},a.onAddDatabase=function(){w.default.createNewDatabase(a.state.databaseName)},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){return p.default.createElement("div",null,p.default.createElement(M,{selected:this.state.isPromptVisible,toggleCallback:this.onTrayToggle,containerClasses:"header-control-box add-new-database-btn",title:"Create Database",fonticon:"fonticon-new-database",text:"Create Database"}),p.default.createElement(x,{className:"new-database-tray",contentVisible:this.state.isPromptVisible,closeTray:this.closeTray,onEnter:this.focusInput},p.default.createElement("span",{className:"add-on"},"Create Database"),p.default.createElement("input",{id:"js-new-database-name",ref:"newDbName",type:"text",value:this.state.databaseName,onChange:this.onChange,onKeyUp:this.onKeyUpInInput,className:"input-xxlarge",placeholder:"Name of database"}),p.default.createElement("a",{className:"btn",id:"js-create-database",onClick:this.onAddDatabase},"Create")))}}]),t}(p.default.Component),H=function(e){var t=e.loadOptions;return p.default.createElement("div",{"data-name":"jump-to-db",className:"faux-header__searchboxwrapper"},p.default.createElement("div",{className:"faux-header__searchboxcontainer"},p.default.createElement(A.default.Async,{placeholder:"Database name",loadOptions:t,clearable:!1,onChange:function(e){var t=e.value;w.default.jumpToDatabase(t)}})))};H.propTypes={loadOptions:d.default.func.isRequired};var G=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(e){var t=e.store;return{totalAmountOfDatabases:t.getTotalAmountOfDatabases(),page:t.getPage()}},a.onChange=function(){a.setState(a.getStoreState(a.props))},a.state=a.getStoreState(a.props),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.store.on("change",this.onChange,this)}},{key:"componentWillReceiveProps",value:function(e){this.setState(this.getStoreState(e)),e.store.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){this.props.store.off("change",this.onChange,this)}},{key:"render",value:function(){var e=this.state,t=e.page,n=e.totalAmountOfDatabases,a="#/"+this.props.linkPath+"?page=",o=1+(t-1)*u.default.constants.MISC.DEFAULT_PAGE_SIZE,i=Math.min(n,t*u.default.constants.MISC.DEFAULT_PAGE_SIZE);return p.default.createElement("footer",{className:"all-db-footer pagination-footer"},p.default.createElement("div",{id:"database-pagination"},p.default.createElement(O.default.Pagination,{page:t,total:n,urlPrefix:a})),p.default.createElement("div",{className:"current-databases"},"Showing ",p.default.createElement("span",{className:"all-db-footer__range"},o,"â€“",i),"Â ofÂ ",p.default.createElement("span",{className:"all-db-footer__total-db-count"},n),"Â databases."))}}]),t}(p.default.Component);G.defaultProps={linkPath:"_all_dbs",store:P},t.default={DatabasesController:j,DatabaseTable:U,DatabaseRow:V,RightDatabasesHeader:F,GraveyardInfo:B,AddDatabaseWidget:q,JumpToDatabaseWidget:H,DatabasePagination:G}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Layout=void 0;var o=n(0),i=a(o),r=n(2),l=a(r),s=n(29),u=n(416),c=a(u),d=c.default.RightDatabasesHeader,f=c.default.DatabasesController,p=c.default.DatabasePagination,h=t.Layout=function(){return i.default.createElement(s.OnePane,null,i.default.createElement(s.OnePaneHeader,{crumbs:[{name:"Databases"}],endpoint:l.default.urls("allDBs","apiurl"),docURL:l.default.constants.DOC_URLS.ALL_DBS},i.default.createElement(d,null)),i.default.createElement(s.OnePaneContent,null,i.default.createElement(f,null)),i.default.createElement(s.OnePaneFooter,null,i.default.createElement(p,null)))};t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=n(2),l=a(r),s=n(226),u=a(s),c=n(72),d=a(c),f=n(417),p=a(f),h=l.default.RouteObject.extend({hideApiBar:!0,hideNotificationCenter:!0,routes:{"":"allDatabases","index.html":"allDatabases","_all_dbs(:params)":"allDatabases"},roles:["fx_loggedIn"],selectedHeader:"Databases",allDatabases:function(){return u.default.init(),i.default.createElement(p.default,null)}});d.default.RouteObjects=[h],t.default=d.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(421),l=a(r);n(600),l.default.initialize=function(){i.default.addHeaderLink({id:"Documentation",title:"Documentation",icon:"fonticon-bookmark",href:"#/documentation",bottomNav:!0,top:!0})},t.default=l.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=[{title:"CouchDB Official Documentation â€” Online",link:"http://docs.couchdb.org/en/latest/",iconClassName:"couchdb-icon"},{title:"CouchDB Official Documentation â€” Offline",link:"/_utils/docs/index.html",iconClassName:"couchdb-icon"},{title:"CouchDB Weekly News",link:"http://blog.couchdb.org/",iconClassName:"couchdb-icon"},{title:"CouchDB Homepage",link:"https://couchdb.apache.org/",iconClassName:"couchdb-icon"},{title:"CouchDB on GitHub",link:"https://github.com/apache/couchdb",iconClassName:"github-icon"},{title:"Fauxton on GitHub",link:"https://github.com/apache/couchdb-fauxton",iconClassName:"github-icon"},{title:"Fauxton Visual Guide",link:"https://couchdb.apache.org/fauxton-visual-guide/index.html",iconClassName:"couchdb-icon"},{title:"The Apache Software Foundation",link:"http://www.apache.org/",iconClassName:"asf-feather-icon"},{title:"Follow CouchDB on Twitter",link:"https://twitter.com/couchdb",iconClassName:"twitter-icon"},{title:"Follow CouchDB on Google Plus",link:"https://plus.google.com/+CouchDB",iconClassName:"google-plus-icon"},{title:"Follow CouchDB on LinkedIn",link:"https://www.linkedin.com/company/apache-couchdb",iconClassName:"linkedin-icon"}],l=function(e){function t(e){return e.map(function(e){return i.default.createElement("tr",{key:e.title},i.default.createElement("td",{className:"icons-container"},i.default.createElement("div",{className:"icon "+e.iconClassName}," ")),i.default.createElement("td",null,i.default.createElement("a",{href:e.link,target:"_blank","data-bypass":"true"},e.title)))})}var n=e.links,a=void 0===n?r:n;return i.default.createElement("div",{id:"documentation-page",className:"scrollable"},i.default.createElement("div",{className:"links"},i.default.createElement("table",null,i.default.createElement("tbody",null,t(a)))))};t.default={DocumentationPage:l}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=n(2),l=a(r),s=n(420),u=a(s),c=n(29),d=l.default.RouteObject.extend({selectedHeader:"Documentation",hideApiBar:!0,hideNotificationCenter:!0,routes:{documentation:"documentation"},roles:["fx_loggedIn"],documentation:function(){return i.default.createElement(c.OnePaneSimpleLayout,{component:i.default.createElement(u.default.DocumentationPage,null),crumbs:[{name:"Documentation"}]})}});d.RouteObjects=[d],t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return e||(e=""),e}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),r=a(i),l=n(2),s=a(l),u=n(468),c=a(u),d=n(75),f=a(d),p=n(460),h=a(p),m=n(470),g=a(m);n(601),s.default.addReducers({indexResults:f.default,mangoQuery:h.default,sidebar:g.default}),s.default.registerUrls("allDocs",{server:function(e,t){return r.default.host+"/"+e+"/_all_docs"+o(t)},app:function(e,t){return"database/"+e+"/_all_docs"+o(t)},apiurl:function(e,t){return window.location.origin+"/"+e+"/_all_docs"+o(t)}}),s.default.registerUrls("allDocsSanitized",{server:function(e,t){return e=encodeURIComponent(e),r.default.host+"/"+e+"/_all_docs"+o(t)},app:function(e,t){return"database/"+(e=encodeURIComponent(e))+"/_all_docs"+o(t)},apiurl:function(e,t){return e=encodeURIComponent(e),window.location.origin+"/"+e+"/_all_docs"+o(t)}}),s.default.registerUrls("bulk_docs",{server:function(e,t){return r.default.host+"/"+encodeURIComponent(e)+"/_bulk_docs"+o(t)},app:function(e,t){return"database/"+e+"/_bulk_docs"+o(t)},apiurl:function(e,t){return window.location.origin+"/"+e+"/_bulk_docs"+o(t)}}),s.default.registerUrls("revision-browser",{app:function(e,t){return"database/"+e+"/"+t+"/conflicts"}}),s.default.registerUrls("designDocs",{server:function(e,t){return r.default.host+"/"+e+"/"+t+"/_info"},app:function(e,t){return"database/"+e+"/_design/"+r.default.utils.safeURLName(t)+"/_info"},apiurl:function(e,t){return window.location.origin+"/"+e+"/"+t+"/_info"}}),s.default.registerUrls("view",{server:function(e,t,n){return r.default.host+"/"+e+"/_design/"+t+"/_view/"+n},app:function(e,t){return"database/"+e+"/_design/"+t+"/_view/"},apiurl:function(e,t,n){return window.location.origin+"/"+e+"/_design/"+t+"/_view/"+n},edit:function(e,t,n){return"database/"+e+"/_design/"+t+"/_view/"+n+"/edit"},showView:function(e,t,n){return"/database/"+e+"/"+t+"/_view/"+n},fragment:function(e,t,n){return"database/"+e+t+"/_view/"+n}}),s.default.registerUrls("document",{server:function(e,t,n){return _.isUndefined(n)&&(n=""),r.default.host+"/"+e+"/"+t+n},attachment:function(e,t,n,a){return _.isUndefined(a)&&(a=""),r.default.host+"/"+e+"/"+t+"/"+n+a},app:function(e,t){return"/database/"+e+"/"+t},apiurl:function(e,t){return t?window.location.origin+"/"+e+"/"+t:window.location.origin+"/"+e},"web-index":function(e,t){return"/database/"+e+"/"+t}}),s.default.registerUrls("new",{newDocument:function(e){return"/database/"+e+"/new"},newView:function(e){return"/database/"+e+"/new_view"},addView:function(e,t){return"/database/"+e+"/new_view/"+t}}),s.default.registerUrls("base",{server:function(e){return r.default.host+"/"+e+"/"},app:function(e){return"/database/"+e+"/"}}),s.default.registerUrls("mango",{"index-server":function(e,t){return t||(t=""),r.default.host+"/"+e+"/_index"+t},"index-apiurl":function(e,t){return t||(t=""),window.location.origin+"/"+e+"/_index"+t},"index-app":function(e,t){return t||(t=""),"database/"+e+"/_index"+t},"index-server-bulk-delete":function(e){return r.default.host+"/"+e+"/_index/_bulk_delete"},"query-server":function(e,t){return t||(t=""),r.default.host+"/"+e+"/_find"+t},"query-apiurl":function(e,t){return t||(t=""),window.location.origin+"/"+e+"/_find"+t},"query-app":function(e,t){return t||(t=""),"database/"+e+"/_find"+t},"explain-server":function(e){return r.default.host+"/"+e+"/_explain"},"explain-apiurl":function(e){return window.location.origin+"/"+e+"/_explain"}}),t.default=c.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChangesCodeTransition=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),u=a(s),c=n(1),d=a(c),f=n(0),p=a(f),h=n(10),m=a(h),g=n(229),E=a(g),b=n(231),y=a(b),v=n(55),N=a(v),D=n(15),O=a(D),S=n(194);n(103);var T=n(94),C=a(T),w=y.default.changesStore,I=O.default.BadgeList,A=O.default.Copy,R=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStoreState(),n}return r(t,e),l(t,[{key:"getStoreState",value:function(){return{changes:w.getChanges(),loaded:w.isLoaded(),databaseName:w.getDatabaseName(),isShowingSubset:w.isShowingSubset()}}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){w.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){w.off("change",this.onChange)}},{key:"showingSubsetMsg",value:function(){var e=this.state,t=e.isShowingSubset,n=e.changes,a="";if(t){var o=n.length;a=p.default.createElement("p",{className:"changes-result-limit"},"Limiting results to latest ",p.default.createElement("b",null,o)," changes.")}return a}},{key:"getRows",value:function(){var e=this.state,t=e.changes,n=e.loaded,a=e.databaseName;return!t.length&&n?p.default.createElement("p",{className:"no-doc-changes"},"There are no document changes to display."):t.map(function(e,t){return p.default.createElement(k,{change:e,key:t,databaseName:a})})}},{key:"render",value:function(){return p.default.createElement("div",null,p.default.createElement("div",{className:"js-changes-view"},this.showingSubsetMsg(),this.getRows()))}}]),t}(p.default.Component),P=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStoreState(),n}return r(t,e),l(t,[{key:"getStoreState",value:function(){return{filters:w.getFilters()}}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){w.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){w.off("change",this.onChange)}},{key:"addFilter",value:function(e){_.isEmpty(e)||E.default.addFilter(e)}},{key:"hasFilter",value:function(e){return w.hasFilter(e)}},{key:"render",value:function(){return p.default.createElement("div",{className:"changes-header"},p.default.createElement(L,{filter:function(e){return E.default.removeFilter(e)},addFilter:this.addFilter,hasFilter:this.hasFilter}),p.default.createElement(I,{elements:this.state.filters,removeBadge:function(e){return E.default.removeFilter(e)}}))}}]),t}(p.default.Component),L=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={filter:"",error:!1},n.submitForm=n.submitForm.bind(n),n}return r(t,e),l(t,[{key:"submitForm",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.props.hasFilter(this.state.filter)){this.setState({error:!0});var t=this;setTimeout(function(){t.setState({error:!1})},1e3)}else this.props.addFilter(this.state.filter),this.setState({filter:"",error:!1})}},{key:"componentDidMount",value:function(){this.focusFilterField()}},{key:"componentDidUpdate",value:function(){this.focusFilterField()}},{key:"focusFilterField",value:function(){m.default.findDOMNode(this.refs.addItem).focus()}},{key:"inputClassNames",value:function(){var e="js-changes-filter-field";return this.state.error&&(e+=" errorHighlight"),e}},{key:"render",value:function(){var e=this;return p.default.createElement("form",{className:"form-inline js-filter-form",onSubmit:this.submitForm},p.default.createElement("fieldset",null,p.default.createElement("i",{className:"fonticon-filter"}),p.default.createElement("input",{type:"text",ref:"addItem",className:this.inputClassNames(),placeholder:"Sequence or ID",onChange:function(t){return e.setState({filter:t.target.value})},value:this.state.filter}),p.default.createElement("button",{type:"submit",className:"btn btn-secondary"},"Filter"),p.default.createElement("div",{className:"help-block"})))}}]),t}(p.default.Component);L.PropTypes={addFilter:d.default.func.isRequired,hasFilter:d.default.func.isRequired,tooltips:d.default.string},L.defaultProps={tooltip:""};var k=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={codeVisible:!1},n}return r(t,e),l(t,[{key:"toggleJSON",value:function(e){e.preventDefault(),this.setState({codeVisible:!this.state.codeVisible})}},{key:"getChangesCode",value:function(){return this.state.codeVisible?p.default.createElement(N.default.CodeFormat,{key:"changesCodeSection",code:this.getChangeCode()}):null}},{key:"getChangeCode",value:function(){return{changes:this.props.change.changes,doc:this.props.change.doc}}},{key:"showCopiedMessage",value:function(e){var t="The document ID has been copied to your clipboard.";"seq"===e&&(t="The document seq number has been copied to your clipboard."),u.default.addNotification({msg:t,type:"info",clear:!0})}},{key:"render",value:function(){var e=this,t=this.state.codeVisible,n=this.props,a=n.change,o=n.databaseName,i="change-wrapper"+(a.isNew?" new-change-row":"");return p.default.createElement("div",{className:i},p.default.createElement("div",{className:"change-box","data-id":a.id},p.default.createElement("div",{className:"row-fluid"},p.default.createElement("div",{className:"span2"},"seq"),p.default.createElement("div",{className:"span8 change-sequence"},a.seq),p.default.createElement("div",{className:"span2 text-right"},p.default.createElement(A,{uniqueKey:C.default.v4(),text:a.seq.toString(),onClipboardClick:function(){return e.showCopiedMessage("seq")}}))),p.default.createElement("div",{className:"row-fluid"},p.default.createElement("div",{className:"span2"},"id"),p.default.createElement("div",{className:"span8"},p.default.createElement(x,{id:a.id,deleted:a.deleted,databaseName:o})),p.default.createElement("div",{className:"span2 text-right"},p.default.createElement(A,{uniqueKey:C.default.v4(),text:a.id,onClipboardClick:function(){return e.showCopiedMessage("id")}}))),p.default.createElement("div",{className:"row-fluid"},p.default.createElement("div",{className:"span2"},"deleted"),p.default.createElement("div",{className:"span10"},a.deleted?"True":"False")),p.default.createElement("div",{className:"row-fluid"},p.default.createElement("div",{className:"span2"},"changes"),p.default.createElement("div",{className:"span10"},p.default.createElement("button",{type:"button",className:"btn btn-small btn-secondary",onClick:this.toggleJSON.bind(this)},t?"Close JSON":"View JSON"))),p.default.createElement(M,{codeVisible:this.state.codeVisible,code:this.getChangeCode()})))}}]),t}(p.default.Component);k.PropTypes={change:d.default.object,databaseName:d.default.string.isRequired};var M=t.ChangesCodeTransition=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"willEnter",value:function(){return{opacity:(0,S.spring)(1,S.presets.gentle),height:(0,S.spring)(160,S.presets.gentle)}}},{key:"willLeave",value:function(){return{opacity:(0,S.spring)(0,S.presets.gentle),height:(0,S.spring)(0,S.presets.gentle)}}},{key:"getStyles",value:function(e){return!e&&this.props.codeVisible?[{key:"1",style:this.willEnter()}]:e||this.props.codeVisible?e.map(function(e){return{key:"1",style:e.style}}):[{key:"1",style:this.willLeave()}]}},{key:"getChildren",value:function(e){var t=this,n=e.map(function(e){var n=e.style;return!1===t.props.codeVisible&&0===n.opacity?null:p.default.createElement("div",{key:"1",style:{opacity:n.opacity,height:n.height+"px"}},p.default.createElement(N.default.CodeFormat,{code:t.props.code}))});return p.default.createElement("span",null,n)}},{key:"render",value:function(){return p.default.createElement(S.TransitionMotion,{styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren.bind(this))}}]),t}(p.default.Component),x=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.deleted,n=e.id,a=e.databaseName;if(t)return p.default.createElement("span",{className:"js-doc-id"},n);var o="#"+u.default.urls("document","app",a,n);return p.default.createElement("a",{href:o,className:"js-doc-link"},n)}}]),t}(p.default.Component);t.default={ChangesController:R,ChangesTabContent:P,ChangeRow:k,ChangeID:x}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(44),i=a(o),r=n(2),l=a(r);t.default={fetchAllDocsWithKey:function(e){return function(t,n){var a="?"+i.default.param({startkey:JSON.stringify(t),endkey:JSON.stringify(t+"é¦™"),limit:30}),o=l.default.urls("allDocs","server",e.safeID(),a);i.default.ajax({cache:!1,url:o,dataType:"json"}).then(function(e){var t=e.rows,a=t.map(function(e){return{value:e.id,label:e.id}});n(null,{options:a})})}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return d.default.getModifyDatabaseLinks(e)}function i(e){var t=d.default.getNewButtonLinks(e);return o(e).concat(t)}function r(e){return e.map(function(e,t){if(e.title&&e.links){var n=e.links.map(function(e){return s.default.createElement(m,{onClick:e.onClick,icon:e.icon,url:e.url},e.title)});return[s.default.createElement("li",{className:"header-label"},e.title),n]}return s.default.createElement(m,{icon:e.icon,url:e.url,onClick:e.onClick,key:t},e.title)})}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),s=a(l),u=n(10),c=(a(u),n(37)),d=a(c),f=n(2),p=a(f),h=n(19),m=function(e){var t=e.url,n=e.icon,a=e.onClick,o=e.children;return s.default.createElement("li",{role:"presentation"},s.default.createElement("a",{className:"faux-header__doc-header-dropdown-item",onClick:a,href:t},s.default.createElement("i",{className:n})," ",o))},_=function(e){var t=e.dbName,n=i(t),a=r(n);return s.default.createElement("div",{className:"faux-header__doc-header-left"},s.default.createElement("button",{type:"button",className:"faux-header__doc-header-backlink",onClick:function(){p.default.navigate("#/_all_dbs")}},s.default.createElement("i",{className:"faux-header__doc-header-backlink__icon fonticon fonticon-left-open"})),s.default.createElement("div",{className:"faux-header__doc-header-title flex-fill",title:t},t),s.default.createElement(h.Dropdown,{id:"faux-header__doc-header-left-1"},s.default.createElement(h.Dropdown.Toggle,{noCaret:!0,className:"faux-header__doc-header-dropdown-toggle"},s.default.createElement("i",{className:"faux-header__doc-header-dropdown-toggle-icon fonticon-vertical-ellipsis"})),s.default.createElement(h.Dropdown.Menu,{className:"faux-header__doc-header-dropdown-itemwrapper"},a)))};t.default=_},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=a(o),r=n(0),l=a(r),s=n(449),u=a(s),c=n(427),d=a(c),f=n(424),p=a(f),h=function(e){var t=e.database,n=e.hideQueryOptions,a=e.hideJumpToDoc,o=e.queryDocs,i=e.ddocsOnly,r=e.selectedNavItem;return l.default.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},l.default.createElement("div",{className:"faux-header__searchboxwrapper"},l.default.createElement("div",{className:"faux-header__searchboxcontainer"},a?null:l.default.createElement(d.default,{cache:!1,loadOptions:p.default.fetchAllDocsWithKey(t),database:t}))),n?null:l.default.createElement(u.default,{ddocsOnly:i,queryDocs:o,selectedNavItem:r}))};h.propTypes={database:i.default.object.isRequired,hideQueryOptions:i.default.bool,isRedux:i.default.bool,queryDocs:i.default.func,selectedNavItem:i.default.object},h.defaultProps={hideQueryOptions:!1},t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=a(o),r=n(2),l=a(r),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(32)),h=a(p),m=function(e){var t=e.database,n=e.loadOptions;return d.default.createElement("div",null,d.default.createElement(h.default.Async,{className:"jump-to-doc",name:"jump-to-doc",placeholder:"Document ID",loadOptions:n,clearable:!1,ignoreCase:!1,cache:!1,onChange:function(e){var n=e.value,a=l.default.urls("document","app",i.default.utils.safeURLName(t.id),i.default.utils.safeURLName(n));setTimeout(function(){return l.default.navigate(a,{trigger:!0})})}}))};m.propTypes={database:u.default.object.isRequired,loadOptions:u.default.func.isRequired},t.default=m},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ResultsToolBar=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(432),p=a(f),h=n(132),m=a(h),_=n(15),g=a(_),E=n(37),b=a(E),y=g.default.BulkActionComponent,v=m.default.sidebarStore;(t.ResultsToolBar=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e){return void 0!=e.isListDeletable}},{key:"render",value:function(){var e=v.getDatabase(),t=this.props,n=t.hasResults,a=t.isListDeletable,o=t.removeItem,i=t.allDocumentsSelected,r=t.hasSelectedItem,l=t.toggleSelectAll,s=t.isLoading,u=null;(a&&n||s)&&(u=d.default.createElement(y,{removeItem:o,isChecked:i,hasSelectedItem:r,toggleSelect:l,disabled:s,title:"Select all docs that can be..."}));var c=null;(n||s)&&(c=d.default.createElement(p.default,this.props));var f=null;return e&&(f=d.default.createElement("div",{className:"document-result-screen__toolbar-flex-container"},d.default.createElement("a",{href:b.default.getNewDocUrl(e.id),className:"btn save document-result-screen__toolbar-create-btn btn-primary"},"Create Document"))),d.default.createElement("div",{className:"document-result-screen__toolbar"},u,c,f)}}]),t}(d.default.Component)).propTypes={removeItem:u.default.func.isRequired,allDocumentsSelected:u.default.bool.isRequired,hasSelectedItem:u.default.bool.isRequired,toggleSelectAll:u.default.func.isRequired,isLoading:u.default.bool.isRequired,hasResults:u.default.bool.isRequired,isListDeletable:u.default.bool}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),u=a(s),c=n(0),d=a(c),f=n(234),p=a(f),h=n(232),m=a(h),_=n(15),g=a(_),E=n(94),b=a(E),y=p.default.designDocInfoStore,v=g.default.LoadLines,N=g.default.Copy,D=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{viewIndex:y.getViewIndex(),isLoading:y.isLoading(),ddocName:y.getDdocName()}},a.onChange=function(){a.setState(a.getStoreState())},a.showCopiedMessage=function(){u.default.addNotification({type:"success",msg:"The MD5 sha has been copied to your clipboard.",clear:!0})},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){y.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){y.off("change",this.onChange),m.default.stopRefresh()}},{key:"render",value:function(){var e=this.state.viewIndex;if(this.state.isLoading)return d.default.createElement(v,null);var t=e.data_size?e.data_size.toLocaleString("en"):0,n=e.disk_size?e.disk_size.toLocaleString("en"):0;return d.default.createElement("div",{className:"metadata-page"},d.default.createElement("header",null,d.default.createElement("h2",null,"_design/",this.state.ddocName," Metadata")),d.default.createElement("section",{className:"container"},d.default.createElement("h3",null,"Index Information"),d.default.createElement("ul",null,d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Language:"),d.default.createElement("span",{className:"capitalize"},e.language)),d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Currently being updated?"),e.updater_running?"Yes":"No"),d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Currently running compaction?"),e.compact_running?"Yes":"No"),d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Waiting for a commit?"),e.waiting_commit?"Yes":"No")),d.default.createElement("ul",null,d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Clients waiting for the index:"),e.waiting_clients),d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Update sequence on DB:"),e.update_seq),d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Processed purge sequence:"),e.purge_seq),d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Actual data size (bytes):"),t),d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Data size on disk (bytes):"),n)),d.default.createElement("ul",null,d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"MD5 Signature:"),d.default.createElement(N,{uniqueKey:b.default.v4(),text:e.signature,onClipboardClick:this.showCopiedMessage})))))}}]),t}(d.default.Component);t.default={DesignDocInfo:D}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),u=a(s),c=n(11),d=a(c),f=n(1),p=a(f),h=n(0),m=a(h),g=n(10),E=a(g),b=n(235),y=a(b),v=n(431),N=a(v),D=n(55),O=a(D),S=n(15),T=a(S),C=n(19),w=n(138),I=a(w),A=n(45),R=a(A),P=N.default.docEditorStore,L=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{isLoading:P.isLoading(),doc:P.getDoc(),cloneDocModalVisible:P.isCloneDocModalVisible(),uploadModalVisible:P.isUploadModalVisible(),deleteDocModalVisible:P.isDeleteDocModalVisible(),numFilesUploaded:P.getNumFilesUploaded(),conflictCount:P.getDocConflictCount()}},a.getCodeEditor=function(){if(a.state.isLoading)return m.default.createElement(T.default.LoadLines,null);var e=JSON.stringify(a.state.doc.attributes,null,"  "),t=[{name:"save",bindKey:{win:"Ctrl-S",mac:"Ctrl-S"},exec:a.saveDoc}];return m.default.createElement(T.default.CodeEditor,{id:"doc-editor",ref:"docEditor",defaultCode:e,mode:"json",autoFocus:!0,editorCommands:t,notifyUnsavedChanges:!0,stringEditModalEnabled:!0})},a.onChange=function(){a.setState(a.getStoreState())},a.saveDoc=function(){y.default.saveDoc(a.state.doc,a.checkDocIsValid(),a.onSaveComplete)},a.onSaveComplete=function(){a.getEditor().clearChanges()},a.hideDeleteDocModal=function(){y.default.hideDeleteDocModal()},a.deleteDoc=function(){y.default.hideDeleteDocModal(),y.default.deleteDoc(a.state.doc)},a.getEditor=function(){return a.refs.docEditor?a.refs.docEditor.getEditor():null},a.checkDocIsValid=function(){if(a.getEditor().hasErrors())return!1;var e=JSON.parse(a.getEditor().getValue());return a.state.doc.clear().set(e,{validate:!0}),!a.state.doc.validationError},a.clearChanges=function(){a.refs.docEditor.clearChanges()},a.getExtensionIcons=function(){var e=u.default.getExtensions("DocEditor:icons");return _.map(e,function(e,t){return m.default.createElement(e,{doc:this.state.doc,key:t,database:this.props.database})},a)},a.getButtonRow=function(){return!a.props.isNewDoc&&m.default.createElement("div",null,m.default.createElement(k,{doc:a.state.doc,isLoading:a.state.isLoading}),m.default.createElement("div",{className:"doc-editor-extension-icons"},a.getExtensionIcons()),a.state.conflictCount?m.default.createElement(M,{title:"Conflicts ("+a.state.conflictCount+")",iconClass:"icon-columns",className:"conflicts",onClick:function(){u.default.navigate(u.default.urls("revision-browser","app",a.props.database.safeID(),a.state.doc.id))}}):null,m.default.createElement(M,{className:"upload",title:"Upload Attachment",iconClass:"icon-circle-arrow-up",onClick:y.default.showUploadModal}),m.default.createElement(M,{title:"Clone Document",iconClass:"icon-repeat",onClick:y.default.showCloneDocModal}),m.default.createElement(M,{title:"Delete",iconClass:"icon-trash",onClick:y.default.showDeleteDocModal}))},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){P.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){P.off("change",this.onChange)}},{key:"componentWillUpdate",value:function(e,t){(this.state.numFilesUploaded!==t.numFilesUploaded||this.state.doc&&this.state.doc.hasChanged()||this.state.doc&&t.doc&&this.state.doc.id!==t.doc.id)&&(this.getEditor().setValue(JSON.stringify(t.doc.attributes,null,"  ")),this.onSaveComplete())}},{key:"render",value:function(){var e=this.props.isNewDoc?"Create Document":"Save Changes",t=u.default.urls("allDocs","app",u.default.url.encode(this.props.database.id));return m.default.createElement("div",null,m.default.createElement("div",{id:"doc-editor-actions-panel"},m.default.createElement("div",{className:"doc-actions-left"},m.default.createElement("button",{className:"save-doc btn btn-primary save",type:"button",onClick:this.saveDoc},m.default.createElement("i",{className:"icon fonticon-ok-circled"})," ",e),m.default.createElement("div",null,m.default.createElement("a",{href:"#/"+t,className:"js-back cancel-button"},"Cancel"))),m.default.createElement("div",{className:"alignRight"},this.getButtonRow())),m.default.createElement("div",{className:"code-region"},m.default.createElement("div",{className:"bgEditorGutter"}),m.default.createElement("div",{id:"editor-container",className:"doc-code"},this.getCodeEditor())),m.default.createElement(x,{ref:"uploadModal",visible:this.state.uploadModalVisible,doc:this.state.doc}),m.default.createElement(j,{doc:this.state.doc,database:this.props.database,visible:this.state.cloneDocModalVisible,onSubmit:this.clearChanges}),m.default.createElement(O.default.ConfirmationModal,{title:"Confirm Deletion",visible:this.state.deleteDocModalVisible,text:"Are you sure you want to delete this document?",onClose:this.hideDeleteDocModal,onSubmit:this.deleteDoc,successButtonLabel:"Delete Document"}))}}]),t}(m.default.Component);L.defaultProps={database:{},isNewDoc:!1};var k=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getAttachmentList=function(){var e=a.props.doc.database.get("id"),t=a.props.doc.get("_id");return _.map(a.props.doc.get("_attachments"),function(n,a){var o=u.default.urls("document","attachment",e,t,d.default.utils.safeURLName(a));return m.default.createElement("li",{key:a},m.default.createElement("a",{href:o,target:"_blank","data-bypass":"true"}," ",m.default.createElement("strong",null,a),m.default.createElement("span",{className:"attachment-delimiter"},"-"),m.default.createElement("span",null,n.content_type,", ",I.default.formatSize(n.length))))})},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){return!(this.props.isLoading||!this.props.doc.get("_attachments"))&&m.default.createElement("div",{className:"panel-section view-attachments-section btn-group"},m.default.createElement("button",{className:"panel-button dropdown-toggle btn","data-bypass":"true","data-toggle":"dropdown",title:"View Attachments",id:"view-attachments-menu"},m.default.createElement("i",{className:"icon icon-paper-clip"}),m.default.createElement("span",{className:"button-text"},"View Attachments"),m.default.createElement("span",{className:"caret"})),m.default.createElement("ul",{className:"dropdown-menu",role:"menu","aria-labelledby":"view-attachments-menu"},this.getAttachmentList()))}}]),t}(m.default.Component);k.propTypes={isLoading:p.default.bool.isRequired,doc:p.default.object},k.defaultProps={isLoading:!0,doc:{}};var M=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){var e="icon "+this.props.iconClass;return m.default.createElement("div",{className:"panel-section"},m.default.createElement("button",{className:"panel-button "+this.props.className,title:this.props.title,onClick:this.props.onClick},m.default.createElement("i",{className:e}),m.default.createElement("span",null,this.props.title)))}}]),t}(m.default.Component);M.propTypes={title:p.default.string.isRequired,onClick:p.default.func.isRequired,className:p.default.string},M.defaultProps={title:"",iconClass:"",onClick:function(){},className:""};var x=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{inProgress:P.isUploadInProgress(),loadPercentage:P.getUploadLoadPercentage(),errorMessage:P.getFileUploadErrorMsg()}},a.closeModal=function(e){e&&e.preventDefault(),a.state.inProgress&&y.default.cancelUpload(),y.default.hideUploadModal(),y.default.resetUploadModal()},a.upload=function(){y.default.uploadAttachment({doc:a.props.doc,rev:a.props.doc.get("_rev"),files:$(E.default.findDOMNode(a.refs.attachments))[0].files})},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e="alert alert-error";""===this.state.errorMessage&&(e+=" hide");var t="progress progress-info";return this.state.inProgress||(t+=" hide"),m.default.createElement(C.Modal,{dialogClassName:"upload-file-modal",show:this.props.visible,onHide:this.closeModal},m.default.createElement(C.Modal.Header,{closeButton:!0},m.default.createElement(C.Modal.Title,null,"Upload Attachment")),m.default.createElement(C.Modal.Body,null,m.default.createElement("div",{className:e},this.state.errorMessage),m.default.createElement("div",null,m.default.createElement("form",{ref:"uploadForm",className:"form"},m.default.createElement("p",null,"Select a file to upload as an attachment to this document. Uploading a file saves the document as a new revision."),m.default.createElement("input",{ref:"attachments",type:"file",name:"_attachments"}),m.default.createElement("br",null)),m.default.createElement("div",{className:t},m.default.createElement("div",{className:"bar",style:{width:this.state.loadPercentage+"%"}})))),m.default.createElement(C.Modal.Footer,null,m.default.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.closeModal},"Cancel"),m.default.createElement("button",{href:"#",id:"upload-btn","data-bypass":"true",className:"btn btn-primary save",onClick:this.upload},m.default.createElement("i",{className:"icon icon-upload"})," Upload Attachment")))}}]),t}(m.default.Component);x.propTypes={visible:p.default.bool.isRequired,doc:p.default.object};var j=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={uuid:null},a.cloneDoc=function(){a.props.onSubmit&&a.props.onSubmit(),y.default.cloneDoc(a.props.database,a.props.doc,a.state.uuid)},a.closeModal=function(e){e&&e.preventDefault(),y.default.hideCloneDocModal()},a.docIDChange=function(e){a.setState({uuid:e.target.value})},r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidUpdate",value:function(){if(null===this.state.uuid){var e=new R.default.UUID;e.fetch().then(function(){this.setState({uuid:e.next()})}.bind(this))}}},{key:"render",value:function(){var e=this;return null!==this.state.uuid&&m.default.createElement(C.Modal,{dialogClassName:"clone-doc-modal",show:this.props.visible,onHide:this.closeModal},m.default.createElement(C.Modal.Header,{closeButton:!0},m.default.createElement(C.Modal.Title,null,"Clone Document")),m.default.createElement(C.Modal.Body,null,m.default.createElement("form",{className:"form",onSubmit:function(t){t.preventDefault(),e.cloneDoc()}},m.default.createElement("p",null,"Document cloning copies the saved version of the document. Unsaved document changes will be discarded."),m.default.createElement("p",null,"You can modify the following generated ID for your new document."),m.default.createElement("input",{ref:"newDocId",type:"text",autoFocus:!0,className:"input-block-level",onChange:this.docIDChange,value:this.state.uuid}))),m.default.createElement(C.Modal.Footer,null,m.default.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.closeModal},"Cancel"),m.default.createElement("button",{className:"btn btn-primary save",onClick:this.cloneDoc},m.default.createElement("i",{className:"icon-repeat"})," Clone Document")))}}]),t}(m.default.Component);j.propTypes={visible:p.default.bool.isRequired,doc:p.default.object,database:p.default.object.isRequired,onSubmit:p.default.func.isRequired},t.default={DocEditorController:L,AttachmentsPanelButton:k,UploadModal:x,CloneDocModal:j}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(236),l=a(r),s={};s.DocEditorStore=i.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._doc=null,this._isLoading=!0,this._cloneDocModalVisible=!1,this._deleteDocModalVisible=!1,this._uploadModalVisible=!1,this._numFilesUploaded=0,this._fileUploadErrorMsg="",this._uploadInProgress=!1,this._fileUploadLoadPercentage=0,this._docConflictCount=null},isLoading:function(){return this._isLoading},getDocConflictCount:function(){return this._docConflictCount},docLoaded:function(e){this._isLoading=!1,this._docConflictCount=e.doc.get("_conflicts")?e.doc.get("_conflicts").length:0,e.doc.unset("_conflicts"),this._doc=e.doc},getDoc:function(){return this._doc},isCloneDocModalVisible:function(){return this._cloneDocModalVisible},showCloneDocModal:function(){this._cloneDocModalVisible=!0},hideCloneDocModal:function(){this._cloneDocModalVisible=!1},isDeleteDocModalVisible:function(){return this._deleteDocModalVisible},showDeleteDocModal:function(){this._deleteDocModalVisible=!0},hideDeleteDocModal:function(){this._deleteDocModalVisible=!1},isUploadModalVisible:function(){return this._uploadModalVisible},showUploadModal:function(){this._uploadModalVisible=!0},hideUploadModal:function(){this._uploadModalVisible=!1},getNumFilesUploaded:function(){return this._numFilesUploaded},getFileUploadErrorMsg:function(){return this._fileUploadErrorMsg},setFileUploadErrorMsg:function(e){this._uploadInProgress=!1,this._fileUploadLoadPercentage=0,this._fileUploadErrorMsg=e},isUploadInProgress:function(){return this._uploadInProgress},getUploadLoadPercentage:function(){return this._fileUploadLoadPercentage},resetUploadModal:function(){this._uploadInProgress=!1,this._fileUploadLoadPercentage=0,this._fileUploadErrorMsg=""},startFileUpload:function(){this._uploadInProgress=!0,this._fileUploadLoadPercentage=0,this._fileUploadErrorMsg=""},dispatch:function(e){switch(e.type){case l.default.RESET_DOC:this.reset();break;case l.default.DOC_LOADED:this.docLoaded(e.options),this.triggerChange();break;case l.default.SHOW_CLONE_DOC_MODAL:this.showCloneDocModal(),this.triggerChange();break;case l.default.HIDE_CLONE_DOC_MODAL:this.hideCloneDocModal(),this.triggerChange();break;case l.default.SHOW_DELETE_DOC_CONFIRMATION_MODAL:this.showDeleteDocModal(),this.triggerChange();break;case l.default.HIDE_DELETE_DOC_CONFIRMATION_MODAL:this.hideDeleteDocModal(),this.triggerChange();break;case l.default.SHOW_UPLOAD_MODAL:this.showUploadModal(),this.triggerChange();break;case l.default.HIDE_UPLOAD_MODAL:this.hideUploadModal(),this.triggerChange();break;case l.default.FILE_UPLOAD_SUCCESS:this._numFilesUploaded++,this.triggerChange();break;case l.default.FILE_UPLOAD_ERROR:this.setFileUploadErrorMsg(e.options.error),this.triggerChange();break;case l.default.RESET_UPLOAD_MODAL:this.resetUploadModal(),this.triggerChange();break;case l.default.START_FILE_UPLOAD:this.startFileUpload(),this.triggerChange();break;case l.default.SET_FILE_UPLOAD_PERCENTAGE:this._fileUploadLoadPercentage=e.options.percent,this.triggerChange();break;default:return}}}),s.docEditorStore=new s.DocEditorStore,s.docEditorStore.dispatchToken=i.default.dispatcher.register(s.docEditorStore.dispatch),t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(30),d=a(c),f=n(19),p=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.selectedLayout,n=e.docType,a=e.queryOptionsParams,o=void 0,i=void 0,r=void 0;if(n===d.default.INDEX_RESULTS_DOC_TYPE.VIEW)o=u.default.createElement(f.Button,{className:t===d.default.LAYOUT_ORIENTATION.METADATA?"active":"",onClick:this.toggleLayout.bind(this,d.default.LAYOUT_ORIENTATION.METADATA)},"Metadata");else if(n===d.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX)return null;return a.reduce||(r=u.default.createElement(f.Button,{className:t===d.default.LAYOUT_ORIENTATION.TABLE?"active":"",onClick:this.toggleLayout.bind(this,d.default.LAYOUT_ORIENTATION.TABLE)},u.default.createElement("i",{className:"fonticon-table"})," Table"),i=u.default.createElement(f.Button,{className:t===d.default.LAYOUT_ORIENTATION.JSON?"active":"",onClick:this.toggleLayout.bind(this,d.default.LAYOUT_ORIENTATION.JSON)},u.default.createElement("i",{className:"fonticon-json"})," JSON")),u.default.createElement("div",{className:"alternative-header"},u.default.createElement(f.ButtonGroup,{className:"two-sides-toggle-button"},r,o,i))}},{key:"toggleLayout",value:function(e){var t=this.props,n=t.changeLayout,a=t.selectedLayout,o=t.fetchDocs,i=t.fetchParams,r=t.queryOptionsParams,l=t.queryOptionsToggleIncludeDocs;if(e!==a)return n(e),r.include_docs=e!==d.default.LAYOUT_ORIENTATION.METADATA,e===d.default.LAYOUT_ORIENTATION.TABLE?i.conflicts=!0:delete i.conflicts,l(!r.include_docs),void o(i,r)}}]),t}(u.default.Component);t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(11)),f=a(d),p=n(2),h=a(p),m=n(15),_=a(m),g=n(241),E=a(g),b=n(97),y=a(b),v=n(239),N=a(v),D=n(240),O=a(D),S=f.default.helpers.getDocUrl,T=E.default.indexEditorStore,C=_.default.CodeEditorPanel,w=_.default.ConfirmButton,I=_.default.LoadLines,A=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStoreState(),n}return r(t,e),l(t,[{key:"getStoreState",value:function(){return{database:T.getDatabase(),isNewView:T.isNewView(),viewName:T.getViewName(),designDocs:T.getDesignDocs(),designDocList:T.getAvailableDesignDocs(),originalViewName:T.getOriginalViewName(),originalDesignDocName:T.getOriginalDesignDocName(),newDesignDoc:T.isNewDesignDoc(),designDocId:T.getDesignDocId(),newDesignDocName:T.getNewDesignDocName(),saveDesignDoc:T.getSaveDesignDoc(),map:T.getMap(),isLoading:T.isLoading()}}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){T.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){T.off("change",this.onChange)}},{key:"componentDidUpdate",value:function(e,t){this.state.map!==t.map&&this.mapEditor&&this.mapEditor.update()}},{key:"saveView",value:function(e){e.preventDefault(),this.designDocSelector.validate()&&y.default.saveView({database:this.state.database,newView:this.state.isNewView,viewName:this.state.viewName,designDoc:this.state.saveDesignDoc,designDocId:this.state.designDocId,newDesignDoc:this.state.newDesignDoc,originalViewName:this.state.originalViewName,originalDesignDocName:this.state.originalDesignDocName,map:this.mapEditor.getValue(),reduce:this.reduceEditor.getReduceValue(),designDocs:this.state.designDocs})}},{key:"viewChange",value:function(e){y.default.changeViewName(e.target.value)}},{key:"updateMapCode",value:function(e){y.default.updateMapCode(e)}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return u.default.createElement("div",{className:"define-view"},u.default.createElement(I,null));var t=this.state.isNewView?"New View":"Edit View",n=this.state.isNewView?"Create Document and then Build Index":"Save Document and then Build Index",a="#"+h.default.urls("view","showView",this.state.database.id,this.state.designDocId,this.state.viewName);return u.default.createElement("div",{className:"define-view"},u.default.createElement("form",{className:"form-horizontal view-query-save",onSubmit:this.saveView.bind(this)},u.default.createElement("h3",{className:"simple-header"},t),u.default.createElement("div",{className:"new-ddoc-section"},u.default.createElement(N.default,{ref:function(t){e.designDocSelector=t},designDocList:this.state.designDocList,selectedDesignDocName:this.state.designDocId,newDesignDocName:this.state.newDesignDocName,onSelectDesignDoc:y.default.selectDesignDoc,onChangeNewDesignDocName:y.default.updateNewDesignDocName,docLink:S("DESIGN_DOCS")})),u.default.createElement("div",{className:"control-group"},u.default.createElement("label",{htmlFor:"index-name"},u.default.createElement("span",null,"Index name"),u.default.createElement("a",{className:"help-link","data-bypass":"true",href:S("VIEW_FUNCS"),target:"_blank"},u.default.createElement("i",{className:"icon-question-sign"}))),u.default.createElement("input",{type:"text",id:"index-name",value:this.state.viewName,onChange:this.viewChange.bind(this),placeholder:"Index name"})),u.default.createElement(C,{id:"map-function",ref:function(t){e.mapEditor=t},title:"Map function",docLink:S("MAP_FUNCS"),blur:this.updateMapCode.bind(this),allowZenMode:!1,defaultCode:this.state.map}),u.default.createElement(O.default,{ref:function(t){e.reduceEditor=t}}),u.default.createElement("div",{className:"padded-box"},u.default.createElement("div",{className:"control-group"},u.default.createElement(w,{id:"save-view",text:n}),u.default.createElement("a",{href:a,className:"index-cancel-link"},"Cancel")))))}}]),t}(s.Component);t.default=A},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(435),d=a(c),f=n(436),p=a(f),h=n(437),m=a(h),_=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"getPageNumberText",value:function(){var e=this.props,t=e.docs,n=e.pageStart,a=e.pageEnd;return 0===t.length?u.default.createElement("span",null,"Showing 0 documents."):u.default.createElement("span",null,"Showing document ",n," - ",a,".")}},{key:"perPageChange",value:function(e){var t=this.props;(0,t.updatePerPageResults)(e,t.fetchParams,t.queryOptionsParams)}},{key:"nextClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowNext,a=t.fetchParams,o=t.queryOptionsParams,i=t.paginateNext,r=t.perPage;n&&i(a,o,r)}},{key:"previousClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowPrevious,a=t.fetchParams,o=t.queryOptionsParams,i=t.paginatePrevious,r=t.perPage;n&&i(a,o,r)}},{key:"render",value:function(){var e=this.props,t=e.showPrioritizedEnabled,n=e.hasResults,a=e.prioritizedEnabled,o=e.displayedFields,i=e.perPage,r=e.canShowNext,l=e.canShowPrevious,s=e.toggleShowAllColumns;return u.default.createElement("footer",{className:"index-pagination pagination-footer"},u.default.createElement(d.default,{nextClicked:this.nextClicked.bind(this),previousClicked:this.previousClicked.bind(this),canShowNext:r,canShowPrevious:l}),u.default.createElement("div",{className:"footer-controls"},u.default.createElement("div",{className:"page-controls"},t&&n?u.default.createElement(m.default,{prioritizedEnabled:a,displayedFields:o,toggleShowAllColumns:s}):null),u.default.createElement(p.default,{perPageChange:this.perPageChange.bind(this),perPage:i}),u.default.createElement("div",{className:"current-docs"},this.getPageNumberText())))}}]),t}(u.default.Component);t.default=_},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.nextClicked,n=e.previousClicked,a=e.canShowPrevious,o=e.canShowNext,i="",r="";return a||(i="disabled"),o||(r="disabled"),s.default.createElement("div",{className:"documents-pagination"},s.default.createElement("ul",{className:"pagination"},s.default.createElement("li",{className:i},s.default.createElement("a",{id:"previous",onClick:n,className:"icon fonticon-left-open",href:"#","data-bypass":"true"})),s.default.createElement("li",{className:r},s.default.createElement("a",{id:"next",onClick:t,className:"icon fonticon-right-open",href:"#","data-bypass":"true"}))))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(1),r=a(i),l=n(0),s=a(l);o.propTypes={nextClicked:r.default.func.isRequired,previousClicked:r.default.func.isRequired,canShowPrevious:r.default.bool.isRequired,canShowNext:r.default.bool.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"perPageChange",value:function(e){var t=parseInt(e.target.value,10);this.props.perPageChange(t)}},{key:"getOptions",value:function(){return _.map(this.props.options,function(e){return d.default.createElement("option",{value:e,key:e},e)})}},{key:"render",value:function(){return d.default.createElement("div",{id:"per-page"},d.default.createElement("label",{htmlFor:"select-per-page",className:"drop-down inline"},this.props.label," Â ",d.default.createElement("select",{id:"select-per-page",onChange:this.perPageChange.bind(this),value:this.props.perPage.toString(),className:"input-small"},this.getOptions())))}}]),t}(d.default.Component);t.default=f,f.defaultProps={label:"Documents per page: ",options:[5,10,20,30,50,100]},f.propTypes={perPage:u.default.number.isRequired,perPageChange:u.default.func.isRequired,label:u.default.string,options:u.default.array}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"getAmountShownFields",value:function(){var e=this.props.displayedFields;return e.shown===e.allFieldCount?d.default.createElement("div",{className:"pull-left shown-fields"},"Showing ",e.shown," columns."):d.default.createElement("div",{className:"pull-left shown-fields"},"Showing ",e.shown," of ",e.allFieldCount," columns.")}},{key:"render",value:function(){var e=this.props,t=e.prioritizedEnabled,n=e.toggleShowAllColumns;return d.default.createElement("div",{className:"footer-table-control"},this.getAmountShownFields(),d.default.createElement("div",{className:"footer-doc-control-prioritized-wrapper pull-left"},d.default.createElement("label",{htmlFor:"footer-doc-control-prioritized"},d.default.createElement("input",{id:"footer-doc-control-prioritized",checked:t,onChange:n,type:"checkbox"}),"Show all columns.")))}}]),t}(d.default.Component);t.default=f,f.propTypes={prioritizedEnabled:u.default.bool.isRequired,displayedFields:u.default.object.isRequired,toggleShowAllColumns:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"updateSkip",value:function(e){e.preventDefault();var t=e.target.value;/^\d*$/.test(t)||(d.default.addNotification({msg:"Skip can only be a number",type:"error"}),t=this.props.skip),this.props.updateSkip(t)}},{key:"updateLimit",value:function(e){e.preventDefault(),this.props.updateLimit(e.target.value)}},{key:"toggleDescending",value:function(){this.props.toggleDescending(this.props.descending)}},{key:"render",value:function(){return u.default.createElement("div",{className:"query-group",id:"query-options-additional-params"},u.default.createElement("div",{className:"add-on additionalParams"},"Additional Parameters"),u.default.createElement("div",{className:"row-fluid fieldsets"},u.default.createElement("div",{className:"dropdown inline"},u.default.createElement("label",{className:"drop-down"},"Limit",u.default.createElement("select",{id:"qoLimit",onChange:this.updateLimit.bind(this),name:"limit",value:this.props.limit,className:"input-small"},u.default.createElement("option",{value:"none"},"None"),u.default.createElement("option",{value:5},"5"),u.default.createElement("option",{value:10},"10"),u.default.createElement("option",{value:20},"20"),u.default.createElement("option",{value:30},"30"),u.default.createElement("option",{value:50},"50"),u.default.createElement("option",{value:100},"100"),u.default.createElement("option",{value:500},"500"))))),u.default.createElement("div",{className:"row-fluid fieldsets"},u.default.createElement("div",{className:"checkbox inline"},u.default.createElement("input",{id:"qoDescending",type:"checkbox",onChange:this.toggleDescending.bind(this),checked:this.props.descending}),u.default.createElement("label",{htmlFor:"qoDescending"},"Descending")),u.default.createElement("div",{className:"dropdown inline"},u.default.createElement("label",{htmlFor:"qoSkip",className:"drop-down"},"Skip",u.default.createElement("input",{value:this.props.skip,onChange:this.updateSkip.bind(this),className:"input-small",type:"number",id:"qoSkip",placeholder:"# of rows"})))))}}]),t}(u.default.Component);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=a(c),f=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"toggleByKeys",value:function(){this.props.toggleByKeys()}},{key:"toggleBetweenKeys",value:function(){this.props.toggleBetweenKeys()}},{key:"updateBetweenKeys",value:function(){this.props.updateBetweenKeys({startkey:d.default.findDOMNode(this.refs.startkey).value,endkey:d.default.findDOMNode(this.refs.endkey).value,include:this.props.betweenKeys.include})}},{key:"updateInclusiveEnd",value:function(){this.props.updateBetweenKeys({include:!this.props.betweenKeys.include,startkey:this.props.betweenKeys.startkey,endkey:this.props.betweenKeys.endkey})}},{key:"updateByKeys",value:function(e){this.props.updateByKeys(e.target.value)}},{key:"render",value:function(){var e="controls-group well js-query-keys-wrapper ",t="row-fluid js-keys-section ",n=t,a="drop-down btn ",o=a;return this.props.showByKeys||this.props.showBetweenKeys||(e+="hide"),this.props.showByKeys?a+="active":t+="hide",this.props.showBetweenKeys?o+="active":n+="hide",u.default.createElement("div",{className:"query-group",id:"query-options-key-search"},u.default.createElement("div",{className:"add-on"},"Keys"),u.default.createElement("div",{className:"btn-group toggle-btns row-fluid"},u.default.createElement("label",{style:{width:"101px"},id:"byKeys",onClick:this.toggleByKeys.bind(this),className:a},"By Key(s)"),u.default.createElement("label",{style:{width:"101px"},id:"betweenKeys",onClick:this.toggleBetweenKeys.bind(this),className:o},"Between Keys")),u.default.createElement("div",{className:e},u.default.createElement("div",{className:t,id:"js-showKeys"},u.default.createElement("div",{className:"controls controls-row"},u.default.createElement("label",{htmlFor:"keys-input",className:"drop-down"},"A key, or an array of keys."),u.default.createElement("textarea",{value:this.props.byKeys,onChange:this.updateByKeys.bind(this),id:"keys-input",className:"input-xxlarge",rows:"5",type:"text",placeholder:'Enter either a single key ["123"] or an array of keys ["123", "456"]. A key value is the first parameter emitted in a map function. For example emit("123", 1) the key is "123".'}),u.default.createElement("div",{id:"keys-error",className:"inline-block js-keys-error"}))),u.default.createElement("div",{className:n,id:"js-showStartEnd"},u.default.createElement("div",{className:"controls controls-row"},u.default.createElement("div",null,u.default.createElement("label",{htmlFor:"startkey",className:"drop-down"},"Start key"),u.default.createElement("input",{id:"startkey",ref:"startkey",type:"text",onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.startkey,placeholder:'e.g., "1234"'})),u.default.createElement("div",null,u.default.createElement("label",{htmlFor:"endkey",className:"drop-down"},"End key"),u.default.createElement("input",{id:"endkey",ref:"endkey",onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.endkey,type:"text",placeholder:'e.g., "1234"'}),u.default.createElement("div",{className:"controls include-end-key-row checkbox controls-row inline"},u.default.createElement("input",{id:"qoIncludeEndKeyInResults",ref:"inclusive_end",type:"checkbox",onChange:this.updateInclusiveEnd.bind(this),checked:this.props.betweenKeys.include}),u.default.createElement("label",{htmlFor:"qoIncludeEndKeyInResults"},"Include End Key in results")))))))}}]),t}(u.default.Component);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"toggleIncludeDocs",value:function(){this.props.toggleIncludeDocs(this.props.includeDocs)}},{key:"groupLevelChange",value:function(e){this.props.updateGroupLevel(e.target.value)}},{key:"groupLevel",value:function(){return this.props.reduce?d.default.createElement("label",{className:"drop-down inline",id:"qoGroupLevelGroup"},"Group Level",d.default.createElement("select",{onChange:this.groupLevelChange.bind(this),id:"qoGroupLevel",value:this.props.groupLevel,name:"group_level",className:"input-small"},d.default.createElement("option",{value:"0"},"None"),d.default.createElement("option",{value:"1"},"1"),d.default.createElement("option",{value:"2"},"2"),d.default.createElement("option",{value:"3"},"3"),d.default.createElement("option",{value:"4"},"4"),d.default.createElement("option",{value:"5"},"5"),d.default.createElement("option",{value:"6"},"6"),d.default.createElement("option",{value:"7"},"7"),d.default.createElement("option",{value:"8"},"8"),d.default.createElement("option",{value:"9"},"9"),d.default.createElement("option",{value:"exact"},"Exact"))):null}},{key:"toggleReduce",value:function(){this.props.toggleReduce(this.props.reduce)}},{key:"reduce",value:function(){return this.props.showReduce?d.default.createElement("span",null,d.default.createElement("div",{className:"checkbox inline"},d.default.createElement("input",{id:"qoReduce",name:"reduce",onChange:this.toggleReduce.bind(this),type:"checkbox",checked:this.props.reduce}),d.default.createElement("label",{htmlFor:"qoReduce"},"Reduce")),this.groupLevel()):null}},{key:"render",value:function(){var e=this.props.includeDocs;return d.default.createElement("div",{className:"query-group",id:"query-options-main-fields"},d.default.createElement("span",{className:"add-on"},"Query Options",d.default.createElement("a",{className:"help-link",href:this.props.docURL,target:"_blank","data-bypass":"true"},d.default.createElement("i",{className:"icon-question-sign"}))),d.default.createElement("div",{className:"controls-group qo-main-fields-row"},d.default.createElement("div",{className:"row-fluid fieldsets"},d.default.createElement("div",{className:"checkbox inline"},d.default.createElement("input",{disabled:this.props.reduce,onChange:this.toggleIncludeDocs.bind(this),id:"qoIncludeDocs",name:"include_docs",type:"checkbox",checked:e}),d.default.createElement("label",{className:this.props.reduce?"disabled":"",htmlFor:"qoIncludeDocs",id:"qoIncludeDocsLabel"},"Include Docs")),this.reduce())))}}]),t}(d.default.Component);t.default=f,f.propTypes={toggleIncludeDocs:u.default.func.isRequired,includeDocs:u.default.bool.isRequired,reduce:u.default.bool.isRequired,toggleReduce:u.default.func,updateGroupLevel:u.default.func,docURL:u.default.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"hideTray",value:function(){this.props.onCancel()}},{key:"render",value:function(){return d.default.createElement("div",{className:"controls-group query-group"},d.default.createElement("div",{id:"button-options",className:"controls controls-row"},d.default.createElement("button",{type:"submit",className:"btn btn-secondary"},"Run Query"),d.default.createElement("a",{onClick:this.hideTray.bind(this),className:"btn btn-cancelDark"},"Cancel")))}}]),t}(d.default.Component);t.default=f,f.propTypes={onCancel:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(2),p=a(f),h=n(15),m=a(h),_=n(30),g=a(_),E=n(440),b=a(E),y=n(439),v=a(y),N=n(438),D=a(N),O=n(441),S=a(O),T=m.default.ToggleHeaderButton,C=m.default.TrayContents,w=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=e.ddocsOnly,r=e.queryOptionsApplyFilterOnlyDdocs;return a&&r(),n}return r(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.ddocsOnly,a=t.queryOptionsApplyFilterOnlyDdocs,o=t.queryOptionsRemoveFilterOnlyDdocs;!n&&e.ddocsOnly?a():n&&!e.ddocsOnly&&o()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.ddocsOnly,n=e.queryOptionsRemoveFilterOnlyDdocs;t&&n()}},{key:"executeQuery",value:function(e){e&&e.preventDefault(),this.closeTray();var t=this.props,n=t.queryOptionsExecute,a=t.queryOptionsParams,o=t.perPage,i=t.resetPagination,r=t.selectedLayout,l=t.changeLayout;i(o);var s=r===g.default.LAYOUT_ORIENTATION.METADATA;s&&a.include_docs?l(g.default.LAYOUT_ORIENTATION.TABLE):s||a.include_docs||l(g.default.LAYOUT_ORIENTATION.METADATA),n(a,o)}},{key:"toggleTrayVisibility",value:function(){this.props.queryOptionsToggleVisibility(!this.props.contentVisible)}},{key:"closeTray",value:function(){this.props.queryOptionsToggleVisibility(!1)}},{key:"getTray",value:function(){return d.default.createElement(C,{closeTray:this.closeTray.bind(this),contentVisible:this.props.contentVisible,className:"query-options",id:"query-options-tray"},d.default.createElement("form",{onSubmit:this.executeQuery.bind(this),className:"js-view-query-update custom-inputs"},d.default.createElement(b.default,{includeDocs:this.props.includeDocs,toggleIncludeDocs:this.props.queryOptionsToggleIncludeDocs,showReduce:this.props.showReduce,reduce:this.props.reduce,toggleReduce:this.props.queryOptionsToggleReduce,groupLevel:this.props.groupLevel,updateGroupLevel:this.props.queryOptionsUpdateGroupLevel,docURL:p.default.constants.DOC_URLS.GENERAL}),d.default.createElement(v.default,{key:1,showByKeys:this.props.showByKeys,showBetweenKeys:this.props.showBetweenKeys,toggleByKeys:this.props.queryOptionsToggleByKeys,toggleBetweenKeys:this.props.queryOptionsToggleBetweenKeys,betweenKeys:this.props.betweenKeys,updateBetweenKeys:this.props.queryOptionsUpdateBetweenKeys,byKeys:this.props.byKeys,updateByKeys:this.props.queryOptionsUpdateByKeys}),d.default.createElement(D.default,{descending:this.props.descending,toggleDescending:this.props.queryOptionsToggleDescending,skip:this.props.skip,updateSkip:this.props.queryOptionsUpdateSkip,updateLimit:this.props.queryOptionsUpdateLimit,limit:this.props.limit}),d.default.createElement(S.default,{onCancel:this.closeTray.bind(this)})))}},{key:"showAsActive",value:function(){var e=this.props,t=e.reduce,n=e.betweenKeys,a=e.byKeys,o=e.descending,i=e.skip,r=e.limit;return!!(n&&n.startkey||a||r&&"none"!=r||i||t||o)}},{key:"render",value:function(){return d.default.createElement("div",{id:"header-query-options"},d.default.createElement("div",{id:"query-options"},d.default.createElement("div",null,d.default.createElement(T,{toggleCallback:this.toggleTrayVisibility.bind(this),containerClasses:"header-control-box control-toggle-queryoptions",title:"Query Options",fonticon:"fonticon-gears",text:"Options",active:this.showAsActive()}),this.getTray())))}}]),t}(d.default.Component);t.default=w,w.propTypes={contentVisible:u.default.bool.isRequired,queryOptionsApplyFilterOnlyDdocs:u.default.func.isRequired,queryOptionsRemoveFilterOnlyDdocs:u.default.func.isRequired,queryOptionsExecute:u.default.func.isRequired,queryOptionsParams:u.default.object.isRequired,perPage:u.default.number.isRequired,resetPagination:u.default.func.isRequired,selectedLayout:u.default.string.isRequired,changeLayout:u.default.func.isRequired,queryOptionsToggleVisibility:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),c=a(u),d=n(0),f=a(d),p=n(445),h=a(p),m=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchDocs,n=e.fetchParams,a=e.queryOptionsParams;e.fetchAtStartup&&t(n,a)}},{key:"componentWillUpdate",value:function(e){var t=e.fetchDocs,n=e.fetchParams,a=e.queryOptionsParams,o=e.ddocsOnly,i=e.fetchUrl,r=e.resetState;this.props.ddocsOnly===o&&this.props.fetchUrl===i||(r(),t(l({},n,{skip:0}),l({},a,{reduce:void 0,group:void 0,group_level:void 0})))}},{key:"componentWillUnmount",value:function(){(0,this.props.resetState)()}},{key:"deleteSelectedDocs",value:function(){var e=this.props,t=e.bulkDeleteDocs,n=e.fetchParams;t(e.selectedDocs,n,e.queryOptionsParams)}},{key:"isSelected",value:function(e){return this.props.selectedDocs.findIndex(function(t){return e===t._id})>-1}},{key:"docChecked",value:function(e,t){if(e){var n=this.props;(0,n.selectDoc)({_id:e,_rev:t},n.selectedDocs)}}},{key:"toggleSelectAll",value:function(){var e=this.props,t=e.docs,n=e.selectedDocs,a=e.allDocumentsSelected;(0,e.bulkCheckOrUncheck)(t,n,a)}},{key:"render",value:function(){var e=this.props.results;return f.default.createElement(h.default,l({removeItem:this.deleteSelectedDocs.bind(this),isSelected:this.isSelected.bind(this),docChecked:this.docChecked.bind(this),isListDeletable:e.hasBulkDeletableDoc,toggleSelectAll:this.toggleSelectAll.bind(this)},this.props))}}]),t}(f.default.Component);t.default=m,m.propTypes={fetchAtStartup:c.default.bool.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.text;return s.default.createElement("div",{className:"no-results-screen"},s.default.createElement("div",{className:"watermark-logo"}),s.default.createElement("h3",null,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(1),r=a(i),l=n(0),s=a(l);o.propTypes={text:r.default.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(30),p=a(f),h=n(15),m=a(h),g=n(428),E=n(444),b=a(E),y=n(447),v=a(y),N=m.default.LoadLines,D=m.default.Document,O=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"onClick",value:function(e,t){t.url&&d.default.navigate(t.url)}},{key:"getUrlFragment",value:function(e){return this.props.isEditable?u.default.createElement("a",{href:e},u.default.createElement("i",{className:"fonticon-pencil"})):null}},{key:"getDocumentList",value:function(){var e=function(){},t=this.props.results.results;return _.map(t,function(t,n){return u.default.createElement(D,{key:t.id+n,doc:t,onClick:this.props.isEditable?this.onClick:e,keylabel:t.keylabel,docContent:t.content,checked:this.props.isSelected(t.id),header:t.header,docChecked:this.props.docChecked,isDeletable:t.isDeletable,docIdentifier:t.id},t.url?this.getUrlFragment("#"+t.url):t.url)},this)}},{key:"getDocumentStyleView",value:function(){var e="view";return this.props.isListDeletable&&(e+=" show-select"),u.default.createElement("div",{className:e},u.default.createElement("div",{id:"doc-list"},this.getDocumentList()))}},{key:"getTableStyleView",value:function(){return u.default.createElement("div",null,u.default.createElement(v.default,{onClick:this.onClick,docChecked:this.props.docChecked,isSelected:this.props.isSelected,isListDeletable:this.props.isListDeletable,data:this.props.results,isLoading:this.props.isLoading,removeItem:this.props.removeItem,isChecked:this.props.allDocumentsSelected,hasSelectedItem:this.props.hasSelectedItem,toggleSelect:this.toggleSelectAll,changeField:this.props.changeTableHeaderAttribute,title:"Select all docs that can be..."}))}},{key:"render",value:function(){var e=null;return e=this.props.isLoading?u.default.createElement("div",{className:"loading-lines-wrapper"},u.default.createElement(N,null)):this.props.hasResults?this.props.selectedLayout===p.default.LAYOUT_ORIENTATION.JSON?this.getDocumentStyleView():this.getTableStyleView():u.default.createElement(b.default,{text:this.props.textEmptyIndex}),u.default.createElement("div",{className:"document-result-screen"},u.default.createElement(g.ResultsToolBar,this.props),e)}}]),t}(u.default.Component);t.default=O},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),c=a(u),d=n(0),f=a(d),p=n(2),h=a(p),m=n(15),_=a(m),g=n(94),E=a(g),b=_.default.Copy,y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={checked:n.props.isSelected},n}return r(t,e),s(t,[{key:"onChange",value:function(){this.props.docChecked(this.props.el.id,this.props.el._rev)}},{key:"getRowContents",value:function(e,t){var n=e.content;return this.props.data.selectedFields.map(function(e,a){var o="tableview-data-cell-"+t+e+a+n[e],i="object"===l(n[e])?JSON.stringify(n[e],null,"  "):n[e];return f.default.createElement("td",{key:o,title:i,onClick:this.onClick.bind(this)},i)}.bind(this))}},{key:"maybeGetCheckboxCell",value:function(e,t){return f.default.createElement("td",{className:"tableview-checkbox-cell",key:"tableview-checkbox-cell-"+t},e.isDeletable?f.default.createElement("input",{id:"checkbox-"+this.props.docIdentifier,checked:this.props.isSelected,type:"checkbox",onChange:this.onChange.bind(this)}):null)}},{key:"getAdditionalInfoRow",value:function(e){var t=Object.keys(e._attachments||{}).length,n=null,a=null,o=Object.keys(e._conflicts||{}).length,i=null,r=null;return t&&(a=1===t?t+" Attachment":t+" Attachments",n=f.default.createElement("div",{style:{display:"inline",marginLeft:"5px"},title:a},f.default.createElement("i",{className:"icon fonticon-paperclip"}),t)),o&&(r=1===o?o+" Conflict":o+" Conflicts",i=f.default.createElement("div",{className:"tableview-conflict","data-conflicts-indicator":!0,style:{display:"inline"},title:r},f.default.createElement("i",{style:{fontSize:"17px"},className:"icon icon-code-fork"}),o)),f.default.createElement("td",{className:"tableview-el-last",onClick:this.onClick},i,n)}},{key:"getCopyButton",value:function(e){var t=JSON.stringify(e,null,"  ");return f.default.createElement("td",{title:t,className:"tableview-el-copy"},f.default.createElement(b,{title:t,text:t,uniqueKey:E.default.v4(),onClipboardClick:this.showCopiedMessage}))}},{key:"showCopiedMessage",value:function(){h.default.addNotification({msg:"The document content has been copied to the clipboard.",type:"success",clear:!0})}},{key:"onClick",value:function(e){this.props.onClick(this.props.el._id,this.props.el,e)}},{key:"render",value:function(){var e=this.props.index,t=this.props.el.content,n=this.props.el;return f.default.createElement("tr",{key:"tableview-content-row-"+e},this.maybeGetCheckboxCell(n,e),this.getCopyButton(t),this.getRowContents(n,e),this.getAdditionalInfoRow(t))}}]),t}(f.default.Component);t.default=y,y.propTypes={docIdentifier:c.default.string.isRequired,docChecked:c.default.func.isRequired,isSelected:c.default.bool.isRequired,index:c.default.number.isRequired,data:c.default.object.isRequired,onClick:c.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(446),d=a(c),f=n(448),p=a(f),h=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"getContentRows",value:function(){return this.props.data.results.map(function(e,t){return u.default.createElement(d.default,{onClick:this.props.onClick,key:"tableview-row-component-"+t,index:t,el:e,docIdentifier:e.id||"tableview-row-component-"+t,docChecked:this.props.docChecked,isSelected:this.props.isSelected(e.id),data:this.props.data})}.bind(this))}},{key:"getOptionFieldRows",value:function(e){return this.props.data.notSelectedFields?e.map(function(e,t){return u.default.createElement("th",{key:"header-el-"+t},this.getDropdown(e,this.props.data.schema,t,this.props.changeField,this.props.data.selectedFields))}.bind(this)):e.map(function(e,t){return u.default.createElement("th",{key:"header-el-"+t},e)})}},{key:"getDropdown",value:function(e,t,n,a,o){return u.default.createElement(p.default,{selectedField:e,notSelectedFields:t,index:n,changeField:a,selectedFields:o})}},{key:"getHeader",value:function(){var e=this.props.data.selectedFields,t=this.getOptionFieldRows(e);return u.default.createElement("tr",{key:"tableview-content-row-header"},u.default.createElement("th",{className:"tableview-header-el-checkbox"}),u.default.createElement("th",{className:"tableview-el-copy"}),t,u.default.createElement("th",{className:"tableview-el-last"}))}},{key:"render",value:function(){return u.default.createElement("div",{className:"table-view-docs"},u.default.createElement("table",{className:"table table-striped"},u.default.createElement("thead",null,this.getHeader()),u.default.createElement("tbody",null,this.getContentRows())))}}]),t}(u.default.Component);t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.selectedField,n=e.notSelectedFields,a=e.index,o=e.changeField,i=e.selectedFields,l=n.map(function(e){return{value:e,label:e}});return r.default.createElement("div",{className:"table-container-autocomplete"},r.default.createElement("div",{className:"table-select-wrapper"},r.default.createElement(s.default,{value:t,options:l,clearable:!1,onChange:function(e){o({newSelectedRow:e.value,index:a},i)}})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(0),r=a(i),l=n(32),s=a(l)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=a(o),r=n(26),l=n(37),s=a(l),u=n(442),c=a(u),d=n(73),f=n(242),p=n(243),h=n(75),m=function(e,t){return s.default.selectedViewContainsReduceFunction(e,t)},_=function(e,t){var n=e.indexResults,a=e.sidebar,o=(0,h.getQueryOptionsPanel)(n);return{contentVisible:o.isVisible,includeDocs:o.includeDocs,showReduce:m(a.designDocs,t.selectedNavItem),reduce:o.reduce,groupLevel:o.groupLevel,showByKeys:o.showByKeys,showBetweenKeys:o.showBetweenKeys,betweenKeys:o.betweenKeys,byKeys:o.byKeys,descending:o.descending,skip:o.skip,limit:o.limit,fetchParams:(0,h.getFetchParams)(n),queryOptionsParams:(0,h.getQueryOptionsParams)(n),perPage:(0,h.getPerPage)(n),selectedLayout:(0,h.getSelectedLayout)(n),ddocsOnly:t.ddocsOnly}},g=function(e,t){return{resetPagination:function(t){e((0,f.resetPagination)(t))},queryOptionsToggleReduce:function(t){e((0,p.queryOptionsToggleReduce)(t))},queryOptionsUpdateGroupLevel:function(t){e((0,p.queryOptionsUpdateGroupLevel)(t))},queryOptionsToggleByKeys:function(t){e((0,p.queryOptionsToggleByKeys)(t))},queryOptionsToggleBetweenKeys:function(t){e((0,p.queryOptionsToggleBetweenKeys)(t))},queryOptionsUpdateBetweenKeys:function(t){e((0,p.queryOptionsUpdateBetweenKeys)(t))},queryOptionsUpdateByKeys:function(t){e((0,p.queryOptionsUpdateByKeys)(t))},queryOptionsToggleDescending:function(t){e((0,p.queryOptionsToggleDescending)(t))},queryOptionsUpdateSkip:function(t){e((0,p.queryOptionsUpdateSkip)(t))},queryOptionsUpdateLimit:function(t){e((0,p.queryOptionsUpdateLimit)(t))},queryOptionsToggleIncludeDocs:function(t){e((0,p.queryOptionsToggleIncludeDocs)(t))},queryOptionsToggleVisibility:function(t){e((0,p.queryOptionsToggleVisibility)(t))},queryOptionsExecute:function(n,a){e((0,p.queryOptionsExecute)(t.queryDocs,n,a))},queryOptionsApplyFilterOnlyDdocs:function(){e((0,p.queryOptionsFilterOnlyDdocs)())},queryOptionsRemoveFilterOnlyDdocs:function(){e((0,p.queryOptionsRemoveFilterOnlyDdocs)())},changeLayout:function(t){e((0,d.changeLayout)(t))},resetState:function(){e((0,d.resetState)())}}},E=(0,r.connect)(_,g)(c.default);t.default=E,E.propTypes={queryDocs:i.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getJsonViewData=void 0;var o=n(74),i=n(100),r=a(i);t.getJsonViewData=function(e,t){var n=t.databaseName,a=t.docType,i=t.deleteEnabled,l=void 0===i||i,s=e.map(function(e){if("MangoIndex"===a)return{header:r.default.getIndexName(e),content:r.default.getIndexContent(e),id:"special"===e.type?"_all_docs":e.ddoc,keylabel:"",url:e.id?(0,o.getDocUrl)("app",e.id,n):null,isDeletable:!!l&&"special"!==e.type,isEditable:!1};var t=(0,o.getDocId)(e,a);return{header:t,content:JSON.stringify(e,null," "),id:t||e.key&&e.key.toString(),_rev:(0,o.getDocRev)(e,a),keylabel:"id",url:t?(0,o.getDocUrl)("app",t,n):null,isDeletable:l,isEditable:!0}});return{displayedFields:null,hasBulkDeletableDoc:(0,o.hasBulkDeletableDoc)(e,a),results:s}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getTableViewData=t.getMetaDataTableView=t.getFullTableViewData=t.getNotSelectedFields=t.sortByTwoFields=t.getPrioritizedFields=t.getPseudoSchema=void 0;var o=n(30),i=a(o),r=n(74),l=t.getPseudoSchema=function(e){var t=[];e.forEach(function(e){Object.keys(e).forEach(function(e){t.push(e)})}),t=_.uniq(t);var n=t.indexOf("_id");return-1!==n&&(t.splice(n,1),t.unshift("_id")),t},s=t.getPrioritizedFields=function(e,t){var n=e.reduce(function(e,t){return e=e.concat(Object.keys(t))},[]);return n=_.countBy(n,function(e){return e}),delete n.id,delete n._rev,n=Object.keys(n).reduce(function(e,t){return e.push([n[t],t]),e},[]),n=u(n),n=n.slice(0,t),n.reduce(function(e,t){return e.push(t[1]),e},[])},u=t.sortByTwoFields=function(e){var t=function e(t,n,a){return t[a]===n[a]?a<2?e(t,n,a+1):0:1===a?t[a]<n[a]?-1:1:t[a]<n[a]?1:-1};return e.sort(function(e,n){return t(e,n,0)})},c=t.getNotSelectedFields=function(e,t){return _.without.bind(void 0,t).apply(void 0,e)},d=t.getFullTableViewData=function(e,t){var n=null,a=t.selectedFieldsTableView,o=t.showAllFieldsTableView,i=void 0,r=e.map(function(e){return e.doc||e});i=l(r),a&&0===a.length&&(a=s(r,5));var u=_.without(i,"_attachments");return n=c(a,u),o&&(n=null,a=u),{schema:i,normalizedDocs:r,selectedFieldsTableView:a,notSelectedFieldsTableView:n}},f=t.getMetaDataTableView=function(e){var t=l(e);return{schema:t,normalizedDocs:e,selectedFieldsTableView:t,notSelectedFieldsTableView:null}};t.getTableViewData=function(e,t){var n=i.default.LAYOUT_ORIENTATION.METADATA===t.selectedLayout,a=n?f(e):d(e,t),o=a.schema,l=a.normalizedDocs,s=a.selectedFieldsTableView,u=a.notSelectedFieldsTableView,c=l.map(function(e){return{content:e,id:(0,r.getDocId)(e,t.docType),_rev:(0,r.getDocRev)(e,t.docType),header:"",keylabel:"",url:e._id||e.id?(0,r.getDocUrl)("app",e._id||e.id,t.databaseName):null,isDeletable:!!t.deleteEnabled&&(0,r.isJSONDocBulkDeletable)(e,t.docType),isEditable:(0,r.isJSONDocEditable)(e,t.docType)}});return{notSelectedFields:u,selectedFields:s,hasBulkDeletableDoc:!!t.deleteEnabled&&(0,r.hasBulkDeletableDoc)(l,t.docType),schema:o,results:c,displayedFields:n?null:{shown:_.uniq(s).length,allFieldCount:_.without(o,"_attachments").length}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(19),d="The number of documents examined is high in proportion to the number of results returned. Consider adding an index to improve this.",f=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"humanizeDuration",value:function(e){if(e<1e3)return Math.round(e)+" ms";var t=e/1e3;if(t<60)return Math.floor(t)+" seconds";var n=Math.floor(t/60);return t-=60*n,n+"minute, "+t+"seconds"}},{key:"getWarning",value:function(e,t){return e&&!t&&e.results_returned&&(e.total_docs_examined||e.total_quorum_docs_examined)/e.results_returned>10?d:t}},{key:"warningPopupComponent",value:function(e){if(e)return u.default.createElement("div",{className:"warning"},u.default.createElement("i",{className:"fonticon-attention-circled"})," ",e)}},{key:"executionStatsLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=0!==t||n?"true":"false";return u.default.createElement("div",{"data-status":o},e+": ",u.default.createElement("span",{className:"value"},t.toLocaleString()," ",a))}},{key:"executionStatsPopupComponent",value:function(e){return e?u.default.createElement("div",{className:"execution-stats-popup-component"},this.executionStatsLine("documents examined",e.total_docs_examined),this.executionStatsLine("documents examined (quorum)",e.total_quorum_docs_examined),this.executionStatsLine("results returned",e.results_returned,!0),this.executionStatsLine("execution time",e.execution_time_ms,!1,"ms")):null}},{key:"popup",value:function(e,t){return u.default.createElement(c.Popover,{id:"popover-execution-stats",title:"Execution Statistics"},u.default.createElement("div",{className:"execution-stats-popup"},this.executionStatsPopupComponent(e),this.warningPopupComponent(t)))}},{key:"render",value:function(){var e=this.props,t=e.executionStats,n=e.warning,a=this.getWarning(t,n),o=null;a&&(o=u.default.createElement("i",{className:"fonticon-attention-circled"}));var i=null;t?i=u.default.createElement("span",{className:"execution-stats-component"},"Executed in ",this.humanizeDuration(t.execution_time_ms)):a&&(i=u.default.createElement("span",{className:"execution-stats-component"},"Warning"));var r=this.popup(t,a);return u.default.createElement(c.OverlayTrigger,{trigger:["hover","focus","click"],placement:"right",overlay:r},u.default.createElement("span",{className:"execution-stats"},o,i))}}]),t}(u.default.Component);t.default=f,f.propTypes={executionStats:u.default.PropTypes.object,warning:u.default.PropTypes.string}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"render",value:function(){return d.default.createElement("div",null,d.default.createElement("pre",{className:"prettyprint"},JSON.stringify(this.props.explainPlan,null," ")))}}]),t}(c.Component);t.default=f,f.propTypes={explainPlan:u.default.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),c=a(u),d=n(0),f=a(d),p=n(32),h=a(p);n(103);var m=n(11),_=a(m),g=n(2),E=a(g),b=n(15),y=a(b),v=y.default.PaddedBorderedBox,N=y.default.CodeEditorPanel,D=y.default.ConfirmButton,O=_.default.helpers.getDocUrl,S=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),s(t,[{key:"componentDidMount",value:function(){prettyPrint(),this.props.loadIndexTemplates(),this.props.clearResults(),this.props.loadIndexList({fetchParams:l({},this.props.fetchParams,{skip:0})})}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.templates!=this.props.templates&&this.setEditorValue(this.props.templates[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.refs.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.refs.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.refs.codeEditor.getEditor().hasErrors()}},{key:"onTemplateSelected",value:function(e){this.setEditorValue(e.value)}},{key:"editor",value:function(){var e=this,t="#"+E.default.urls("mango","query-app",encodeURIComponent(this.props.databaseName));return f.default.createElement("div",{className:"mango-editor-wrapper"},f.default.createElement("form",{className:"form-horizontal",onSubmit:function(t){e.saveIndex(t)}},f.default.createElement("div",{className:"padded-box"},f.default.createElement(h.default,{className:"mango-select",options:this.props.templates,ref:"templates",placeholder:"Examples",searchable:!1,clearable:!1,autosize:!1,onChange:function(t){e.onTemplateSelected(t)}})),f.default.createElement(v,null,f.default.createElement(N,{id:"query-field",ref:"codeEditor",title:"Index",docLink:O("MANGO_INDEX"),defaultCode:this.props.queryIndexCode})),f.default.createElement("div",{className:"padded-box"},f.default.createElement("div",{className:"control-group"},f.default.createElement(D,{text:"Create index",id:"create-index-btn",showIcon:!1}),f.default.createElement("a",{className:"edit-link",href:t},"edit query")))))}},{key:"render",value:function(){return this.editor()}},{key:"saveIndex",value:function(e){if(e.preventDefault(),this.editorHasErrors())return void E.default.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0});this.props.saveIndex({databaseName:this.props.databaseName,indexCode:this.getEditorValue(),fetchParams:this.props.fetchParams})}}]),t}(d.Component);t.default=S,S.propTypes={databaseName:c.default.string.isRequired,saveIndex:c.default.func.isRequired,queryIndexCode:c.default.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26),r=n(54),l=o(r),s=n(73),u=o(s),c=n(454),d=a(c),f=n(100),p=a(f),h=n(248),m=a(h),_=n(99),g=o(_),E=function(e,t){var n=e.mangoQuery,a=e.indexResults;return{description:t.description,databaseName:t.databaseName,queryIndexCode:p.default.formatCode(n.queryIndexCode),templates:n.queryIndexTemplates,fetchParams:a.fetchParams}},b=function(e,t){return{saveIndex:function(t){e(m.default.saveIndex(t))},loadIndexList:function(n){var a=function(e){return g.fetchIndexes(t.databaseName,e)};e(l.fetchDocs(a,n.fetchParams,{}))},clearResults:function(){e(u.resetState())},loadIndexTemplates:function(){e(m.default.loadIndexTemplates())}}},y=(0,i.connect)(E,b)(d.default);t.default=y},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),c=a(u),d=n(0),f=a(d),p=n(32),h=a(p);n(103);var m=n(11),_=a(m),g=n(2),E=a(g),b=n(15),y=a(b),v=n(452),N=a(v),D=y.default.PaddedBorderedBox,O=y.default.CodeEditorPanel,S=_.default.helpers.getDocUrl,T=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),s(t,[{key:"componentDidMount",value:function(){prettyPrint(),this.props.loadQueryHistory({databaseName:this.props.databaseName}),this.props.clearResults()}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.history!=this.props.history&&this.setEditorValue(this.props.history[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.refs.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.refs.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.refs.codeEditor.getEditor().hasErrors()}},{key:"onHistorySelected",value:function(e){this.setEditorValue(e.value)}},{key:"editor",value:function(){var e=this;return f.default.createElement("div",{className:"mango-editor-wrapper"},f.default.createElement("form",{className:"form-horizontal",onSubmit:function(t){e.runQuery(t)}},f.default.createElement("div",{className:"padded-box"},f.default.createElement(h.default,{className:"mango-select",options:this.props.history,ref:"history",placeholder:"Query history",searchable:!1,clearable:!1,autosize:!1,onChange:function(t){e.onHistorySelected(t)}})),f.default.createElement(D,null,f.default.createElement(O,{id:"query-field",ref:"codeEditor",title:this.props.editorTitle,docLink:S("MANGO_SEARCH"),defaultCode:this.props.queryFindCode})),f.default.createElement("div",{className:"padded-box"},f.default.createElement("div",{className:"control-group"},f.default.createElement("button",{type:"submit",id:"create-index-btn",className:"btn btn-primary btn-space"},"Run Query"),f.default.createElement("button",{type:"button",id:"explain-btn",className:"btn btn-secondary btn-space",onClick:function(t){e.runExplain(t)}},"Explain"),f.default.createElement("a",{className:"edit-link",style:{},onClick:function(t){e.manageIndexes(t)}},"manage indexes")),f.default.createElement("div",null,f.default.createElement(N.default,this.props)))))}},{key:"render",value:function(){return this.props.isLoading?f.default.createElement("div",{className:"mango-editor-wrapper"},f.default.createElement(y.default.LoadLines,null)):this.editor()}},{key:"notifyOnQueryError",value:function(){return!!this.editorHasErrors()&&(E.default.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0}),!0)}},{key:"manageIndexes",value:function(e){e.preventDefault(),this.props.manageIndexes();var t="#"+E.default.urls("mango","index-app",encodeURIComponent(this.props.databaseName));E.default.navigate(t)}},{key:"runExplain",value:function(e){e.preventDefault(),this.notifyOnQueryError()||this.props.runExplainQuery({databaseName:this.props.databaseName,queryCode:this.getEditorValue()})}},{key:"runQuery",value:function(e){e.preventDefault(),this.notifyOnQueryError()||(this.props.clearResults(),this.props.runQuery({databaseName:this.props.databaseName,queryCode:JSON.parse(this.getEditorValue()),fetchParams:l({},this.props.fetchParams,{skip:0})}))}}]),t}(d.Component);t.default=T,T.propTypes={description:c.default.string.isRequired,editorTitle:c.default.string.isRequired,queryFindCode:c.default.string.isRequired,queryFindCodeChanged:c.default.bool,databaseName:c.default.string.isRequired,runExplainQuery:c.default.func.isRequired,manageIndexes:c.default.func.isRequired}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26),r=n(2),l=o(r),s=n(54),u=a(s),c=n(73),d=a(c),f=n(456),p=o(f),h=n(100),m=o(h),_=n(248),g=o(_),E=n(99),b=a(E),y=function(e){var t=e.availableIndexes;return t?t.filter(function(e){return["json","special"].includes(e.type)}):[]},v=function(e){var t=e.additionalIndexes;if(!t)return[];var n=l.default.getExtensions("mango:additionalIndexes")[0];return n?t.filter(function(e){return-1!==e.get("type").indexOf(n.type)}):void 0},N=function(e,t){var n=e.mangoQuery,a=e.indexResults;return{databaseName:t.databaseName,queryFindCode:m.default.formatCode(n.queryFindCode),queryFindCodeChanged:n.queryFindCodeChanged,availableIndexes:y(n),additionalIndexes:v(n),isLoading:n.isLoading,history:n.history,description:t.description,editorTitle:t.editorTitle,additionalIndexesText:t.additionalIndexesText,fetchParams:a.fetchParams,executionStats:a.executionStats,warning:a.warning}},D=function(e){return{loadQueryHistory:function(t){e(g.default.loadQueryHistory(t))},runExplainQuery:function(t){e(g.default.runExplainQuery(t))},runQuery:function(t){var n=function(e){return b.mangoQueryDocs(t.databaseName,t.queryCode,e)};e(g.default.hideQueryExplain()),e(g.default.newQueryFindCode(t)),e(u.fetchDocs(n,t.fetchParams,{}))},clearResults:function(){e(d.resetState())},manageIndexes:function(){e(g.default.hideQueryExplain())}}},O=(0,i.connect)(N,D)(p.default);t.default=O},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(457),i=a(o),r=n(455),l=a(r),s=n(453),u=a(s);t.default={MangoIndexEditorContainer:l.default,MangoQueryEditorContainer:i.default,ExplainPage:u.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={INDEX_TEMPLATES:[{label:"Single field (json)",code:{index:{fields:["foo"]},name:"foo-json-index",type:"json"}},{label:"Multiple fields (json)",code:{index:{fields:["foo","bar"]},name:"foo-bar-json-index",type:"json"}}]}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments[1],n=t.options;switch(t.type){case d.default.MANGO_SET_DB:return i({},e,{database:n.database,historyKey:n.database?n.database.id:"default"});case d.default.MANGO_LOAD_QUERY_HISTORY:var a=O(n.databaseName);return i({},e,{history:a,historyKey:n.databaseName+"_queryhistory",queryFindCode:JSON.parse(a[0].value)});case d.default.MANGO_NEW_QUERY_FIND_CODE:return i({},e,{queryFindCode:n.queryCode,history:S(e,n.queryCode)});case d.default.MANGO_RESET:return i({},e,{getLoadingIndexes:n.isLoading});case d.default.MANGO_LOAD_INDEX_TEMPLATES:var o=v();return i({},e,{queryIndexTemplates:o,queryIndexCode:JSON.parse(o[0].value)});case d.default.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:return i({},e,{queryIndexCode:n.code,queryIndexTemplates:T(e,n.code,n.label)});case d.default.MANGO_SHOW_EXPLAIN_RESULTS:return i({},e,{explainPlan:n.explainPlan});case d.default.MANGO_HIDE_EXPLAIN_RESULTS:return i({},e,{explainPlan:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=o;var r=n(11),l=a(r),s=n(2),u=a(s),c=n(249),d=a(c),f=n(100),p=a(f),h=n(459),m=a(h),_={index:{fields:["_id"]},type:"json"},g={selector:{_id:{$gt:null}}},E=function(e){var t="string"==typeof e?JSON.parse(e):e;return{label:JSON.stringify(t),value:p.default.formatCode(t),className:"mango-select-entry"}},b=function(){return[E(g)]},y=function(){return m.default.INDEX_TEMPLATES.map(function(e){var t=E(e.code);return t.label=e.label||t.label,t})},v=function(){var e=u.default.getExtensions("mango:indexTemplates")[0];return e?e.filter(function(e){return!!e.code}).map(function(e){var t=E(e.code);return t.label=e.label||t.label,t}):y()},N=5,D={queryFindCode:g,queryIndexCode:_,queryFindCodeChanged:!1,explainPlan:void 0,history:b(),historyKey:"default",queryIndexTemplates:y()},O=function(e){var t=e+"_queryhistory",n=l.default.utils.localStorageGet(t);return n||(n=u.default.getExtensions("mango:queryHistory")[0],n?n.filter(function(e){return!!e.code}).map(function(e){var t=E(e.code);return t.label=e.label||t.label,t}):b())},S=function(e,t,n){var a=e.historyKey,o=e.history,i=o.slice(),r=E(t);r.label=n||r.label;var s=i.findIndex(function(e){return e.value===r.value});return s>-1&&i.splice(s,1),i.unshift(r),i.length>N&&i.splice(N,1),l.default.utils.localStorageSet(a,i),i},T=function(e,t,n){var a=e.queryIndexTemplates,o=a.slice(),i=E(t);i.label=n||i.label,o.find(function(e){return e.value===i.value})||o.push(i)}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MangoLayoutContainer=t.MangoContent=t.MangoHeader=t.MangoFooter=t.RightHeader=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=o(u),d=n(26),f=n(11),p=o(f),h=n(96),m=n(77),_=n(458),g=o(_),E=n(99),b=a(E),y=n(246),v=o(y),N=n(247),D=o(N),O=n(245),S=o(O),T=n(2),C=o(T),w=n(30),I=o(w),A=t.RightHeader=function(e){var t=e.docURL,n=e.endpoint,a=c.default.createElement(S.default,{docURL:t,endpoint:n,includeQueryOptionsParams:!1});return c.default.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},c.default.createElement("div",{id:"right-header",className:"flex-body"}),a,c.default.createElement("div",{id:"notification-center-btn"},c.default.createElement(m.NotificationCenterButton,null)))},R=t.MangoFooter=function(e){var t=e.databaseName,n=e.fetchUrl,a=e.queryDocs;return c.default.createElement("div",{id:"footer"},c.default.createElement(D.default,{databaseName:t,fetchUrl:n,queryDocs:a}))},P=t.MangoHeader=function(e){var t=e.crumbs,n=e.docURL,a=e.endpoint;return c.default.createElement("div",{className:"header-wrapper flex-layout flex-row"},c.default.createElement("div",{className:"flex-body faux__breadcrumbs-mango-header"},c.default.createElement(h.Breadcrumbs,{crumbs:t})),c.default.createElement(A,{docURL:n,endpoint:a}))};P.defaultProps={crumbs:[]};var L=t.MangoContent=function(e){var t=e.edit,n=e.designDocs,a=e.explainPlan,o=e.databaseName,i=e.fetchUrl,r=e.queryDocs,l=e.docType,s=t?c.default.createElement(g.default.MangoIndexEditorContainer,{description:p.default.i18n.en_US["mango-descripton-index-editor"],databaseName:o}):c.default.createElement(g.default.MangoQueryEditorContainer,{description:p.default.i18n.en_US["mango-descripton"],editorTitle:p.default.i18n.en_US["mango-title-editor"],additionalIndexesText:p.default.i18n.en_US["mango-additional-indexes-heading"],databaseName:o}),u=c.default.createElement(v.default,{fetchUrl:i,designDocs:n,ddocsOnly:!1,databaseName:o,fetchAtStartup:!1,queryDocs:r,docType:l}),d=c.default.createElement(R,{databaseName:o,fetchUrl:i,queryDocs:r});return a&&(u=c.default.createElement(g.default.ExplainPage,{explainPlan:a}),d=null),c.default.createElement("div",{id:"two-pane-content",className:"flex-layout flex-row flex-body"},c.default.createElement("div",{id:"left-content",className:"flex-body"},s),c.default.createElement("div",{id:"right-content",className:"flex-body flex-layout flex-col"},c.default.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},u),d))},k=function(e){function t(e){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return l(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.database,n=e.edit,a=e.docURL,o=e.crumbs,i=e.designDocs,r=e.fetchUrl,l=e.databaseName,s=e.queryFindCode,u=this.props.endpoint;this.props.explainPlan&&(u=C.default.urls("mango","explain-apiurl",encodeURIComponent(t)));var d=function(e){return b.mangoQueryDocs(l,s,e)},f=I.default.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY;return n&&(d=function(e){return b.fetchIndexes(l,e)},f=I.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX),c.default.createElement("div",{id:"dashboard",className:"two-pane flex-layout flex-col"},c.default.createElement(P,{docURL:a,endpoint:u,crumbs:o}),c.default.createElement(L,{edit:n,designDocs:i,explainPlan:this.props.explainPlan,databaseName:l,fetchUrl:r,queryDocs:d,docType:f}))}}]),t}(u.Component),M=function(e){var t=e.mangoQuery;return{explainPlan:t.explainPlan,queryFindCode:t.queryFindCode}};t.MangoLayoutContainer=(0,d.connect)(M)(k)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(11),u=a(s),c=n(1),d=a(c),f=n(0),p=a(f),h=n(10),m=a(h),_=n(250),g=a(_),E=n(463),b=a(E),y=n(15),v=a(y),N=n(19),D=n(32),O=a(D),S=n(635),T=a(S),C=n(634),w=a(C),I=n(141),A=a(I);n(840);var R="deleteConflictsHideModal",P=b.default.revBrowserStore,L=v.default.ConfirmButton;n(524);var k=A.default.acequire("ace/ext/static_highlight");n(142);var M=A.default.acequire("ace/mode/json").Mode;n(143);var x=A.default.acequire("ace/theme/idle_fingers"),j=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStoreState(),n}return r(t,e),l(t,[{key:"getStoreState",value:function(){return{tree:P.getRevTree(),ours:P.getOurs(),theirs:P.getTheirs(),conflictingRevs:P.getConflictingRevs(),dropdownData:P.getDropdownData(),isDiffViewEnabled:P.getIsDiffViewEnabled(),databaseName:P.getDatabaseName()}}},{key:"componentDidMount",value:function(){P.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){P.off("change",this.onChange)}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"toggleDiffView",value:function(e){g.default.toggleDiffView(e)}},{key:"render",value:function(){var e=this.state,t=e.tree,n=e.ours,a=e.theirs,o=e.conflictingRevs,i=e.isDiffViewEnabled;return t?a&&o.length?p.default.createElement("div",{className:"revision-wrapper scrollable"},p.default.createElement(F,this.state),p.default.createElement("div",{className:"revision-view-controls"},p.default.createElement(N.ButtonGroup,{className:"two-sides-toggle-button"},p.default.createElement(N.Button,{style:{width:"120px"},className:i?"active":"",onClick:this.toggleDiffView.bind(this,!0)},p.default.createElement("i",{className:"icon-columns"})," Diff"),p.default.createElement(N.Button,{style:{width:"120px"},className:i?"":"active",onClick:this.toggleDiffView.bind(this,!1)},p.default.createElement("i",{className:"icon-file-text"})," Document"))),i?p.default.createElement(V,{ours:n,theirs:a}):p.default.createElement(U,{ours:n,theirs:a})):p.default.createElement("div",{style:{textAlign:"center",color:"#fff"}},p.default.createElement("h2",null,"No conflicts")):null}}]),t}(p.default.Component),U=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"componentDidUpdate",value:function(){this.hightlightAfterRender()}},{key:"componentDidMount",value:function(){this.hightlightAfterRender()}},{key:"hightlightAfterRender",value:function(){var e=function(e){return JSON.stringify(e,null,"  ")},t=new M,n=m.default.findDOMNode(this.refs.revLeftOurs),a=m.default.findDOMNode(this.refs.revRightTheirs),o=k.render(e(this.props.ours),t,x,0,!0);n.innerHTML=o.html;var i=k.render(e(this.props.theirs),t,x,0,!0);a.innerHTML=i.html}},{key:"render",value:function(){var e=this.props,t=e.ours,n=e.theirs;return t&&n?p.default.createElement("div",{className:"revision-split-area"},p.default.createElement("div",{"data-id":"ours",style:{width:"50%"}},p.default.createElement("div",{style:{marginBottom:"20px"}},t._rev," (Server-Selected Rev)"),p.default.createElement("pre",{ref:"revLeftOurs"})),p.default.createElement("div",{"data-id":"theirs",style:{width:"50%"}},p.default.createElement("div",{style:{marginBottom:"20px"}},n._rev),p.default.createElement("pre",{ref:"revRightTheirs"}))):p.default.createElement("div",null)}}]),t}(p.default.Component),V=function(e){var t=e.ours,n=e.theirs;if(!t||!n)return p.default.createElement("div",null);var a=T.default.diff(t,n),o=w.default.format(a,t);return p.default.createElement("div",{className:"revision-diff-area"},p.default.createElement("div",{style:{marginTop:"30px"},dangerouslySetInnerHTML:{__html:o}}))};V.propTypes={ours:d.default.object,theirs:d.default.object,currentRev:d.default.string};var B=function(e){var t=e.options,n=e.selected,a=e.onRevisionClick,o=e.onBackwardClick,i=e.onForwardClick;return p.default.createElement("div",{className:"conflicting-revs-dropdown"},p.default.createElement(H,{backward:!0,onClick:o}),p.default.createElement("div",{style:{width:"345px",margin:"0 5px"}},p.default.createElement(O.default,{name:"form-field-name",value:n,options:t,clearable:!1,onChange:a})),p.default.createElement(H,{forward:!0,onClick:i}))};B.propTypes={options:d.default.array.isRequired,selected:d.default.string.isRequired,onRevisionClick:d.default.func.isRequired,onBackwardClick:d.default.func.isRequired,onForwardClick:d.default.func.isRequired};var F=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showModal:!1},n}return r(t,e),l(t,[{key:"onRevisionClick",value:function(e){g.default.chooseLeaves(this.props.ours,e.value)}},{key:"onForwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t+1];n&&g.default.chooseLeaves(this.props.ours,n)}},{key:"onBackwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t-1];n&&g.default.chooseLeaves(this.props.ours,n)}},{key:"selectAsWinner",value:function(e,t){t&&u.default.utils.localStorageSet(R,!0),g.default.selectRevAsWinner(this.props.databaseName,e._id,this.props.tree.paths,e._rev)}},{key:"onSelectAsWinnerClick",value:function(e){if(!0!==u.default.utils.localStorageGet(R))return void g.default.showConfirmModal(!0,e);this.selectAsWinner(e)}},{key:"render",value:function(){var e=this.props.tree,t={paddingRight:"30px"};return p.default.createElement("div",{className:"revision-browser-controls"},p.default.createElement(q,{onConfirm:this.selectAsWinner.bind(this)}),p.default.createElement("table",{style:{margin:"10px 60px",width:"100%"}},p.default.createElement("tbody",null,p.default.createElement("tr",{style:{height:"60px"}},p.default.createElement("td",{style:t},"Server-Selected Rev: "),p.default.createElement("td",{style:t},p.default.createElement("div",{style:{lineHeight:"36px",height:"36px",width:"337px",color:"#000",backgroundColor:"#ffbbbb"}},p.default.createElement("b",{style:{paddingLeft:"10px"}},e.winner))),p.default.createElement("td",null,p.default.createElement(L,{onClick:this.onSelectAsWinnerClick.bind(this,this.props.ours),style:{marginRight:"10px",width:"220px"},text:"Delete Other Conflicts",buttonType:"btn-secondary",customIcon:"icon-trophy"}))),p.default.createElement("tr",{style:{height:"60px"}},p.default.createElement("td",{style:t},"Conflicting Revisions: "),p.default.createElement("td",{style:t},p.default.createElement(B,{onRevisionClick:this.onRevisionClick.bind(this),onForwardClick:this.onForwardClick.bind(this),onBackwardClick:this.onBackwardClick.bind(this),options:this.props.dropdownData,selected:this.props.theirs._rev})),p.default.createElement("td",null,p.default.createElement(L,{"data-id":"button-select-theirs",onClick:this.onSelectAsWinnerClick.bind(this,this.props.theirs),style:{marginRight:"10px",width:"220px"},text:"Select as Winner",buttonType:"btn-secondary",customIcon:"icon-trophy"}))))))}}]),t}(p.default.Component);F.propTypes={tree:d.default.object.isRequired,ours:d.default.object.isRequired,conflictingRevs:d.default.array.isRequired};var q=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStoreState(),n}return r(t,e),l(t,[{key:"getStoreState",value:function(){return{show:P.getShowConfirmModal(),docToWin:P.getDocToWin(),checked:!1}}},{key:"componentDidMount",value:function(){P.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){P.off("change",this.onChange)}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"close",value:function(){g.default.showConfirmModal(!1,null)}},{key:"onDeleteConflicts",value:function(){var e=this.state.checked;this.props.onConfirm(this.state.docToWin,e)}},{key:"render",value:function(){var e=this;return p.default.createElement(N.Modal,{dialogClassName:"delete-conflicts-modal",show:this.state.show,onHide:this.close},p.default.createElement(N.Modal.Header,{closeButton:!1},p.default.createElement(N.Modal.Title,null,"Solve Conflicts")),p.default.createElement(N.Modal.Body,null,p.default.createElement("p",null,p.default.createElement("i",{className:"icon-warning-sign"})," Do you want to delete all conflicting revisions for this document?")),p.default.createElement(N.Modal.Footer,null,p.default.createElement("div",{style:{float:"left",marginTop:"10px"}},p.default.createElement("label",null,p.default.createElement("input",{style:{margin:"0 5px 3px 0"},onChange:function(){e.setState({checked:!e.state.checked})},type:"checkbox"}),"Do not show this warning message again")),p.default.createElement("a",{style:{marginRight:"10px",cursor:"pointer"},onClick:this.close,"data-bypass":"true"},"Cancel"),p.default.createElement(L,{onClick:this.onDeleteConflicts.bind(this),text:"Delete Revisions",buttonType:"btn-danger"})))}}]),t}(p.default.Component);q.propTypes={onConfirm:d.default.func.isRequired};var H=function(e){var t=e.onClick,n=e.forward,a=n?"fonticon-right-open":"fonticon-left-open",o={height:"20px",width:"11px",marginTop:"7px"};return p.default.createElement("div",{style:o,className:a,onClick:t})};H.propTypes={onClick:d.default.func.isRequired},t.default={DiffyController:j}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(251),l=a(r),s={};s.RevBrowserStore=i.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._revTree=null,this._ours=null,this._theirs=null,this._dropDownData=null,this._isDiffViewEnabled=!0,this._databaseName=null,this._showConfirmModal=!1,this._docToWin=null},prepareDropdownData:function(e){return e.map(function(e){return{value:e,label:e}})},getRevTree:function(){return this._revTree},getDatabaseName:function(){return this._databaseName},getOurs:function(){return this._ours},getTheirs:function(){return this._theirs},getConflictingRevs:function(){return this._conflictingRevs},getDropdownData:function(){return this._dropDownData},getIsDiffViewEnabled:function(){return this._isDiffViewEnabled},getShowConfirmModal:function(){return this._showConfirmModal},getDocToWin:function(){return this._docToWin},dispatch:function(e){switch(e.type){case l.default.REV_BROWSER_REV_TREE_LOADED:this._revTree=e.options.tree,this._ours=e.options.doc,this._conflictingRevs=e.options.conflictingRevs,this._theirs=e.options.conflictDoc,this._dropDownData=this.prepareDropdownData(this._conflictingRevs),this._databaseName=e.options.databaseName;break;case l.default.REV_BROWSER_DIFF_DOCS_READY:this._theirs=e.options.theirs;break;case l.default.REV_BROWSER_DIFF_ENABLE_DIFF_VIEW:this._isDiffViewEnabled=e.options.enableDiff;break;case l.default.REV_BROWSER_SHOW_CONFIRM_MODAL:this._showConfirmModal=e.options.show,this._docToWin=e.options.docToWin;break;default:return}this.triggerChange()}}),s.revBrowserStore=new s.RevBrowserStore,s.revBrowserStore.dispatchToken=i.default.dispatcher.register(s.revBrowserStore.dispatch),t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=n(2),l=a(r),s=n(45),u=a(s),c=n(71),d=a(c),f=n(235),p=a(f),h=n(430),m=a(h),_=n(250),g=a(_),E=n(462),b=a(E),y=n(29),v=l.default.RouteObject.extend({selectedHeader:"Databases",roles:["fx_loggedIn"],initialize:function(e,t){this.databaseName=t[0],this.docId=t[1],this.database=this.database||new d.default.Model({id:this.databaseName}),this.doc=new u.default.NewDoc(null,{database:this.database})},routes:{"database/:database/:doc/conflicts":"revisionBrowser","database/:database/:doc/code_editor":"codeEditor","database/:database/_design/:ddoc":"showDesignDoc","database/:database/:doc":"codeEditor","database/:database/new":"codeEditor"},revisionBrowser:function(e,t){var n=l.default.urls("allDocs","app",l.default.url.encode(this.database.safeID())),a=l.default.urls("document","app",this.database.safeID(),this.docId),o=[{name:this.database.safeID(),link:n},{name:this.docId+" > Conflicts"}];return g.default.showConfirmModal(!1,null),g.default.initDiffEditor(e,t),i.default.createElement(y.DocEditorLayout,{crumbs:o,endpoint:this.doc.url("apiurl"),docURL:a,component:i.default.createElement(b.default.DiffyController,null)})},codeEditor:function(e,t){var n=l.default.urls("allDocs","app",l.default.url.encode(e)),a=[{name:e,link:n},{name:t||"New Document"}];return this.database=new d.default.Model({id:e}),t&&(this.doc=new u.default.Doc({_id:t},{database:this.database,fetchConflicts:!0})),p.default.initDocEditor({doc:this.doc,database:this.database}),i.default.createElement(y.DocEditorLayout,{crumbs:a,endpoint:this.doc.url("apiurl"),docURL:this.doc.documentation(),component:i.default.createElement(m.default.DocEditorController,{database:this.database,isNewDoc:!t})})},showDesignDoc:function(e,t){return this.codeEditor(e,"_design/"+t)}});t.default={DocEditorRouteObject:v}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=n(2),l=a(r),s=n(131),u=a(s),c=n(229),d=a(c),f=n(71),p=a(f),h=n(45),m=a(h),_=n(46),g=a(_),E=n(232),b=a(E),y=n(70),v=a(y),N=n(130),D=u.default.extend({routes:{"database/:database/_all_docs(:extra)":{route:"allDocs",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_info":{route:"designDocMetadata",roles:["fx_loggedIn"]},"database/:database/_changes":"changes"},initialize:function(e,t){this.initViews(t[0])},initViews:function(e){this.databaseName=e,this.database=new p.default.Model({id:this.databaseName}),this.createDesignDocsCollection(),this.addSidebar()},designDocMetadata:function(e,t){var n=new m.default.DdocInfo({_id:"_design/"+t},{database:this.database});b.default.fetchDesignDocInfo({ddocName:t,designDocInfo:n}),g.default.selectNavItem("designDoc",{designDocName:t,designDocSection:"metadata"});var a=this.getCrumbs(this.database);return i.default.createElement(N.ViewsTabsSidebarLayout,{showEditView:!1,docURL:n.documentation(),endpoint:n.url("apiurl"),dbName:this.database.id,dropDownLinks:a,database:this.database})},allDocs:function(e,t){var n=this.createParams(t),a=n.docParams,o=l.default.urls("allDocsSanitized","server",e);this.database.buildAllDocs(a);var r=!!(a.startkey&&a.startkey.indexOf("_design")>-1),s="all-docs";r&&(s="design-docs");var u={navItem:s};g.default.selectNavItem(u.navItem),v.default.showDeleteDatabaseModal({showDeleteModal:!1,dbId:""});var c=this.database.allDocs.urlRef("apiurl",{}),d=l.default.constants.DOC_URLS.GENERAL,f=this.getCrumbs(this.database);return i.default.createElement(N.DocsTabsSidebarLayout,{docURL:d,endpoint:c,dbName:this.database.id,dropDownLinks:f,database:this.database,designDocs:this.designDocs,fetchUrl:o,ddocsOnly:r,selectedNavItem:u})},changes:function(){return d.default.initChanges({databaseName:this.database.id}),g.default.selectNavItem("changes"),i.default.createElement(N.ChangesSidebarLayout,{endpoint:l.default.urls("changes","apiurl",this.database.id,""),docURL:this.database.documentation(),dbName:this.database.id,dropDownLinks:this.getCrumbs(this.database),database:this.database})}});t.default=D},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=n(2),l=a(r),s=n(131),u=a(s),c=n(97),d=a(c),f=n(71),p=a(f),h=n(46),m=a(h),_=n(130),g=u.default.extend({routes:{"database/:database/new_view":{route:"createView",roles:["fx_loggedIn"]},"database/:database/new_view/:designDoc":{route:"createView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view":{route:"showView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view/edit":{route:"editView",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new p.default.Model({id:n}),this.createDesignDocsCollection(),this.addSidebar()},showView:function(e,t,n){n=n.replace(/\?.*$/,""),d.default.clearIndex(),d.default.fetchDesignDocsBeforeEdit({viewName:n,newView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+t});var a={navItem:"designDoc",params:{designDocName:t,designDocSection:"Views",indexName:n}};m.default.selectNavItem(a.navItem,a.params);var o=l.default.urls("view","server",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n)),r=l.default.urls("view","apiurl",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n)),s=l.default.constants.DOC_URLS.GENERAL,u=this.getCrumbs(this.database);return i.default.createElement(_.DocsTabsSidebarLayout,{docURL:s,endpoint:r,dbName:this.database.id,dropDownLinks:u,database:this.database,fetchUrl:o,ddocsOnly:!1,deleteEnabled:!1,selectedNavItem:a})},createView:function(e,t){var n=!0,a="new-doc";t&&(a="_design/"+t,n=!1),d.default.fetchDesignDocsBeforeEdit({viewName:"new-view",newView:!0,database:this.database,designDocs:this.designDocs,designDocId:a,newDesignDoc:n}),m.default.selectNavItem("");var o=this.getCrumbs(this.database);return i.default.createElement(_.ViewsTabsSidebarLayout,{showIncludeAllDocs:!0,docURL:l.default.constants.DOC_URLS.GENERAL,dbName:this.database.id,dropDownLinks:o,database:this.database})},editView:function(e,t,n){d.default.fetchDesignDocsBeforeEdit({viewName:n,newView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+t}),m.default.selectNavItem("designDoc",{designDocName:t,designDocSection:"Views",indexName:n});var a=l.default.constants.DOC_URLS.GENERAL,o=l.default.urls("view","apiurl",e,t,n),r=this.getCrumbs(this.database);return i.default.createElement(_.ViewsTabsSidebarLayout,{showIncludeAllDocs:!0,docURL:a,endpoint:o,dbName:this.database.id,dropDownLinks:r,database:this.database})}});t.default=g},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=n(11),l=a(r),s=n(2),u=a(s),c=n(72),d=a(c),f=n(101),p=a(f),h=n(46),m=a(h),_=n(461),g=u.default.RouteObject.extend({selectedHeader:"Databases",hideApiBar:!0,hideNotificationCenter:!0,routes:{"database/:database/_index":{route:"createIndex",roles:["fx_loggedIn"]},"database/:database/_find":{route:"findUsingIndex",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new d.default.Model({id:n})},findUsingIndex:function(e){m.default.selectNavItem("mango-query");var t=u.default.urls("allDocs","app",encodeURIComponent(this.databaseName),"?limit="+u.default.constants.DATABASES.DOCUMENT_LIMIT),n="/"+encodeURIComponent(this.databaseName)+"/_find",a=[{name:e,link:t},{name:l.default.i18n.en_US["mango-title-editor"]}],o=u.default.urls("mango","query-apiurl",encodeURIComponent(this.databaseName));return i.default.createElement(_.MangoLayoutContainer,{database:e,crumbs:a,docURL:u.default.constants.DOC_URLS.MANGO_SEARCH,endpoint:o,edit:!1,databaseName:this.databaseName,fetchUrl:n})},createIndex:function(e){var t=new p.default.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}}),n=u.default.urls("allDocs","app",encodeURIComponent(this.databaseName),"?limit="+u.default.constants.DATABASES.DOCUMENT_LIMIT),a=u.default.urls("mango","index-apiurl",encodeURIComponent(this.databaseName)),o=[{name:e,link:n},{name:l.default.i18n.en_US["mango-indexeditor-title"]}];return i.default.createElement(_.MangoLayoutContainer,{showIncludeAllDocs:!1,crumbs:o,docURL:u.default.constants.DOC_URLS.MANGO_INDEX,endpoint:a,edit:!0,designDocs:t,databaseName:this.databaseName})}});t.default={MangoIndexEditorAndQueryEditor:g}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(101),i=a(o),r=n(465),l=a(r),s=n(464),u=a(s),c=n(466),d=a(c),f=n(467),p=a(f);i.default.RouteObjects=[u.default.DocEditorRouteObject,l.default,d.default,p.default.MangoIndexEditorAndQueryEditor],t.default=i.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(26),i=n(252),r=a(i),l=n(76),s=a(l),u=function(e){return{type:s.default.SIDEBAR_UPDATED_DESIGN_DOCS,options:{designDocs:Array.isArray(e)?e:[]}}},c=function(){return{}},d=function(e){return{reduxUpdatedDesignDocList:function(t){e(u(t))}}},f=(0,o.connect)(c,d)(r.default.SidebarController);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case l.default.SIDEBAR_UPDATED_DESIGN_DOCS:return i({},e,{designDocs:t.options.designDocs});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=o;var r=n(76),l=a(r),s={designDocs:[]}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=a(o),r=n(2),l=a(r),s=n(133),u=a(s);n(602);var c=l.default.addon();c.initialize=function(){var e=new c.VersionInfo;e.fetch().then(function(){u.default.setNavbarVersionInfo(e.get("version"))})},c.VersionInfo=Backbone.Model.extend({url:function(){return i.default.host}}),t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=a(o),r=n(0),l=a(r),s=n(6),u=a(s),c=function(e){var t=e.isMinimized,n=(0,u.default)("faux-navbar__brand-logo",{"faux-navbar__brand-logo--wide":!t},{"faux-navbar__brand-logo--narrow":t});return l.default.createElement("div",{className:"faux-navbar__brand"},l.default.createElement("div",{className:n}))};c.propTypes={isMinimized:i.default.bool.isRequired},t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=a(o),r=n(0),l=a(r),s=n(6),u=a(s),c=function(e){var t=e.toggleMenu,n=e.isMinimized,a=(0,u.default)("faux-navbar__burger",{"faux-navbar--wide":!n},{"faux-navbar--narrow":n}),o=n?"icon-resize-horizontal":"icon-signin faux-navbar__burger__icon--flipped";return l.default.createElement("div",{className:a,onClick:t},l.default.createElement("i",{className:"faux-navbar__burger__icon "+o}))};c.propTypes={toggleMenu:i.default.func.isRequired,isMinimized:i.default.bool.isRequired},t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=a(o),r=n(0),l=a(r),s=function(e){var t=e.version;return t?l.default.createElement("div",{className:"faux-navbar__version-footer"},"Fauxton on Â ",l.default.createElement("a",{href:"http://couchdb.apache.org/"},"Apache CouchDB"),l.default.createElement("div",null,"v. ",t)):null};s.propTypes={version:i.default.string},t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=a(o),r=n(0),l=a(r),s=n(6),u=a(s),c=function(e){var t=e.isMinimized,n=(0,u.default)("faux-navbar__login__textcontainer",{"faux-navbar__login__textcontainer--narrow":t},{"faux-navbar__login__textcontainer--wide":!t});return l.default.createElement("a",{className:"faux-login__link",href:"#/login"},l.default.createElement("div",{className:n},l.default.createElement("span",{className:"faux-navbar__logout__text"},"Login")))};c.propTypes={isMinimized:i.default.bool.isRequired},t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=a(o),r=n(0),l=a(r),s=n(6),u=a(s),c=n(18),d=a(c),f=function(e){var t=e.username,n=e.isMinimized,a=(0,u.default)("faux-navbar__logout__textcontainer",{"faux-navbar__logout__textcontainer--narrow":n},{"faux-navbar__logout__textcontainer--wide":!n});return l.default.createElement("a",{className:"faux-logout__link",href:"#/logout"},l.default.createElement("div",{className:a},l.default.createElement("span",{className:"faux-navbar__logout__text"},"Log Out"),"Â ",n?null:l.default.createElement("span",{className:"faux-navbar__logout__username"},d.default.escape(t))))};f.propTypes={username:i.default.string,isMinimized:i.default.bool.isRequired},t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(474),p=a(f),h=n(473),m=a(h),_=n(478),g=a(_),E=n(472),b=a(E),y=n(476),v=a(y),N=n(475),D=a(N),O=n(133),S=a(O),T=n(6),C=a(T),w=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"createLinks",value:function(e){var t=this.props,n=t.activeLink,a=t.isMinimized;return e.map(function(e,t){return d.default.createElement(g.default,{key:t,link:e,active:n,isMinimized:a})})}},{key:"toggleMenu",value:function(){S.default.toggleNavbarMenu()}},{key:"render",value:function(){var e=this.props,t=e.isMinimized,n=e.version,a=e.isLoginSectionVisible,o=e.isLoginVisibleInsteadOfLogout,i=e.activeLink,r=e.username;if(!e.isNavBarVisible)return null;var l=this.createLinks(this.props.navLinks),s=this.createLinks(this.props.bottomNavLinks),u=this.createLinks(this.props.footerNavLinks),c=(0,C.default)("faux-navbar",{"faux-navbar--wide":!t},{"faux-navbar--narrow":t}),f=o?d.default.createElement(D.default,{active:i,isMinimized:t}):d.default.createElement(v.default,{username:r,isMinimized:t});return d.default.createElement("div",{className:c},d.default.createElement("nav",null,d.default.createElement("div",{className:"faux-navbar__linkcontainer"},d.default.createElement(m.default,{isMinimized:t,toggleMenu:this.toggleMenu}),d.default.createElement("div",{className:"faux-navbar__links"},l,s),d.default.createElement("div",{className:"faux-navbar__footer"},d.default.createElement(b.default,{isMinimized:t}),d.default.createElement("div",null,u),d.default.createElement(p.default,{version:n}),a?f:null))),d.default.createElement("div",{id:"primary-nav-right-shadow"}))}}]),t}(c.Component);w.propTypes={activeLink:u.default.string,isMinimized:u.default.bool.isRequired,version:u.default.string,username:u.default.string,navLinks:u.default.array,bottomNavLinks:u.default.array,footerNavLinks:u.default.array,isNavBarVisible:u.default.bool,isLoginSectionVisible:u.default.bool.isRequired,isLoginVisibleInsteadOfLogout:u.default.bool.isRequired},t.default=w},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=a(o),r=n(0),l=a(r),s=n(6),u=a(s),c=function(e){var t=e.link,n=e.active,a=e.isMinimized,o=(0,u.default)("faux-navbar__link",{"faux-navbar__link--active":n===t.title},{"faux-navbar__link--inactive":n!==t.title},{"faux-navbar--wide":!a},{"faux-navbar--narrow":a});return l.default.createElement("a",{className:o,href:t.href,target:t.target?"_blank":null,"data-bypass":t.target?"true":null},l.default.createElement("div",{"data-nav-name":t.title,className:"faux-navbar__itemarea"},t.icon?l.default.createElement("i",{className:(0,u.default)(t.icon,"fonticon faux-navbar__icon")}):null,a?null:l.default.createElement("span",{className:"faux-navbar__text"},t.title)))};c.propTypes={link:i.default.object.isRequired,active:i.default.string,isMinimized:i.default.bool.isRequired},t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(2),c=a(u),d=n(0),f=a(d),p=n(10),h=(a(p),n(254)),m=a(h),_=n(477),g=a(_),E=m.default.navBarStore,b=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{navLinks:E.getNavLinks(),bottomNavLinks:E.getBottomNavLinks(),footerNavLinks:E.getFooterNavLinks(),activeLink:E.getActiveLink(),version:E.getVersion(),isMinimized:E.isMinimized(),isNavBarVisible:E.isNavBarVisible(),isLoginSectionVisible:E.getIsLoginSectionVisible(),isLoginVisibleInsteadOfLogout:E.getIsLoginVisibleInsteadOfLogout()}},a.onChange=function(){a.setState(a.getStoreState())},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),s(t,[{key:"componentDidMount",value:function(){E.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){E.off("change",this.onChange)}},{key:"render",value:function(){var e=c.default.session.user(),t=e&&e.name?e.name:"";return f.default.createElement(g.default,l({},this.state,{username:t}))}}]),t}(f.default.Component);t.default=b},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){h.default.dispatch({type:_.default.ADD_NOTIFICATION,options:{info:e}})}function i(){h.default.dispatch({type:_.default.SHOW_NOTIFICATION_CENTER})}function r(){h.default.dispatch({type:_.default.HIDE_NOTIFICATION_CENTER})}function l(){h.default.dispatch({type:_.default.CLEAR_ALL_NOTIFICATIONS})}function s(e){h.default.dispatch({type:_.default.CLEAR_SINGLE_NOTIFICATION,options:{notificationId:e}})}function u(e){h.default.dispatch({type:_.default.SELECT_NOTIFICATION_FILTER,options:{filter:e}})}function c(e){h.default.dispatch({type:_.default.START_HIDING_NOTIFICATION,options:{notificationId:e}})}function d(e){h.default.dispatch({type:_.default.HIDE_NOTIFICATION,options:{notificationId:e}})}function f(){h.default.dispatch({type:_.default.HIDE_ALL_NOTIFICATIONS})}Object.defineProperty(t,"__esModule",{value:!0});var p=n(2),h=a(p),m=n(255),_=a(m);t.default={addNotification:o,showNotificationCenter:i,hideNotificationCenter:r,clearAllNotifications:l,clearSingleNotification:s,selectNotificationFilter:u,startHidingNotification:c,hideNotification:d,hideAllVisibleNotifications:f}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(11),l=a(r),s=n(255),u=a(s),c=n(168),d=a(c),f={},p=0,h=["success","error","info"];f.NotificationStore=i.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._notifications=[],this._notificationCenterVisible=!1,this._selectedNotificationFilter="all",this._permanentNotificationVisible=!1,this._permanentNotificationMessage=""},isNotificationCenterVisible:function(){return this._notificationCenterVisible},isPermanentNotificationVisible:function(){return this._permanentNotificationVisible},addNotification:function(e){if(_.isEmpty(e.type)||!_.includes(h,e.type))return void console.warn("Invalid message type: ",e);e.notificationId=++p,e.cleanMsg=l.default.utils.stripHTML(e.msg),e.time=(0,d.default)(),e.visible=!0,e.isHiding=!1,e.clear&&this._notifications.forEach(function(e){e.visible&&(e.isHiding=!0)}),this._notifications.unshift(e)},getNotifications:function(){return this._notifications},getPermanentNotificationMessage:function(){return this._permanentNotificationMessage},setPermanentNotificationMessage:function(e){this._permanentNotificationMessage=e},clearNotification:function(e){this._notifications=_.without(this._notifications,_.findWhere(this._notifications,{notificationId:e}))},clearNotifications:function(){this._notifications=[]},hideNotification:function(e){var t=_.findWhere(this._notifications,{notificationId:e});t.visible=!1,t.isHiding=!1},hideAllNotifications:function(){this._notifications.forEach(function(e){e.visible&&(e.isHiding=!0)})},startHidingNotification:function(e){_.findWhere(this._notifications,{notificationId:e}).isHiding=!0},getNotificationFilter:function(){return this._selectedNotificationFilter},setNotificationFilter:function(e){if((_.isEmpty(e)||!_.includes(h,e))&&"all"!==e)return void console.warn("Invalid notification filter: ",e);this._selectedNotificationFilter=e},dispatch:function(e){switch(e.type){case u.default.ADD_NOTIFICATION:this.addNotification(e.options.info);break;case u.default.CLEAR_ALL_NOTIFICATIONS:this.clearNotifications();break;case u.default.CLEAR_SINGLE_NOTIFICATION:this.clearNotification(e.options.notificationId);break;case u.default.START_HIDING_NOTIFICATION:this.startHidingNotification(e.options.notificationId);break;case u.default.HIDE_NOTIFICATION:this.hideNotification(e.options.notificationId);break;case u.default.HIDE_ALL_NOTIFICATIONS:this.hideAllNotifications();break;case u.default.SHOW_NOTIFICATION_CENTER:this._notificationCenterVisible=!0;break;case u.default.HIDE_NOTIFICATION_CENTER:this._notificationCenterVisible=!1;break;case u.default.SELECT_NOTIFICATION_FILTER:this.setNotificationFilter(e.options.filter);break;case u.default.SHOW_PERMANENT_NOTIFICATION:this._permanentNotificationVisible=!0,this.setPermanentNotificationMessage(e.options.msg);break;case u.default.HIDE_PERMANENT_NOTIFICATION:this._permanentNotificationVisible=!1;break;default:return}this.triggerChange()}}),f.notificationStore=new f.NotificationStore,f.notificationStore.dispatchToken=i.default.dispatcher.register(f.notificationStore.dispatch),t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(489),l=a(r),s=n(259),u=a(s);n(603),l.default.initialize=function(){},i.default.addReducers({permissions:u.default}),t.default=l.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(485),p=a(f),h=n(256),m=n(212),_=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.url;t((0,h.fetchPermissions)(n))}},{key:"render",value:function(){return this.props.isLoading?d.default.createElement(m.LoadLines,null):d.default.createElement(p.default,this.props)}}]),t}(c.Component);t.default=_,_.propTypes={isLoading:u.default.bool.isRequired,adminRoles:u.default.array.isRequired,adminNames:u.default.array.isRequired,memberNames:u.default.array.isRequired,memberRoles:u.default.array.isRequired,security:u.default.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=a(o),r=n(0),l=a(r),s=function(e){var t=e.removeItem,n=e.section,a=e.type,o=e.value;return l.default.createElement("li",{className:"permissions__entry"},l.default.createElement("span",null,o),l.default.createElement("button",{onClick:function(){return t(n,a,o)},type:"button",className:"pull-right close"},"Ã—"))};s.propTypes={value:i.default.string.isRequired,removeItem:i.default.func.isRequired},t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),u=a(s),c=n(1),d=a(c),f=n(0),p=a(f),h=n(486),m=a(h),_=n(256),g=n(258),E=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addItem=n.addItem.bind(n),n.removeItem=n.removeItem.bind(n),n}return r(t,e),l(t,[{key:"addItem",value:function(e){var t=e.section,n=e.type,a=e.value;if((0,g.isValueAlreadySet)(this.props.security,t,n,a))return u.default.addNotification({msg:"Role/Name has already been added",type:"error"}),null;this.props.dispatch((0,_.updatePermission)(this.props.url,this.props.security,t,n,a))}},{key:"removeItem",value:function(e,t,n){this.props.dispatch((0,_.deletePermission)(this.props.url,this.props.security,e,t,n))}},{key:"render",value:function(){var e=this.props,t=e.adminRoles,n=e.adminNames,a=e.memberRoles,o=e.memberNames;return p.default.createElement("div",{className:"permissions-page flex-body"},p.default.createElement("div",null,p.default.createElement(m.default,{roles:t,names:n,addItem:this.addItem,removeItem:this.removeItem,section:"admins"}),p.default.createElement(m.default,{roles:a,names:o,addItem:this.addItem,removeItem:this.removeItem,section:"members"})))}}]),t}(f.Component);t.default=E,E.propTypes={security:d.default.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(11),p=a(f),h=n(18),m=a(h),_=n(484),g=a(_),E=p.default.helpers.getDocUrl,b=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={newRole:"",newName:""},a.getHelp=function(){return a.props.section,"Database members can access the database. If no members are defined, the database is public. "},a.isEmptyValue=function(e,t){return!!m.default.isEmpty(e)&&(d.default.addNotification({msg:"Cannot add an empty value for "+t+".",type:"error"}),!0)},a.addNames=function(e){e.preventDefault(),a.isEmptyValue(a.state.newName,"names")||(a.props.addItem({type:"names",section:a.props.section,value:a.state.newName}),a.setState({newName:""}))},a.addRoles=function(e){e.preventDefault(),a.isEmptyValue(a.state.newRole,"roles")||(a.props.addItem({type:"roles",section:a.props.section,value:a.state.newRole}),a.setState({newRole:""}))},a.getItems=function(e,t){return e.map(function(e,n){return u.default.createElement(g.default,{key:n,value:e,section:a.props.section,type:t,removeItem:a.props.removeItem})})},a.getNames=function(){return a.getItems(a.props.names,"names")},a.getRoles=function(){return a.getItems(a.props.roles,"roles")},a.nameChange=function(e){a.setState({newName:e.target.value})},a.roleChange=function(e){a.setState({newRole:e.target.value})},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props.section;return u.default.createElement("div",{className:"permissions__"+e},u.default.createElement("header",{className:"page-header"},u.default.createElement("h3",null,e),u.default.createElement("p",{className:"help"},this.getHelp(),u.default.createElement("a",{className:"help-link","data-bypass":"true",href:E("DB_PERMISSION"),target:"_blank"},u.default.createElement("i",{className:"icon-question-sign"})))),u.default.createElement("div",{className:"row-fluid"},u.default.createElement("div",{className:"span6"},u.default.createElement("header",null,u.default.createElement("h4",null,"Users"),u.default.createElement("p",null,"Specify users who will have ",this.props.section," access to this database.")),u.default.createElement("form",{onSubmit:this.addNames,className:"permission-item-form permissions-add-user form-inline"},u.default.createElement("input",{onChange:this.nameChange,value:this.state.newName,type:"text",className:"item input-small",placeholder:"Username"}),u.default.createElement("button",{type:"submit",className:"btn btn-primary"},u.default.createElement("i",{className:"icon fonticon-plus-circled"})," Add User")),u.default.createElement("ul",{className:"unstyled permission-items span10"},this.getNames())),u.default.createElement("div",{className:"span6"},u.default.createElement("header",null,u.default.createElement("h4",null,"Roles"),u.default.createElement("p",null,"Users with any of the following role(s) will have ",this.props.section," access.")),u.default.createElement("form",{onSubmit:this.addRoles,className:"permission-item-form permissions-add-role form-inline"},u.default.createElement("input",{onChange:this.roleChange,value:this.state.newRole,type:"text",className:"item input-small",placeholder:"Role"}),u.default.createElement("button",{type:"submit",className:"btn btn-primary"},u.default.createElement("i",{className:"icon fonticon-plus-circled"})," Add Role")),u.default.createElement("ul",{className:"unstyled permission-items span10"},this.getRoles()))))}}]),t}(u.default.Component);b.defaultProps={names:[],roles:[]},t.default=b},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(26),i=n(483),r=a(i),l=n(259),s=function(e){var t=e.permissions;return{isLoading:(0,l.getIsLoading)(t),adminRoles:(0,l.getAdminRoles)(t),adminNames:(0,l.getAdminNames)(t),memberNames:(0,l.getMemberNames)(t),memberRoles:(0,l.getMemberRoles)(t),security:(0,l.getSecurity)(t)}};t.default=(0,o.connect)(s)(r.default)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionsLayout=void 0;var o=n(0),i=a(o),r=n(130),l=n(487),s=a(l),u=n(252),c=a(u),d=t.PermissionsLayout=function(e){var t=e.docURL,n=e.database,a=e.endpoint,o=e.dbName,l=e.dropDownLinks;return i.default.createElement("div",{id:"dashboard",className:"with-sidebar"},i.default.createElement(r.TabsSidebarHeader,{hideQueryOptions:!0,hideJumpToDoc:!0,docURL:t,endpoint:a,dbName:o,dropDownLinks:l,database:n}),i.default.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},i.default.createElement("aside",{id:"sidebar-content",className:"scrollable"},i.default.createElement(c.default.SidebarController,null)),i.default.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},i.default.createElement(s.default,{url:a}))))};t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=a(o),r=n(2),l=a(r),s=n(71),u=a(s),c=n(131),d=a(c),f=n(488),p=a(f),h=n(0),m=a(h),_=d.default.extend({roles:["fx_loggedIn"],routes:{"database/:database/permissions":"permissions"},initialize:function(){i.default.getParams().include_docs=!0},permissions:function(e){this.database=new u.default.Model({id:e}),this.createDesignDocsCollection(),this.addSidebar("permissions");var t=[{name:this.database.id,link:u.default.databaseUrl(e)},{name:"Permissions"}],n=l.default.urls("permissions","server",e);return m.default.createElement(p.default,{docURL:l.default.constants.DOC_URLS.DB_PERMISSION,endpoint:n,dbName:this.database.id,dropDownLinks:t,database:this.database})}}),g={RouteObjects:[_]};t.default=g},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(500),l=a(r);n(604);var s=n(134),u=a(s);l.default.initialize=function(){i.default.addHeaderLink({title:"Replication",href:"#/replication",icon:"fonticon-replicate"}),i.default.session.isAuthenticated().then(function(){u.default.checkForNewApi()})},i.default.registerUrls("replication",{app:function(e){return"#/replication/"+e},api:function(){return window.location.origin+"/_replicator"}}),t.default=l.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(102),p=n(262),h=n(261),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={modalVisible:!1,unconfirmedDeleteDocId:null},n}return r(t,e),l(t,[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find(function(t){return t._id===e.state.unconfirmedDeleteDocId});t.push(n)}else t=this.props.docs.filter(function(e){return e.selected});this.props.deleteDocs(t),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter(function(e){return e.selected}).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,a=e.changeActivitySort,o=e.docs,i=e.filter,r=e.selectAllDocs,l=e.someDocsSelected,s=e.allDocsSelected,u=e.selectDoc,c=this.state.modalVisible;return d.default.createElement("div",{className:"replication__activity"},d.default.createElement("p",{className:"replication__activity-caveat"},"Replications must have a replication document to display in the following table."),d.default.createElement(h.ReplicationHeader,{filter:i,onFilterChange:t}),d.default.createElement(p.ReplicationTable,{someDocsSelected:l,allDocsSelected:s,selectAllDocs:r,docs:o,selectDoc:u,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:a}),d.default.createElement(f.DeleteModal,{isReplicationDB:!0,multipleDocs:this.numDocsSelected(),visible:c,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}]),t}(d.default.Component);t.default=m,m.propTypes={docs:u.default.array.isRequired,filter:u.default.string.isRequired,selectAllDocs:u.default.func.isRequired,allDocsSelected:u.default.bool.isRequired,someDocsSelected:u.default.bool.isRequired,selectDoc:u.default.func.isRequired,onFilterChange:u.default.func.isRequired,deleteDocs:u.default.func.isRequired,activitySort:u.default.object.isRequired,changeActivitySort:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(11),d=a(c),f=n(2),p=a(f),h=n(495),m=n(497),g=n(493),E=n(496),b=n(128),y=a(b),v=n(47),N=a(v),D=n(102),O=n(18),S=y.default.PasswordModal,T=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.submit=n.submit.bind(n),n.clear=n.clear.bind(n),n.showPasswordModal=n.showPasswordModal.bind(n),n.runReplicationChecks=n.runReplicationChecks.bind(n),n}return r(t,e),l(t,[{key:"clear",value:function(e){e.preventDefault(),this.props.clearReplicationForm()}},{key:"showPasswordModal",value:function(){this.props.hideConflictModal();var e=this.props,t=e.replicationSource,n=e.replicationTarget;if(t!==N.default.REPLICATION_SOURCE.LOCAL&&n!==N.default.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE&&n!==N.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE||this.props.authenticated||p.default.session.isAdminParty())return void this.submit(this.props.username,this.props.password);this.props.showPasswordModal()}},{key:"checkReplicationDocID",value:function(){var e=this,t=this.props,n=t.showConflictModal,a=t.replicationDocName;(0,t.checkReplicationDocID)(a).then(function(t){if(t)return void n();e.showPasswordModal()})}},{key:"runReplicationChecks",value:function(){var e=this.props.replicationDocName;if(this.validate())return e?void this.checkReplicationDocID():void this.showPasswordModal()}},{key:"validate",value:function(){var e=this.props,t=e.remoteTarget,n=e.remoteSource,a=e.replicationTarget,o=e.localTarget,i=e.localSource,r=e.databases;if(a===N.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&_.includes(r,o))return p.default.addNotification({msg:"The <code>"+o+"</code> database already exists locally. Please enter another database name.",type:"error",escape:!1,clear:!0}),!1;if(a===N.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE||a===N.default.REPLICATION_TARGET.NEW_REMOTE_DATABASE){var l="";if(/\s/.test(o)?l="The target database may not contain any spaces.":/^_/.test(o)&&(l="The target database may not start with an underscore."),l)return p.default.addNotification({msg:l,type:"error",escape:!1,clear:!0}),!1}return!(t===n&&!(0,O.isEmpty)(t)||i===o&&!(0,O.isEmpty)(i))||(p.default.addNotification({msg:"Cannot replicate a database to itself",type:"error",escape:!1,clear:!0}),!1)}},{key:"submit",value:function(e,t){var n=this.props,a=n.replicationTarget,o=n.replicationSource,i=n.replicationType,r=n.replicationDocName,l=n.remoteTarget,s=n.remoteSource,u=n.localTarget,c=n.localSource,d=void 0;if(r){var f=this.props.docs.find(function(e){return e._id===r});f&&(d=f._rev)}this.props.replicate({replicationTarget:a,replicationSource:o,replicationType:i,replicationDocName:r,username:e,password:t,localTarget:u,localSource:c,remoteTarget:l,remoteSource:s,_rev:d})}},{key:"confirmButtonEnabled",value:function(){var e=this.props,t=e.remoteSource,n=e.localSourceKnown,a=e.replicationSource,o=e.replicationTarget,i=e.localTargetKnown,r=e.localTarget;return!(e.submittedNoChange||!a||!o||a===N.default.REPLICATION_SOURCE.LOCAL&&!n||o===N.default.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE&&!i||o===N.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&!r||a===N.default.REPLICATION_SOURCE.REMOTE&&""===t)}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.replicationTarget,a=e.replicationType,o=e.replicationDocName,i=e.passwordModalVisible,r=e.conflictModalVisible,l=e.databases,s=e.localSource,c=e.remoteSource,f=e.remoteTarget,p=e.localTarget,_=e.updateFormField,b=e.clearReplicationForm;return u.default.createElement("div",null,u.default.createElement(h.ReplicationSource,{replicationSource:t,localSource:s,databases:l,remoteSource:c,onSourceSelect:_("replicationSource"),onRemoteSourceChange:_("remoteSource"),onLocalSourceChange:_("localSource")}),u.default.createElement("hr",{className:"replication__seperator",size:"1"}),u.default.createElement(m.ReplicationTarget,{replicationTarget:n,onTargetChange:_("replicationTarget"),databases:l,localTarget:p,remoteTarget:f,onRemoteTargetChange:_("remoteTarget"),onLocalTargetChange:_("localTarget")}),u.default.createElement("hr",{className:"replication__seperator",size:"1"}),u.default.createElement(g.ReplicationOptions,{replicationType:a,replicationDocName:o,onDocChange:_("replicationDocName"),onTypeChange:_("replicationType")}),u.default.createElement(E.ReplicationSubmit,{disabled:!this.confirmButtonEnabled(),onClick:this.runReplicationChecks,onClear:b}),u.default.createElement(S,{visible:i,modalMessage:u.default.createElement("p",null,d.default.i18n.en_US["replication-password-modal-text"]),submitBtnLabel:"Start Replication",headerTitle:d.default.i18n.en_US["replication-password-modal-header"],onSuccess:this.submit}),u.default.createElement(D.ConflictModal,{visible:r,onClick:this.showPasswordModal,onClose:this.props.hideConflictModal,docId:o}))}}]),t}(u.default.Component);t.default=T},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ReplicationOptions=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(47),p=a(f),h=n(15),m=a(h),_=m.default.StyledSelect,g=function(){return[{value:p.default.REPLICATION_TYPE.ONE_TIME,label:"One time"},{value:p.default.REPLICATION_TYPE.CONTINUOUS,label:"Continuous"}].map(function(e){return d.default.createElement("option",{value:e.value,key:e.value},e.label)})},E=function(e){var t=e.value,n=e.onChange;return d.default.createElement("div",{className:"replication__section"},d.default.createElement("div",{className:"replication__input-label"},"Replication Type:"),d.default.createElement("div",{className:"replication__input-select"},d.default.createElement(_,{selectContent:g(),selectChange:function(e){return n(e.target.value)},selectId:"replication-target",selectValue:t})))};E.propTypes={value:u.default.string.isRequired,onChange:u.default.func.isRequired};var b=function(e){var t=e.value,n=e.onChange;return d.default.createElement("div",{className:"replication__section"},d.default.createElement("div",{className:"replication__input-label"},"Replication Document:"),d.default.createElement("div",{className:"replication__doc-name"},d.default.createElement("span",{className:"fonticon fonticon-cancel replication__doc-name-icon",title:"Clear field",onClick:function(){return n("")}}),d.default.createElement("input",{type:"text",className:"replication__doc-name-input",placeholder:"Custom ID (optional)",value:t,onChange:function(e){return n(e.target.value)}})))};b.propTypes={value:u.default.string.isRequired,onChange:u.default.func.isRequired},(t.ReplicationOptions=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.replicationType,n=e.replicationDocName,a=e.onDocChange,o=e.onTypeChange;return d.default.createElement("div",null,d.default.createElement(E,{onChange:o,value:t}),d.default.createElement(b,{onChange:a,value:n}))}}]),t}(d.default.Component)).propTypes={replicationDocName:u.default.string.isRequired,replicationType:u.default.string.isRequired,onDocChange:u.default.func.isRequired,onTypeChange:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(102),p=n(262),h=n(261),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={modalVisible:!1,unconfirmedDeleteDocId:null},n}return r(t,e),l(t,[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find(function(t){return t._id===e.state.unconfirmedDeleteDocId});t.push(n)}else t=this.props.docs.filter(function(e){return e.selected});this.props.deleteDocs(t),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter(function(e){return e.selected}).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,a=e.changeActivitySort,o=e.docs,i=e.filter,r=e.selectAllDocs,l=e.someDocsSelected,s=e.allDocsSelected,u=e.selectDoc,c=this.state.modalVisible;return d.default.createElement("div",{className:"replication__activity"},d.default.createElement("p",{className:"replication__activity-caveat"},"Active _replicate jobs are displayed. Completed and failed jobs are not."),d.default.createElement(h.ReplicationHeader,{filter:i,onFilterChange:t}),d.default.createElement(p.ReplicationTable,{onlyDeleteAction:!0,showStateRow:!1,someDocsSelected:l,allDocsSelected:s,selectAllDocs:r,docs:o,selectDoc:u,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:a}),d.default.createElement(f.DeleteModal,{isReplicationDB:!1,multipleDocs:this.numDocsSelected(),visible:c,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}]),t}(d.default.Component);t.default=m,m.propTypes={docs:u.default.array.isRequired,filter:u.default.string.isRequired,selectAllDocs:u.default.func.isRequired,allDocsSelected:u.default.bool.isRequired,someDocsSelected:u.default.bool.isRequired,selectDoc:u.default.func.isRequired,onFilterChange:u.default.func.isRequired,deleteDocs:u.default.func.isRequired,activitySort:u.default.object.isRequired,changeActivitySort:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ReplicationSource=t.ReplicationSourceSelect=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(47),p=a(f),h=n(15),m=a(h),_=n(32),g=a(_),E=n(263),b=a(E),y=m.default.StyledSelect,v=function(e){var t=e.onChange,n=e.value;return d.default.createElement("div",{className:"replication__section"},d.default.createElement("div",{className:"replication__input-label"},"Database URL:"),d.default.createElement("div",{className:""},d.default.createElement("input",{type:"text",className:"replication__remote-connection-url",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}}),d.default.createElement(b.default,null)))};v.propTypes={value:u.default.string.isRequired,onChange:u.default.func.isRequired};var N=function(e){var t=e.value,n=e.onChange,a=e.databases,o=a.map(function(e){return{value:e,label:e}});return d.default.createElement("div",{className:"replication__section"},d.default.createElement("div",{className:"replication__input-label"},"Source Name:"),d.default.createElement("div",{className:"replication__input-react-select"},d.default.createElement(g.default,{name:"source-name",value:t,placeholder:"Database name",options:o,clearable:!1,onChange:function(e){var t=e.value;return n(t)}})))};N.propTypes={value:u.default.string.isRequired,databases:u.default.array.isRequired,onChange:u.default.func.isRequired};var D=function(e){var t=e.replicationSource,n=e.databases,a=e.localSource,o=e.remoteSource,i=e.onChangeRemote,r=e.onChangeLocal;return t===p.default.REPLICATION_SOURCE.LOCAL?d.default.createElement(N,{value:a,databases:n,onChange:r}):d.default.createElement(v,{value:o,onChange:i})};D.propTypes={replicationSource:u.default.string.isRequired,databases:u.default.array.isRequired,localSource:u.default.string.isRequired,remoteSource:u.default.string.isRequired,onChangeRemote:u.default.func.isRequired,onChangeLocal:u.default.func.isRequired};var O=function(){return[{value:"",label:"Select source"},{value:p.default.REPLICATION_SOURCE.LOCAL,label:"Local database"},{value:p.default.REPLICATION_SOURCE.REMOTE,label:"Remote database"}].map(function(e){return d.default.createElement("option",{value:e.value,key:e.value},e.label)})},S=t.ReplicationSourceSelect=function(e){var t=e.onChange,n=e.value;return d.default.createElement("div",{className:"replication__section"},d.default.createElement("div",{className:"replication__input-label"},"Replication Source:"),d.default.createElement("div",{className:"replication__input-select"},d.default.createElement(y,{selectContent:O(),selectChange:function(e){return t(e.target.value)},selectId:"replication-source",selectValue:n})))};S.propTypes={value:u.default.string.isRequired,onChange:u.default.func.isRequired},(t.ReplicationSource=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"getReplicationSourceRow",value:function(){var e=this.props,t=e.replicationSource,n=e.localSource,a=e.onLocalSourceChange,o=e.onRemoteSourceChange,i=e.remoteSource,r=e.databases;return t?d.default.createElement(D,{replicationSource:t,databases:r,localSource:n,remoteSource:i,onChangeLocal:a,onChangeRemote:o}):null}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.onSourceSelect;return d.default.createElement("div",null,d.default.createElement(S,{onChange:n,value:t}),this.getReplicationSourceRow())}}]),t}(d.default.Component)).propTypes={replicationSource:u.default.string.isRequired,localSource:u.default.string.isRequired,remoteSource:u.default.string.isRequired,databases:u.default.array.isRequired,onLocalSourceChange:u.default.func.isRequired,onRemoteSourceChange:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ReplicationSubmit=void 0;var o=n(1),i=a(o),r=n(0),l=a(r),s=n(15),u=a(s),c=u.default.ConfirmButton;(t.ReplicationSubmit=function(e){var t=e.onClear,n=e.disabled,a=e.onClick;return l.default.createElement("div",{className:"replication__button-row"},l.default.createElement(c,{customIcon:"fonticon-replicate",id:"replicate",text:"Start Replication",onClick:a,disabled:n}),l.default.createElement("a",{className:"replication__clear-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},"Clear"))}).propTypes={disabled:i.default.bool.isRequired,onClick:i.default.func.isRequired,onClear:i.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ReplicationTarget=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(47),p=a(f),h=n(15),m=a(h),_=n(32),g=a(_),E=n(263),b=a(E),y=m.default.StyledSelect,v=function(){return[{value:"",label:"Select target"},{value:p.default.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,label:"Existing local database"},{value:p.default.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,label:"Existing remote database"},{value:p.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE,label:"New local database"},{value:p.default.REPLICATION_TARGET.NEW_REMOTE_DATABASE,label:"New remote database"}].map(function(e){return d.default.createElement("option",{value:e.value,key:e.value},e.label)})},N=function(e){var t=e.value,n=e.onChange;return d.default.createElement("div",{className:"replication__section"},d.default.createElement("div",{className:"replication__input-label"},"Replication Target:"),d.default.createElement("div",{id:"replication-target",className:"replication__input-select"},d.default.createElement(y,{selectContent:v(),selectChange:function(e){return n(e.target.value)},selectId:"replication-target",selectValue:t})))};N.propTypes={value:u.default.string.isRequired,onChange:u.default.func.isRequired};var D=function(e){var t=e.onChange,n=e.value,a=e.newRemote;return d.default.createElement("div",null,d.default.createElement("input",{type:"text",className:"replication__remote-connection-url",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}}),d.default.createElement(b.default,{newRemote:a}))};D.propTypes={value:u.default.string.isRequired,onChange:u.default.func.isRequired};var O=function(e){var t=e.onChange,n=e.value,a=e.databases,o=a.map(function(e){return{value:e,label:e}});return d.default.createElement("div",{id:"replication-target-local",className:"replication__input-react-select"},d.default.createElement(g.default,{value:n,options:o,placeholder:"Database name",clearable:!1,onChange:function(e){var n=e.value;return t(n)}}))};O.propTypes={value:u.default.string.isRequired,databases:u.default.array.isRequired,onChange:u.default.func.isRequired};var S=function(e){var t=e.onChange,n=e.value;return d.default.createElement("input",{type:"text",className:"replication__new-input",placeholder:"Database name",value:n,onChange:function(e){return t(e.target.value)}})};S.propTypes={value:u.default.string.isRequired,onChange:u.default.func.isRequired};var T=function(e){var t=e.replicationTarget,n=e.onLocalTargetChange,a=e.onRemoteTargetChange,o=e.localTarget,i=e.remoteTarget,r=e.databases;if(!t)return null;var l=void 0;t===p.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE?(s="New Database:",l=d.default.createElement(S,{value:o,onChange:n})):l=t===p.default.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE?d.default.createElement(O,{onChange:n,databases:r,value:o}):d.default.createElement(D,{onChange:a,value:i,newRemote:p.default.REPLICATION_TARGET.NEW_REMOTE_DATABASE===t});var s="Target Name:";return t!==p.default.REPLICATION_TARGET.NEW_REMOTE_DATABASE&&t!==p.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE||(s="New Database:"),d.default.createElement("div",{className:"replication__section"},d.default.createElement("div",{className:"replication__input-label"},s),d.default.createElement("div",null,l))};T.propTypes={databases:u.default.array.isRequired,onLocalTargetChange:u.default.func.isRequired,onRemoteTargetChange:u.default.func.isRequired,remoteTarget:u.default.string.isRequired,localTarget:u.default.string.isRequired,replicationTarget:u.default.string.isRequired},(t.ReplicationTarget=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.replicationTarget,n=e.onLocalTargetChange,a=e.onTargetChange,o=e.databases,i=e.localTarget,r=e.onRemoteTargetChange,l=e.remoteTarget;return d.default.createElement("div",null,d.default.createElement(N,{value:t,onChange:a}),d.default.createElement(T,{remoteTarget:l,replicationTarget:t,databases:o,localTarget:i,onRemoteTargetChange:r,onLocalTargetChange:n}))}}]),t}(d.default.Component)).propTypes={databases:u.default.array.isRequired,onTargetChange:u.default.func.isRequired,onLocalTargetChange:u.default.func.isRequired,onRemoteTargetChange:u.default.func.isRequired,remoteTarget:u.default.string.isRequired,localTarget:u.default.string.isRequired,replicationTarget:u.default.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),d=n(501),f=a(d),p=n(134),h=a(p),m=n(53),_=n(15),g=a(_),E=n(492),b=a(E),y=n(491),v=a(y),N=n(135),D=n(29),O=n(95),S=n(494),T=a(S),C=g.default.LoadLines,w=g.default.Polling,I=g.default.RefreshBtn,A=f.default.replicationStore,R=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStoreState(),n}return l(t,e),s(t,[{key:"getStoreState",value:function(){var e;return e={loading:A.isLoading(),activityLoading:A.isActivityLoading(),databases:A.getDatabases(),authenticated:A.isAuthenticated(),password:A.getPassword(),replicationSource:A.getReplicationSource(),localSource:A.getlocalSource(),localSourceKnown:A.isLocalSourceKnown(),remoteSource:A.getRemoteSource(),replicationTarget:A.getReplicationTarget(),localTarget:A.getlocalTarget(),localTargetKnown:A.isLocalTargetKnown(),remoteTarget:A.getRemoteTarget(),passwordModalVisible:A.isPasswordModalVisible(),showConflictModal:A.isConflictModalVisible(),replicationType:A.getReplicationType(),replicationDocName:A.getReplicationDocName(),submittedNoChange:A.getSubmittedNoChange(),statusDocs:A.getFilteredReplicationStatus(),statusFilter:A.getStatusFilter(),replicateFilter:A.getReplicateFilter(),allDocsSelected:A.getAllDocsSelected(),someDocsSelected:A.someDocsSelected(),username:A.getUsername()},o(e,"password",A.getPassword()),o(e,"activitySort",A.getActivitySort()),o(e,"tabSection",A.getTabSection()),o(e,"checkingApi",A.checkingAPI()),o(e,"supportNewApi",A.supportNewApi()),o(e,"replicateLoading",A.isReplicateInfoLoading()),o(e,"replicateInfo",A.getReplicateInfo()),o(e,"allReplicateSelected",A.getAllReplicateSelected()),o(e,"someReplicateSelected",A.someReplicateSelected()),e}},{key:"loadReplicationInfo",value:function(e,t){h.default.initReplicator(e.localSource),this.getAllActivity(),e.replicationId&&e.replicationId!==t.replicationId&&(h.default.clearReplicationForm(),h.default.getReplicationStateFrom(e.replicationId))}},{key:"getAllActivity",value:function(){h.default.getReplicationActivity(),h.default.getReplicateActivity()}},{key:"componentDidMount",value:function(){A.on("change",this.onChange,this),this.loadReplicationInfo(this.props,{})}},{key:"componentWillReceiveProps",value:function(e){this.loadReplicationInfo(e,this.props)}},{key:"componentWillUnmount",value:function(){A.off("change",this.onChange),h.default.clearReplicationForm()}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"showSection",value:function(){var e,t=this.state,n=t.replicationSource,a=t.replicationTarget,i=t.replicationType,r=t.replicationDocName,l=t.passwordModalVisible,s=t.databases,u=t.localSource,d=t.remoteSource,f=t.remoteTarget,p=t.localTarget,_=t.statusDocs,g=t.statusFilter,E=t.loading,y=t.allDocsSelected,D=t.someDocsSelected,O=t.showConflictModal,S=t.localSourceKnown,w=t.localTargetKnown,I=t.username,A=t.password,R=t.authenticated,P=t.activityLoading,L=t.submittedNoChange,k=t.activitySort,M=t.tabSection,x=t.replicateInfo,j=t.replicateLoading,U=t.replicateFilter,V=t.allReplicateSelected,B=t.someReplicateSelected;if("new replication"===M){if(E)return c.default.createElement(C,null);var F=function(e){return function(t){h.default.updateFormField(e,t)}};return c.default.createElement(b.default,{docs:_,localTargetKnown:w,localSourceKnown:S,clearReplicationForm:h.default.clearReplicationForm,replicate:h.default.replicate,showPasswordModal:m.showPasswordModal,replicationSource:n,replicationTarget:a,replicationType:i,replicationDocName:r,passwordModalVisible:l,databases:s,localSource:u,remoteSource:d,remoteTarget:f,localTarget:p,updateFormField:F,conflictModalVisible:O,hideConflictModal:h.default.hideConflictModal,showConflictModal:h.default.showConflictModal,checkReplicationDocID:N.checkReplicationDocID,authenticated:R,username:I,password:A,submittedNoChange:L})}return"_replicate"===M?j?c.default.createElement(C,null):c.default.createElement(T.default,o({docs:x,filter:U,onFilterChange:h.default.filterReplicate,selectDoc:h.default.selectReplicate,selectAllDocs:h.default.selectAllReplicates,allDocsSelected:V,someDocsSelected:B,deleteDocs:h.default.deleteDocs,activitySort:k,changeActivitySort:h.default.changeActivitySort},"deleteDocs",h.default.deleteReplicates)):P?c.default.createElement(C,null):c.default.createElement(v.default,(e={docs:_,filter:g,onFilterChange:h.default.filterDocs,selectAllDocs:h.default.selectAllDocs,selectDoc:h.default.selectDoc},o(e,"selectAllDocs",h.default.selectAllDocs),o(e,"allDocsSelected",y),o(e,"someDocsSelected",D),o(e,"deleteDocs",h.default.deleteDocs),o(e,"activitySort",k),o(e,"changeActivitySort",h.default.changeActivitySort),e))}},{key:"getHeaderComponents",value:function(){return"new replication"===this.state.tabSection?null:c.default.createElement("div",{className:"right-header-flex"},c.default.createElement(w,{min:60,max:600,startValue:300,stepSize:60,onPoll:this.getAllActivity.bind(this)}),c.default.createElement(I,{refresh:this.getAllActivity.bind(this)}))}},{key:"getTabElements",value:function(){var e=this.state.tabSection,t=[c.default.createElement(O.TabElement,{key:1,selected:"activity"===e,text:"Replicator DB Activity",onChange:this.onTabChange.bind(this,"activity","#/replication")})];return this.state.supportNewApi&&t.push(c.default.createElement(O.TabElement,{key:2,selected:"_replicate"===e,text:"_replicate Activity",onChange:this.onTabChange.bind(this,"_replicate","#/replication/_replicate")})),t}},{key:"onTabChange",value:function(e,t){h.default.changeTabSection(e,t)}},{key:"getCrumbs",value:function(){return"new replication"===this.state.tabSection?[{name:"Job Configuration"}]:[]}},{key:"getTabs",value:function(){return"new replication"===this.state.tabSection?null:c.default.createElement(O.TabElementWrapper,null,this.getTabElements())}},{key:"render",value:function(){return this.state.checkingAPI?c.default.createElement(C,null):c.default.createElement(D.OnePane,null,c.default.createElement(D.OnePaneHeader,{crumbs:this.getCrumbs()},this.getHeaderComponents()),c.default.createElement(D.OnePaneContent,null,c.default.createElement("div",{className:"template-content flex-body flex-layout flex-col"},this.getTabs(),c.default.createElement("div",{className:"replication__page flex-layout flex-col"},this.showSection()))))}}]),t}(c.default.Component);t.default=R},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=a(o),r=function(e){var t=i.default.isString(e)?e.trim().replace(/\/$/,""):e.url;return new URL(t).pathname.slice(1)};t.default={getDatabaseLabel:r}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=n(2),l=a(r),s=n(498),u=a(s),c=n(134),d=a(c),f=l.default.RouteObject.extend({routes:{"replication/_create":"defaultView","replication/_create/:dbname":"defaultView","replication/id/:id":"fromId",replication:"activityView","replication/_replicate":"replicateView"},selectedHeader:"Replication",roles:["fx_loggedIn"],setActivityCrumbs:function(){this.crumbs=[{name:"Replication"}]},setCreateReplicationCrumbs:function(){this.crumbs=[{name:"Replication",link:"replication"},{name:"New Replication"}]},defaultView:function(e){var t=e||"";return d.default.changeTabSection("new replication"),d.default.clearReplicationForm(),i.default.createElement(u.default,{localSource:t})},fromId:function(e){return d.default.clearReplicationForm(),d.default.changeTabSection("new replication"),i.default.createElement(u.default,{replicationId:e})},activityView:function(){return d.default.changeTabSection("activity"),i.default.createElement(u.default,null)},replicateView:function(){return d.default.changeTabSection("_replicate"),i.default.createElement(u.default,null)}});t.default={RouteObjects:[f]}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(11),l=a(r),s=n(2),u=a(s),c=n(260),d=a(c),f=n(47),p=a(f),h=n(204),m=a(h),_=n(18),g=a(_),E=o({remoteSource:"_remoteSource",remoteTarget:"_remoteTarget",localTarget:"_localTarget",replicationType:"_replicationType",replicationDocName:"_replicationDocName",replicationSource:"_replicationSource",replicationTarget:"_replicationTarget",localSource:"_localSource"},"replicationDocName","_replicationDocName"),b=u.default.Store.extend((i={initialize:function(){this.reset()},reset:function(){this._loading=!1,this._databases=[],this._authenticated=!1,this._password="",this._replicationSource="",this._localSource="",this._remoteSource="",this._replicationTarget="",this._localTarget="",this._remoteTarget="",this._isPasswordModalVisible=!1,this._isConflictModalVisible=!1,this._replicationType=p.default.REPLICATION_TYPE.ONE_TIME,this._replicationDocName="",this._submittedNoChange=!1,this._statusDocs=[],this._statusFilteredStatusDocs=[],this._statusFilter="",this._replicateFilter="",this._allDocsSelected=!1,this._allReplicateSelected=!1,this._username="",this._password="",this._activityLoading=!1,this._tabSection="new replication",this._supportNewApi=!0,this.loadActivitySort(),this._fetchingReplicateInfo=!1,this._replicateInfo=[],this._checkingAPI=!0,this._supportNewApi=!1},supportNewApi:function(){return this._supportNewApi},checkingAPI:function(){return this._checkingAPI},getActivitySort:function(){return this._activitySort},loadActivitySort:function(){var e={descending:!1,column:"statusTime"},t=l.default.utils.localStorageGet("replication-activity-sort");t||(t=e,this.setActivitySort(t)),this._activitySort=t},setActivitySort:function(e){l.default.utils.localStorageSet("replication-activity-sort",e),this._activitySort=e},isReplicateInfoLoading:function(){return this._fetchingReplicateInfo},getReplicateInfo:function(){var e=this;return this._replicateInfo.filter(function(t){return g.default.values(t).filter(function(t){return!!t&&t.toString().toLowerCase().match(e._replicateFilter)}).length>0})},setReplicateInfo:function(e){this._replicateInfo=e},setCredentials:function(e,t){this._username=e,this._password=t},getUsername:function(){return this._username},getPassword:function(){return this._password},getSubmittedNoChange:function(){return this._submittedNoChange},changeAfterSubmit:function(){this._submittedNoChange=!1},isLoading:function(){return this._loading},isActivityLoading:function(){return this._activityLoading},isAuthenticated:function(){return this._authenticated},getReplicationSource:function(){return this._replicationSource},getlocalSource:function(){return this._localSource},isLocalSourceKnown:function(){return g.default.includes(this._databases,this._localSource)},isLocalTargetKnown:function(){return g.default.includes(this._databases,this._localTarget)},getReplicationTarget:function(){return this._replicationTarget},getDatabases:function(){return this._databases},setDatabases:function(e){this._databases=e},getReplicationType:function(){return this._replicationType},getlocalTarget:function(){return this._localTarget},getReplicationDocName:function(){return this._replicationDocName},setReplicationStatus:function(e){this._statusDocs=e},getReplicationStatus:function(){return this._statusDocs},getFilteredReplicationStatus:function(){var e=this;return this._statusDocs.filter(function(t){return g.default.values(t).filter(function(t){return t?t.toString().toLowerCase().match(e._statusFilter):null}).length>0})},selectDoc:function(e){var t=this._statusDocs.find(function(t){return t._id===e});t&&(t.selected=!t.selected,this._allDocsSelected=!1)},selectReplicate:function(e){var t=this._replicateInfo.find(function(t){return t._id===e});t&&(t.selected=!t.selected,this._allReplicateSelected=!1)},selectAllReplicate:function(){var e=this;this._allReplicateSelected=!this._allReplicateSelected,this.getReplicateInfo().forEach(function(t){return t.selected=e._allReplicateSelected})},someReplicateSelected:function(){return this.getReplicateInfo().some(function(e){return e.selected})},getAllReplicateSelected:function(){return this._allReplicateSelected},selectAllDocs:function(){var e=this;this._allDocsSelected=!this._allDocsSelected,this.getFilteredReplicationStatus().forEach(function(t){return t.selected=e._allDocsSelected})},someDocsSelected:function(){return this.getFilteredReplicationStatus().some(function(e){return e.selected})},getAllDocsSelected:function(){return this._allDocsSelected},setStatusFilter:function(e){this._statusFilter=e},getStatusFilter:function(){return this._statusFilter},setReplicateFilter:function(e){this._replicateFilter=e},getReplicateFilter:function(){return this._replicateFilter},updateFormField:function(e,t){this[E[e]]=t},clearReplicationForm:function(){var e=this;g.default.values(E).forEach(function(t){return e[t]=""})},getRemoteSource:function(){return this._remoteSource},getRemoteTarget:function(){return this._remoteTarget},isPasswordModalVisible:function(){return this._isPasswordModalVisible},isConflictModalVisible:function(){return this._isConflictModalVisible}},o(i,"getPassword",function(){return this._password}),o(i,"setStateFromDoc",function(e){var t=this;Object.keys(e).forEach(function(n){t.updateFormField(n,e[n])})}),o(i,"getTabSection",function(){return this._tabSection}),o(i,"dispatch",function(e){var t=e.type,n=e.options;switch(t){case d.default.INIT_REPLICATION:this._loading=!0,this._localSource=n.localSource,this._localSource&&(this._replicationSource=p.default.REPLICATION_SOURCE.LOCAL,this._remoteSource="",this._replicationTarget="",this._localTarget="",this._remoteTarget="");break;case d.default.REPLICATION_DATABASES_LOADED:this.setDatabases(n.databases),this._loading=!1;break;case d.default.REPLICATION_FETCHING_FORM_STATE:this._loading=!0;break;case d.default.REPLICATION_UPDATE_FORM_FIELD:this.changeAfterSubmit(),this.updateFormField(n.fieldName,n.value);break;case d.default.REPLICATION_CLEAR_FORM:this.clearReplicationForm();break;case d.default.REPLICATION_STARTING:this._submittedNoChange=!0;break;case d.default.REPLICATION_FETCHING_STATUS:this._activityLoading=!0;break;case d.default.REPLICATION_STATUS:this._activityLoading=!1,this.setReplicationStatus(n);break;case d.default.REPLICATION_FILTER_DOCS:this.setStatusFilter(n);break;case d.default.REPLICATION_FILTER_REPLICATE:this.setReplicateFilter(n);break;case d.default.REPLICATION_TOGGLE_DOC:this.selectDoc(n);break;case d.default.REPLICATION_TOGGLE_ALL_DOCS:this.selectAllDocs();break;case d.default.REPLICATION_TOGGLE_REPLICATE:this.selectReplicate(n);break;case d.default.REPLICATION_TOGGLE_ALL_REPLICATE:this.selectAllReplicate();break;case d.default.REPLICATION_SET_STATE_FROM_DOC:this._loading=!1,this.setStateFromDoc(n);break;case d.default.REPLICATION_SHOW_CONFLICT_MODAL:this._isConflictModalVisible=!0;break;case d.default.REPLICATION_HIDE_CONFLICT_MODAL:this._isConflictModalVisible=!1;break;case d.default.REPLICATION_CHANGE_ACTIVITY_SORT:this.setActivitySort(n);break;case d.default.REPLICATION_CLEAR_SELECTED_DOCS:this._allDocsSelected=!1;break;case d.default.REPLICATION_CHANGE_TAB_SECTION:this._tabSection=n;break;case d.default.REPLICATION_CLEAR_SELECTED_DOCS:this._allDocsSelected=!1;break;case d.default.REPLICATION_SUPPORT_NEW_API:this._checkingAPI=!1,this._supportNewApi=n;break;case d.default.REPLICATION_FETCHING_REPLICATE_STATUS:this._fetchingReplicateInfo=!0;break;case d.default.REPLICATION_REPLICATE_STATUS:this._fetchingReplicateInfo=!1,this.setReplicateInfo(n);break;case d.default.REPLICATION_CLEAR_SELECTED_REPLICATES:this._allReplicateSelected=!1;break;case m.default.AUTH_SHOW_PASSWORD_MODAL:this._isPasswordModalVisible=!0;break;case m.default.AUTH_HIDE_PASSWORD_MODAL:this._isPasswordModalVisible=!1;break;case m.default.AUTH_CREDS_VALID:this._authenticated=!0,this.setCredentials(n.username,n.password);break;case m.default.AUTH_CREDS_INVALID:this._authenticated=!1;break;default:return}this.triggerChange()}),i)),y=new b;y.dispatchToken=u.default.dispatcher.register(y.dispatch),t.default={replicationStore:y}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(503),l=a(r);n(605),l.default.initialize=function(){i.default.addHeaderLink({title:"Setup",href:"#/setup",icon:"fonticon-wrench"})},t.default=l.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=n(11),l=a(r),s=n(2),u=a(s),c=n(264),d=a(c),f=n(504),p=a(f),h=n(265),m=a(h),_=n(69),g=a(_),E=n(29),b=u.default.RouteObject.extend({roles:["_admin"],selectedHeader:"Setup",routes:{setup:"setupInitView","setup/finish":"finishView","setup/singlenode":"setupSingleNode","setup/multinode":"setupMultiNode"},setupInitView:function(){var e=new d.default.Model;return g.default.fetchNodes(),m.default.getClusterStateFromCouch(),i.default.createElement(E.OnePaneSimpleLayout,{component:i.default.createElement(p.default.SetupFirstStepController,null),endpoint:e.url("apiurl"),docURL:e.documentation,crumbs:[{name:"Setup "+l.default.i18n.en_US["couchdb-productname"]}]})},setupSingleNode:function(){var e=new d.default.Model;return g.default.fetchNodes(),i.default.createElement(E.OnePaneSimpleLayout,{component:i.default.createElement(p.default.SetupSingleNodeController,null),endpoint:e.url("apiurl"),docURL:e.documentation,crumbs:[{name:"Setup "+l.default.i18n.en_US["couchdb-productname"]}]})},setupMultiNode:function(){var e=new d.default.Model;return g.default.fetchNodes(),i.default.createElement(E.OnePaneSimpleLayout,{component:i.default.createElement(p.default.SetupMultipleNodesController,null),endpoint:e.url("apiurl"),docURL:e.documentation,crumbs:[{name:"Setup "+l.default.i18n.en_US["couchdb-productname"]}]})},finishView:function(){var e=new d.default.Model;return m.default.getClusterStateFromCouch(),i.default.createElement(E.OnePaneSimpleLayout,{component:i.default.createElement(p.default.ClusterConfiguredScreen,null),endpoint:e.url("apiurl"),docURL:e.documentation,crumbs:[{name:"Setup "+l.default.i18n.en_US["couchdb-productname"]}]})}});d.default.RouteObjects=[b],t.default=d.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(11),u=a(s),c=n(2),d=a(c),f=n(0),p=a(f),h=n(15),m=a(h),_=n(265),g=a(_),E=n(267),b=a(E),y=b.default.setupStore,v=m.default.ConfirmButton,N=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{clusterState:y.getClusterState()}},a.onChange=function(){a.setState(a.getStoreState())},a.getNodeType=function(){return"cluster_finished"===a.state.clusterState?"clustered":"single_node_enabled"===a.state.clusterState?"single":"unknown state"},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){y.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){y.off("change",this.onChange)}},{key:"render",value:function(){var e=this.getNodeType();return p.default.createElement("div",{className:"setup-screen"},u.default.i18n.en_US["couchdb-productname"]," is configured for production usage as a ",e," node!",p.default.createElement("br",null),p.default.createElement("br",null),"Do you want to ",p.default.createElement("a",{href:"#replication"},"replicate data"),"?")}}]),t}(p.default.Component),D=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){var e="Specify your Admin credentials";return this.props.adminParty&&(e="Create Admin credentials."),p.default.createElement("div",{className:"setup-creds"},p.default.createElement("div",null,p.default.createElement("p",null,e)),p.default.createElement("input",{className:"setup-username",onChange:this.props.onAlterUsername,placeholder:"Username",type:"text"}),p.default.createElement("input",{className:"setup-password",onChange:this.props.onAlterPassword,placeholder:"Password",type:"password"}))}}]),t}(p.default.Component),O=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={nodeCountValue:a.props.nodeCountValue},a.handleNodeCountChange=function(e){a.props.onAlterNodeCount(e),a.setState({nodeCountValue:e.target.value})},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){return p.default.createElement("div",{className:"setup-node-count"},p.default.createElement("p",null,"Number of nodes to be added to the cluster (including this one)"),p.default.createElement("input",{className:"setup-input-nodecount",value:this.state.nodeCountValue,onChange:this.handleNodeCountChange,placeholder:"Value of cluster n",type:"text"}))}}]),t}(p.default.Component),S=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={ipValue:a.props.ipInitialValue,portValue:a.props.portValue},a.handleIpChange=function(e){a.props.onAlterBindAddress(e),a.setState({ipValue:e.target.value})},a.handlePortChange=function(e){a.props.onAlterPort(e),a.setState({portValue:e.target.value})},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){return p.default.createElement("div",{className:"setup-opt-settings"},p.default.createElement("p",null,"Bind address the node will listen on"),p.default.createElement("input",{className:"setup-input-ip",value:this.state.ipValue,onChange:this.handleIpChange,placeholder:"IP Address",type:"text"}),p.default.createElement("div",{className:"setup-port"},p.default.createElement("p",null,"Port that the node will use"),p.default.createElement("input",{className:"setup-input-port",value:this.state.portValue,onChange:this.handlePortChange,defaultValue:"5984",type:"text"})))}}]),t}(p.default.Component),T=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{nodeList:y.getNodeList(),isAdminParty:y.getIsAdminParty(),remoteAddress:y.getAdditionalNode().remoteAddress}},a.onChange=function(){a.setState(a.getStoreState())},a.getNodeList=function(){return a.state.nodeList.map(function(e,t){return p.default.createElement("div",{key:t,className:"node-item"},e.remoteAddress,":",e.port)},a)},a.addNode=function(){g.default.addNode(a.isAdminParty)},a.alterPortAdditionalNode=function(e){g.default.alterPortAdditionalNode(e.target.value)},a.alterBindAddressAdditionalNode=function(e){g.default.alterBindAddressAdditionalNode(e.target.value)},a.alterRemoteAddressAdditionalNode=function(e){g.default.alterRemoteAddressAdditionalNode(e.target.value)},a.alterUsername=function(e){g.default.setUsername(e.target.value)},a.alterPassword=function(e){g.default.setPassword(e.target.value)},a.alterBindAddressSetupNode=function(e){g.default.setBindAddressForSetupNode(e.target.value)},a.alterPortSetupNode=function(e){g.default.setPortForSetupNode(e.target.value)},a.alterNodeCount=function(e){g.default.setNodeCount(e.target.value)},a.finishClusterSetup=function(){g.default.finishClusterSetup("CouchDB Cluster set up!")},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){this.isAdminParty=y.getIsAdminParty(),y.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){y.off("change",this.onChange)}},{key:"render",value:function(){return p.default.createElement("div",{className:"setup-nodes"},"Setup your initial base-node, afterwards add the other nodes that you want to add",p.default.createElement("div",{className:"setup-setupnode-section"},p.default.createElement(D,{onAlterUsername:this.alterUsername,onAlterPassword:this.alterPassword,adminParty:this.state.isAdminParty}),p.default.createElement(S,{onAlterPort:this.alterPortSetupNode,onAlterBindAddress:this.alterBindAddressSetupNode}),p.default.createElement(O,{onAlterNodeCount:this.alterNodeCount})),p.default.createElement("hr",null),p.default.createElement("div",{className:"setup-add-nodes-section"},p.default.createElement("h2",null,"Add Nodes to the Cluster"),p.default.createElement("p",null,"Remote host"),p.default.createElement("input",{value:this.state.remoteAddress,onChange:this.alterRemoteAddressAdditionalNode,className:"input-remote-node",type:"text",placeholder:"IP Address"}),p.default.createElement(S,{onAlterPort:this.alterPortAdditionalNode,onAlterBindAddress:this.alterBindAddressAdditionalNode}),p.default.createElement("div",{className:"setup-add-button"},p.default.createElement(v,{onClick:this.addNode,showIcon:!1,id:"setup-btn-no-thanks",text:"Add Node"}))),p.default.createElement("div",{className:"setup-nodelist"},this.getNodeList()),p.default.createElement("div",{className:"centered setup-finish"},p.default.createElement(v,{onClick:this.finishClusterSetup,showIcon:!1,text:"Configure Cluster"})))}}]),t}(p.default.Component),C=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{isAdminParty:y.getIsAdminParty()}},a.onChange=function(){a.setState(a.getStoreState())},a.alterUsername=function(e){g.default.setUsername(e.target.value)},a.alterPassword=function(e){g.default.setPassword(e.target.value)},a.alterBindAddress=function(e){g.default.setBindAddressForSetupNode(e.target.value)},a.alterPort=function(e){g.default.setPortForSetupNode(e.target.value)},a.finishSingleNode=function(e){e.preventDefault(),g.default.setupSingleNode()},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){y.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){y.off("change",this.onChange)}},{key:"render",value:function(){return p.default.createElement("div",{className:"setup-nodes"},p.default.createElement("div",{className:"setup-setupnode-section"},p.default.createElement(D,{onAlterUsername:this.alterUsername,onAlterPassword:this.alterPassword,adminParty:this.state.isAdminParty}),p.default.createElement(S,{onAlterPort:this.alterPort,onAlterBindAddress:this.alterBindAddress}),p.default.createElement(v,{onClick:this.finishSingleNode,text:"Configure Node"})))}}]),t}(p.default.Component),w=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{clusterState:y.getClusterState()}},a.onChange=function(){a.setState(a.getStoreState())},a.redirectToSingleNodeSetup=function(e){e.preventDefault(),d.default.navigate("#setup/singlenode")},a.redirectToMultiNodeSetup=function(e){e.preventDefault(),d.default.navigate("#setup/multinode")},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){y.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){y.off("change",this.onChange)}},{key:"render",value:function(){return"cluster_finished"===this.state.clusterState||"single_node_enabled"===this.state.clusterState?p.default.createElement(N,null):p.default.createElement("div",{className:"setup-screen"},p.default.createElement("h2",null,"Welcome to ",u.default.i18n.en_US["couchdb-productname"],"!"),p.default.createElement("p",null,"This wizard should be run directly on the node, rather than through a load-balancer."),p.default.createElement("p",null,"You can configure a single node, or a multi-node CouchDB installation."),p.default.createElement("div",null,p.default.createElement(v,{onClick:this.redirectToMultiNodeSetup,showIcon:!1,text:"Configure a Cluster"}),p.default.createElement(v,{onClick:this.redirectToSingleNodeSetup,showIcon:!1,id:"setup-btn-no-thanks",text:"Configure a Single Node"})))}}]),t}(p.default.Component);t.default={SetupMultipleNodesController:T,SetupFirstStepController:w,ClusterConfiguredScreen:N,SetupSingleNodeController:C,SetupOptionalSettings:S}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(507),l=a(r);n(606),l.default.initialize=function(){i.default.addHeaderLink({title:"Verify",href:"#/verifyinstall",icon:"fonticon-ok-circled",bottomNav:!0})},t.default=l.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(136),p=a(f),h=n(268),m=a(h),_=n(508),g=a(_),E=g.default.verifyInstallStore,b=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{isVerifying:E.checkIsVerifying(),testResults:E.getTestResults()}},a.startVerification=function(){m.default.startVerification()},a.onChange=function(){a.setState(a.getStoreState())},a.state=a.getStoreState(),r=n,i(a,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){E.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){E.off("change",this.onChange)}},{key:"render",value:function(){return d.default.createElement("div",null,d.default.createElement(y,{verify:this.startVerification,isVerifying:this.state.isVerifying}),d.default.createElement(v,{testResults:this.state.testResults}))}}]),t}(d.default.Component),y=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("button",{id:"start",className:"btn btn-primary",onClick:this.props.verify,disabled:this.props.isVerifying},this.props.isVerifying?"Verifying":"Verify Installation")}}]),t}(d.default.Component);y.propTypes={verify:u.default.func.isRequired,isVerifying:u.default.bool.isRequired};var v=function(e){function t(){var e,n,a,r;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.showTestResult=function(e){return a.props.testResults[e].complete?a.props.testResults[e].success?d.default.createElement("span",null,"âœ“"):d.default.createElement("span",null,"âœ—"):""},r=n,i(a,r)}return r(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("table",{className:"table table-striped table-bordered"},d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",null,"Test"),d.default.createElement("th",null,"Status"))),d.default.createElement("tbody",null,d.default.createElement("tr",null,d.default.createElement("td",null,"Create Database"),d.default.createElement("td",{id:"js-test-create-db"},this.showTestResult(p.default.TESTS.CREATE_DATABASE))),d.default.createElement("tr",null,d.default.createElement("td",null,"Create Document"),d.default.createElement("td",{id:"js-test-create-doc"},this.showTestResult(p.default.TESTS.CREATE_DOCUMENT))),d.default.createElement("tr",null,d.default.createElement("td",null,"Update Document"),d.default.createElement("td",{id:"js-test-update-doc"},this.showTestResult(p.default.TESTS.UPDATE_DOCUMENT))),d.default.createElement("tr",null,d.default.createElement("td",null,"Delete Document"),d.default.createElement("td",{id:"js-test-delete-doc"},this.showTestResult(p.default.TESTS.DELETE_DOCUMENT))),d.default.createElement("tr",null,d.default.createElement("td",null,"Create View"),d.default.createElement("td",{id:"js-test-create-view"},this.showTestResult(p.default.TESTS.CREATE_VIEW))),d.default.createElement("tr",null,d.default.createElement("td",null,"Replication"),d.default.createElement("td",{id:"js-test-replication"},this.showTestResult(p.default.TESTS.REPLICATION)))))}}]),t}(d.default.Component);v.propTypes={testResults:u.default.object.isRequired},t.default={VerifyInstallController:b,VerifyInstallButton:y,VerifyInstallResults:v}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=a(o),r=n(2),l=a(r),s=n(270),u=a(s),c=n(268),d=a(c),f=n(506),p=a(f),h=n(29),m=l.default.RouteObject.extend({routes:{verifyinstall:"verifyInstall"},selectedHeader:"Verify",verifyInstall:function(){return d.default.resetStore(),i.default.createElement(h.OnePaneSimpleLayout,{component:i.default.createElement(p.default.VerifyInstallController,null),crumbs:[{name:"Verify CouchDB Installation"}]})}});u.default.RouteObjects=[m],t.default=u.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),r=n(136),l=a(r),s=n(269),u=a(s),c=i.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._isVerifying=!1,this._tests={},_.each(Object.keys(l.default.TESTS),function(e){this._tests[l.default.TESTS[e]]={complete:!1}},this)},startVerification:function(){this._isVerifying=!0},stopVerification:function(){this._isVerifying=!1},checkIsVerifying:function(){return this._isVerifying},updateTestStatus:function(e,t){if(!_.has(this._tests,e))throw new Error("Invalid test name passed to updateTestStatus()");this._tests[e]={complete:!0,success:t}},getTestResults:function(){return this._tests},dispatch:function(e){switch(e.type){case u.default.VERIFY_INSTALL_START:this.startVerification(),this.triggerChange();break;case u.default.VERIFY_INSTALL_RESET:this.reset(),this.triggerChange();break;case u.default.VERIFY_INSTALL_SINGLE_TEST_COMPLETE:this.updateTestStatus(e.test,e.success),this.triggerChange();break;case u.default.VERIFY_INSTALL_ALL_TESTS_COMPLETE:this.stopVerification(),this.triggerChange();break;default:return}}}),d={};d.verifyInstallStore=new c,d.verifyInstallStore.dispatchToken=i.default.dispatcher.register(d.verifyInstallStore.dispatch),t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkAccess=t.authenticationDenied=t.authenticate=void 0;var o=n(272),i=a(o),r=n(140),l=a(r),s=t.authenticate=function(e,t){if(e.isAdminParty())return!0;if(e.matchesRoles(t))return!0;throw new Error("Unable to authenticate")},u=t.authenticationDenied=function(){var e=window.location.hash.replace("#","").replace("login?urlback=","");e&&i.default.navigate("/login?urlback="+e,{replace:!0}),i.default.navigate("/login",{replace:!0})};t.checkAccess=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new l.default(function(t,n){return i.default.session.getSession().then(function(){if(s(i.default.session,e))return void t();n()}).catch(function(e){n(e),u()})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unregister=t.dispatch=t.register=void 0;var a=n(18),o=[],i=0,r=t.register=function(e){if("function"!=typeof e)throw new Error("Store dispatch method must be a function");return i+=1,o.push(e),e.dispatchId=i,i},l=t.dispatch=function(e){o.forEach(function(t){return t(e)})},s=t.unregister=function(e){var t=(0,a.findIndex)(o,function(t){return t.dispatchId===e});-1!==t&&o.splice(t,1)};t.default={register:r,dispatch:l,unregister:s}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(10),r=(a(i),n(43)),l=a(r),s=n(18),u=a(s),c=function(e){this._options=e,this.reactComponents={},this._configure(e||{}),this.initialize.apply(this,arguments)};c.extend=l.default.Model.extend;var d=["routes","roles"];u.default.extend(c.prototype,{routes:{},route:function(){},roles:[],initialize:function(){}},{get:function(e){return u.default.isFunction(this[e])?this[e]():this[e]},_configure:function(e){u.default.each(u.default.intersection(u.default.keys(e),d),function(t){this[t]=e[t]},this)},getRouteUrls:function(){return u.default.keys(this.get("routes"))},hasRoute:function(e){return!!this.get("routes")[e]},routeCallback:function(e,t){var n,a=this.get("routes"),i=a[e];return n="object"===(void 0===i?"undefined":o(i))?this[i.route]:this[i],n.apply(this,t)},getRouteRoles:function(e){var t=this.get("routes")[e];return"object"===(void 0===t?"undefined":o(t))&&t.roles?t.roles:this.roles}}),t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(509),i=n(43),r=a(i),l=n(18),s=a(l),u={};t.default=r.default.Router.extend({routes:{},beforeUnload:function(e,t){u[e]=t},removeBeforeUnload:function(e){delete u[e]},navigate:function(e,t){var n=!0,a=s.default.find(s.default.map(u,function(e){return e()}),function(e){if(e)return!0});if(a&&(n=window.confirm(a)),t&&t.redirect)return window.location=e;n&&r.default.Router.prototype.navigate(e,t)},addModuleRouteObject:function(e){var t=this,n=this;e.prototype.getRouteUrls().forEach(function(a){t.route(a,a.toString(),function(){for(var i=arguments.length,r=Array(i),l=0;l<i;l++)r[l]=arguments[l];var s=e.prototype.getRouteRoles(a);(0,o.checkAccess)(s).then(function(){n.activeRouteObject&&n.activeRouteObject.hasRoute(a)||(n.activeRouteObject=new e(a,r));var o=n.activeRouteObject,i=o.routeCallback(a,r);n.currentRouteOptions={selectedHeader:t.activeRouteObject.selectedHeader,component:i,roles:s,route:a.toString()},n.trigger("new-component",t.currentRouteOptions)},function(){})})})},setModuleRoutes:function(e){s.default.each(e,function(e){e&&(e.initialize(),e.RouteObjects&&s.default.each(e.RouteObjects,this.addModuleRouteObject,this))},this)},initialize:function(e){this.addons=e,this.setModuleRoutes(e),this.lastPages=[],r.default.history.on("route",function(){this.lastPages.push(r.default.history.fragment),this.lastPages.length>2&&this.lastPages.shift()},this)}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),i=a(o),r=n(18),l=a(r),s=function(){this.initialize.apply(this,arguments),l.default.bindAll(this)};s.extend=i.default.Model.extend,l.default.extend(s.prototype,i.default.Events,{triggerChange:function(){this.trigger("change")},initialize:function(){}}),t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={root:"/",version:"1.0",host:"../..",i18n:{en_US:{"mango-descripton":"Mango is an easy way to find documents on predefined indexes.","new-mango-index":"Mango Indexes","mango-help-title":"Mango","run-query-with-mango":"Run A Query with Mango","mango-title-editor":"Mango Query","mango-descripton-index-editor":"Mango is an easy way to find documents on predefined indexes. <br/><br/>Create an Index to query it afterwards. The example in the editor shows how to create an index for the field '_id'. <br/><br/>The Indexes that you already created are listed on the right.","mango-additional-indexes-heading":"Your additional Indexes:","mango-indexeditor-title":"Mango","couchdb-productname":"Apache CouchDB","cors-disable-cors-prompt":"Are you sure? Disabling CORS will overwrite your specific origin domains.","cors-notice":"Cross-Origin Resource Sharing (CORS) lets you connect to remote servers directly from the browser, so you can host browser-based apps on static pages and talk directly with CouchDB to load your data.","replication-password-modal-header":"Enter Account Password.","replication-password-modal-text":"Replication requires authentication on your credentials.","auth-missing-credentials":"Username or password cannot be blank.","auth-logged-in":"You have been logged in.","auth-admin-created":"CouchDB admin created","auth-change-password":"Your password has been updated.","auth-admin-creation-failed-prefix":"Could not create admin.","auth-passwords-not-matching":"Passwords do not match."}}}},function(e,t,n){"use strict";var a,o;!function(){function n(e,t){return new i(e,t).beautify()}function i(e,t){function n(e,t){var n=0;return e&&(n=e.indentation_level,n+=e.var_line&&e.var_line_reindented?1:0,!s()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,multiline_frame:!1,if_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:X.length,had_comment:!1,ternary_depth:0}}function a(){return{text:[]}}function o(e){if(e=void 0!==e&&e,X.length)for(i(X[X.length-1],e);e&&X.length>1&&0===X[X.length-1].text.length;)X.pop(),i(X[X.length-1],e)}function i(e){for(;e.text.length&&(" "===e.text[e.text.length-1]||e.text[e.text.length-1]===$||e.text[e.text.length-1]===Ee);)e.text.pop()}function r(e){return e.replace(/^\s+|\s+$/g,"")}function l(e){e=e.replace(/\x0d/g,"");for(var t=[],n=e.indexOf("\n");-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function s(){return 0===X[X.length-1].text.length}function u(){return!!s()&&(1===X.length||0===X[X.length-2].text.length)}function c(e){if(e=void 0!==e&&e,ge.wrap_line_length&&!e){var t=X[X.length-1];t.text.length>0&&t.text.join("").length+z.length+(de?1:0)>=ge.wrap_line_length&&(e=!0)}(ge.preserve_newlines&&ue||e)&&!s()&&(d(!1,!0),y(Z.mode)||v(Z.mode)||(ce=!0))}function d(e,t){if(ce=!1,de=!1,!t&&";"!==Z.last_text)for(;Z.mode===_e.Statement&&!Z.if_block&&!Z.do_block;)N();1===X.length&&s()||!e&&s()||(Z.multiline_frame=!0,X.push(a()))}function f(){if(s()){var e=X[X.length-1];if(ge.keep_array_indentation&&y(Z.mode)&&ue){e.text.push("");for(var t=0;t<he.length;t+=1)e.text.push(he[t])}else Ee&&e.text.push(Ee),p(Z.indentation_level+(Z.var_line&&Z.var_line_reindented?1:0)+(ce?1:0))}}function p(e){if(X.length>1){var t=X[X.length-1];Z.line_indent_level=e;for(var n=0;n<e;n+=1)t.text.push($)}}function h(){var e=X[X.length-1];if(de&&e.text.length){var t=e.text[e.text.length-1];" "!==t&&t!==$&&e.text.push(" ")}}function m(e){e=e||z,f(),ce=!1,h(),de=!1,X[X.length-1].text.push(e)}function _(){Z.indentation_level+=1}function g(){Z.indentation_level>0&&(!Z.parent||Z.indentation_level>Z.parent.indentation_level)&&(Z.indentation_level-=1)}function E(e){if(!e.multiline_frame)for(var t,n=e.start_line_index,a=0;n<X.length;)t=X[n],n++,0!==t.text.length&&(a=Ee&&t.text[0]===Ee?1:0,t.text[a]===$&&t.text.splice(a,1))}function b(e){Z?(te.push(Z),ee=Z):ee=n(null,e),Z=n(ee,e)}function y(e){return e===_e.ArrayLiteral}function v(e){return C(e,[_e.Expression,_e.ForInitializer,_e.Conditional])}function N(){te.length>0&&(ee=Z,Z=te.pop())}function D(){return Z.mode===_e.ObjectLiteral&&":"===Z.last_text&&0===Z.ternary_depth}function O(){return("do"===Z.last_text||"else"===Z.last_text&&"if"!==z||"TK_END_EXPR"===Q&&(ee.mode===_e.ForInitializer||ee.mode===_e.Conditional))&&(c(C(z,["do","for","if","while"])),b(_e.Statement),s()&&(_(),ce=!1),!0)}function S(e,t){for(var n=0;n<e.length;n++)if(r(e[n]).charAt(0)!==t)return!1;return!0}function T(e){return C(e,["case","return","do","if","throw","else"])}function C(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function w(e){for(var t,n=!1,a="",o=0,i="",r=0;n||o<e.length;)if(t=e.charAt(o),o++,n){if(n=!1,"x"===t)i=e.substr(o,2),o+=2;else{if("u"!==t){a+="\\"+t;continue}i=e.substr(o,4),o+=4}if(!i.match(/^[0123456789abcdefABCDEF]+$/))return e;if((r=parseInt(i,16))>=0&&r<32){a+="x"===t?"\\x"+i:"\\u"+i;continue}if(34===r||39===r||92===r)a+="\\"+String.fromCharCode(r);else{if("x"===t&&r>126&&r<=255)return e;a+=String.fromCharCode(r)}}else"\\"===t?n=!0:a+=t;return a}function I(e){for(var t=ie,n=K.charAt(t);C(n,ne)&&n!==e;){if(++t>=fe)return!1;n=K.charAt(t)}return n===e}function A(){var e;if(pe=0,ie>=fe)return["","TK_EOF"];ue=!1,he=[];var t=K.charAt(ie);for(ie+=1;C(t,ne);){if("\n"===t?(pe+=1,he=[]):pe&&(t===$?he.push($):"\r"!==t&&he.push(" ")),ie>=fe)return["","TK_EOF"];t=K.charAt(ie),ie+=1}if(C(t,ae)){if(ie<fe)for(;C(K.charAt(ie),ae)&&(t+=K.charAt(ie),(ie+=1)!==fe););if(ie!==fe&&t.match(/^[0-9]+[Ee]$/)&&("-"===K.charAt(ie)||"+"===K.charAt(ie))){var n=K.charAt(ie);return ie+=1,t+=n+A()[0],[t,"TK_WORD"]}return"in"===t?[t,"TK_OPERATOR"]:[t,"TK_WORD"]}if("("===t||"["===t)return[t,"TK_START_EXPR"];if(")"===t||"]"===t)return[t,"TK_END_EXPR"];if("{"===t)return[t,"TK_START_BLOCK"];if("}"===t)return[t,"TK_END_BLOCK"];if(";"===t)return[t,"TK_SEMICOLON"];if("/"===t){var a="",o=!0;if("*"===K.charAt(ie)){if((ie+=1)<fe)for(;ie<fe&&("*"!==K.charAt(ie)||!K.charAt(ie+1)||"/"!==K.charAt(ie+1))&&(t=K.charAt(ie),a+=t,"\n"!==t&&"\r"!==t||(o=!1),!((ie+=1)>=fe)););return ie+=2,o&&0===pe?["/*"+a+"*/","TK_INLINE_COMMENT"]:["/*"+a+"*/","TK_BLOCK_COMMENT"]}if("/"===K.charAt(ie)){for(a=t;"\r"!==K.charAt(ie)&&"\n"!==K.charAt(ie)&&(a+=K.charAt(ie),!((ie+=1)>=fe)););return[a,"TK_COMMENT"]}}if("'"===t||'"'===t||("/"===t||ge.e4x&&"<"===t&&K.slice(ie-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&("TK_WORD"===Q&&T(Z.last_text)||"TK_END_EXPR"===Q&&C(ee.mode,[_e.Conditional,_e.ForInitializer])||C(Q,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var i=t,l=!1,s=!1;if(e=t,ie<fe)if("/"===i){for(var u=!1;l||u||K.charAt(ie)!==i;)if(e+=K.charAt(ie),l?l=!1:(l="\\"===K.charAt(ie),"["===K.charAt(ie)?u=!0:"]"===K.charAt(ie)&&(u=!1)),(ie+=1)>=fe)return[e,"TK_STRING"]}else if(ge.e4x&&"<"===i){var c=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g,d=K.slice(ie-1),f=c.exec(d);if(f&&0===f.index){for(var p=f[2],h=0;f;){var m=!!f[1],_=f[2],g=!!f[f.length-1]||"![CDATA["===_.slice(0,8);if(_!==p||g||(m?--h:++h),h<=0)break;f=c.exec(d)}var E=f?f.index+f[0].length:d.length;return ie+=E-1,[d.slice(0,E),"TK_STRING"]}}else for(;l||K.charAt(ie)!==i;)if(e+=K.charAt(ie),l?("x"!==K.charAt(ie)&&"u"!==K.charAt(ie)||(s=!0),l=!1):l="\\"===K.charAt(ie),(ie+=1)>=fe)return[e,"TK_STRING"];if(ie+=1,e+=i,s&&ge.unescape_strings&&(e=w(e)),"/"===i)for(;ie<fe&&C(K.charAt(ie),ae);)e+=K.charAt(ie),ie+=1;return[e,"TK_STRING"]}if("#"===t){if(1===X.length&&0===X[0].text.length&&"!"===K.charAt(ie)){for(e=t;ie<fe&&"\n"!==t;)t=K.charAt(ie),e+=t,ie+=1;return[r(e)+"\n","TK_UNKNOWN"]}var b="#";if(ie<fe&&C(K.charAt(ie),le)){do{t=K.charAt(ie),b+=t,ie+=1}while(ie<fe&&"#"!==t&&"="!==t);return"#"===t||("["===K.charAt(ie)&&"]"===K.charAt(ie+1)?(b+="[]",ie+=2):"{"===K.charAt(ie)&&"}"===K.charAt(ie+1)&&(b+="{}",ie+=2)),[b,"TK_WORD"]}}if("<"===t&&"\x3c!--"===K.substring(ie-1,ie+3)){for(ie+=3,t="\x3c!--";"\n"!==K.charAt(ie)&&ie<fe;)t+=K.charAt(ie),ie++;return Z.in_html_comment=!0,[t,"TK_COMMENT"]}if("-"===t&&Z.in_html_comment&&"--\x3e"===K.substring(ie-1,ie+2))return Z.in_html_comment=!1,ie+=2,["--\x3e","TK_COMMENT"];if("."===t)return[t,"TK_DOT"];if(C(t,oe)){for(;ie<fe&&C(t+K.charAt(ie),oe)&&(t+=K.charAt(ie),!((ie+=1)>=fe)););return","===t?[t,"TK_COMMA"]:"="===t?[t,"TK_EQUALS"]:[t,"TK_OPERATOR"]}return[t,"TK_UNKNOWN"]}function R(){O();var e=_e.Expression;if("["===z){if("TK_WORD"===Q||")"===Z.last_text)return C(Z.last_text,re)&&(de=!0),b(e),m(),_(),void(ge.space_in_paren&&(de=!0));e=_e.ArrayLiteral,y(Z.mode)&&("["!==Z.last_text&&(","!==Z.last_text||"]"!==J&&"}"!==J)||ge.keep_array_indentation||d())}else"for"===Z.last_text?e=_e.ForInitializer:C(Z.last_text,["if","while"])&&(e=_e.Conditional);";"===Z.last_text||"TK_START_BLOCK"===Q?d():"TK_END_EXPR"===Q||"TK_START_EXPR"===Q||"TK_END_BLOCK"===Q||"."===Z.last_text?(c(ue),ce=!1):"TK_WORD"!==Q&&"TK_OPERATOR"!==Q?de=!0:"function"===Z.last_word||"typeof"===Z.last_word?ge.jslint_happy&&(de=!0):(C(Z.last_text,re)||"catch"===Z.last_text)&&ge.space_before_conditional&&(de=!0),"("===z&&("TK_EQUALS"!==Q&&"TK_OPERATOR"!==Q||D()||c()),b(e),m(),ge.space_in_paren&&(de=!0),_()}function P(){for(;Z.mode===_e.Statement;)N();"]"===z&&y(Z.mode)&&Z.multiline_frame&&!ge.keep_array_indentation&&d(),Z.multiline_frame&&c(),ge.space_in_paren&&("TK_START_EXPR"===Q?(o(),de=!1):de=!0),"]"===z&&ge.keep_array_indentation?(m(),N()):(N(),m()),E(ee),Z.do_while&&ee.mode===_e.Conditional&&(ee.mode=_e.Expression,Z.do_block=!1,Z.do_while=!1)}function L(){b(_e.BlockStatement);var e=I("}"),t=e&&"function"===Z.last_word&&"TK_END_EXPR"===Q;"expand"===ge.brace_style?"TK_OPERATOR"!==Q&&(t||"TK_EQUALS"===Q||T(Z.last_text)&&"else"!==Z.last_text)?de=!0:d():"TK_OPERATOR"!==Q&&"TK_START_EXPR"!==Q?"TK_START_BLOCK"===Q?d():de=!0:y(ee.mode)&&","===Z.last_text&&("}"===J?de=!0:d()),m(),_()}function k(){for(;Z.mode===_e.Statement;)N();var e="TK_START_BLOCK"===Q;"expand"===ge.brace_style?e||d():e||(y(Z.mode)&&ge.keep_array_indentation?(ge.keep_array_indentation=!1,d(),ge.keep_array_indentation=!0):d()),N(),m()}function M(){if(O()||!ue||v(Z.mode)||"TK_OPERATOR"===Q&&"--"!==Z.last_text&&"++"!==Z.last_text||"TK_EQUALS"===Q||!ge.preserve_newlines&&"var"===Z.last_text||d(),Z.do_block&&!Z.do_while){if("while"===z)return de=!0,m(),de=!0,void(Z.do_while=!0);d(),Z.do_block=!1}if(Z.if_block&&"else"!==z){for(;Z.mode===_e.Statement;)N();Z.if_block=!1}if("case"===z||"default"===z&&Z.in_case_statement)return d(),(Z.case_body||ge.jslint_happy)&&(g(),Z.case_body=!1),m(),Z.in_case=!0,void(Z.in_case_statement=!0);if("function"===z&&(Z.var_line&&"TK_EQUALS"!==Q&&(Z.var_line_reindented=!0),(C(Z.last_text,["}",";"])||s()&&!C(Z.last_text,["{",":","=",","]))&&(u()||Z.had_comment||(d(),d(!0))),"TK_WORD"===Q?"get"===Z.last_text||"set"===Z.last_text||"new"===Z.last_text||"return"===Z.last_text?de=!0:d():"TK_OPERATOR"===Q||"="===Z.last_text?de=!0:v(Z.mode)||d()),"TK_COMMA"!==Q&&"TK_START_EXPR"!==Q&&"TK_EQUALS"!==Q&&"TK_OPERATOR"!==Q||D()||c(),"function"===z)return m(),void(Z.last_word=z);if(se="NONE","TK_END_BLOCK"===Q?C(z,["else","catch","finally"])?"expand"===ge.brace_style||"end-expand"===ge.brace_style?se="NEWLINE":(se="SPACE",de=!0):se="NEWLINE":"TK_SEMICOLON"===Q&&Z.mode===_e.BlockStatement?se="NEWLINE":"TK_SEMICOLON"===Q&&v(Z.mode)?se="SPACE":"TK_STRING"===Q?se="NEWLINE":"TK_WORD"===Q?se="SPACE":"TK_START_BLOCK"===Q?se="NEWLINE":"TK_END_EXPR"===Q&&(de=!0,se="NEWLINE"),C(z,re)&&")"!==Z.last_text&&(se="else"===Z.last_text?"SPACE":"NEWLINE"),C(z,["else","catch","finally"]))if("TK_END_BLOCK"!==Q||"expand"===ge.brace_style||"end-expand"===ge.brace_style)d();else{o(!0);var e=X[X.length-1];"}"!==e.text[e.text.length-1]&&d(),de=!0}else"NEWLINE"===se?T(Z.last_text)?de=!0:"TK_END_EXPR"!==Q?"TK_START_EXPR"===Q&&"var"===z||":"===Z.last_text||("if"===z&&"else"===Z.last_word&&"{"!==Z.last_text?de=!0:(Z.var_line=!1,Z.var_line_reindented=!1,d())):C(z,re)&&")"!==Z.last_text&&(Z.var_line=!1,Z.var_line_reindented=!1,d()):y(Z.mode)&&","===Z.last_text&&"}"===J?d():"SPACE"===se&&(de=!0);m(),Z.last_word=z,"var"===z&&(Z.var_line=!0,Z.var_line_reindented=!1,Z.var_line_tainted=!1),"do"===z&&(Z.do_block=!0),"if"===z&&(Z.if_block=!0)}function x(){for(O()&&(de=!1);Z.mode===_e.Statement&&!Z.if_block&&!Z.do_block;)N();m(),Z.var_line=!1,Z.var_line_reindented=!1,Z.mode===_e.ObjectLiteral&&(Z.mode=_e.BlockStatement)}function j(){O()?de=!0:"TK_WORD"===Q?de=!0:"TK_COMMA"===Q||"TK_START_EXPR"===Q||"TK_EQUALS"===Q||"TK_OPERATOR"===Q?D()||c():d(),m()}function U(){Z.var_line&&(Z.var_line_tainted=!0),de=!0,m(),de=!0}function V(){if(Z.var_line)return(v(Z.mode)||"TK_END_BLOCK"===Q)&&(Z.var_line_tainted=!1),Z.var_line&&(Z.var_line_reindented=!0),m(),void(Z.var_line_tainted?(Z.var_line_tainted=!1,d()):de=!0);"TK_END_BLOCK"===Q&&Z.mode!==_e.Expression?(m(),Z.mode===_e.ObjectLiteral&&"}"===Z.last_text?d():de=!0):Z.mode===_e.ObjectLiteral?(m(),d()):(m(),de=!0)}function B(){var e=!0,t=!0;return T(Z.last_text)?(de=!0,void m()):"*"!==z||"TK_DOT"!==Q||J.match(/^\d+$/)?":"===z&&Z.in_case?(Z.case_body=!0,_(),m(),d(),void(Z.in_case=!1)):"::"===z?void m():(!ue||"--"!==z&&"++"!==z||d(),C(z,["--","++","!"])||C(z,["-","+"])&&(C(Q,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||C(Z.last_text,re)||","===Z.last_text)?(e=!1,t=!1,";"===Z.last_text&&v(Z.mode)&&(e=!0),"TK_WORD"===Q&&C(Z.last_text,re)&&(e=!0),Z.mode!==_e.BlockStatement&&Z.mode!==_e.Statement||"{"!==Z.last_text&&";"!==Z.last_text||d()):":"===z?0===Z.ternary_depth?(Z.mode===_e.BlockStatement&&(Z.mode=_e.ObjectLiteral),e=!1):Z.ternary_depth-=1:"?"===z&&(Z.ternary_depth+=1),de=de||e,m(),void(de=t)):void m()}function F(){var e,t=l(z),n=!1;for(d(!1,!0),t.length>1&&S(t.slice(1),"*")&&(n=!0),m(t[0]),e=1;e<t.length;e++)d(!1,!0),n?m(" "+r(t[e])):X[X.length-1].text.push(t[e]);d(!1,!0)}function q(){de=!0,m(),de=!0}function H(){ue?d(!1,!0):o(!0),de=!0,m(),d(!1,!0)}function G(){T(Z.last_text)?de=!0:c(")"===Z.last_text&&ge.break_chained_methods),m()}function W(){m(),"\n"===z[z.length-1]&&d()}var K,X,z,Y,Q,J,$,Z,ee,te,ne,ae,oe,ie,re,le,se,ue,ce,de,fe,pe,he,me,_e,ge,Ee="";for(ne="\n\r\t ".split(""),ae="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),le="0123456789".split(""),oe="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",oe+=" <%= <% %> <?= <? ?>",oe=oe.split(" "),re="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),_e={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},me={TK_START_EXPR:R,TK_END_EXPR:P,TK_START_BLOCK:L,TK_END_BLOCK:k,TK_WORD:M,TK_SEMICOLON:x,TK_STRING:j,TK_EQUALS:U,TK_OPERATOR:B,TK_COMMA:V,TK_BLOCK_COMMENT:F,TK_INLINE_COMMENT:q,TK_COMMENT:H,TK_DOT:G,TK_UNKNOWN:W},t=t||{},ge={},void 0!==t.space_after_anon_function&&void 0===t.jslint_happy&&(t.jslint_happy=t.space_after_anon_function),void 0!==t.braces_on_own_line&&(ge.brace_style=t.braces_on_own_line?"expand":"collapse"),ge.brace_style=t.brace_style?t.brace_style:ge.brace_style?ge.brace_style:"collapse","expand-strict"===ge.brace_style&&(ge.brace_style="expand"),ge.indent_size=t.indent_size?parseInt(t.indent_size,10):4,ge.indent_char=t.indent_char?t.indent_char:" ",ge.preserve_newlines=void 0===t.preserve_newlines||t.preserve_newlines,ge.break_chained_methods=void 0!==t.break_chained_methods&&t.break_chained_methods,ge.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),ge.space_in_paren=void 0!==t.space_in_paren&&t.space_in_paren,ge.jslint_happy=void 0!==t.jslint_happy&&t.jslint_happy,ge.keep_array_indentation=void 0!==t.keep_array_indentation&&t.keep_array_indentation,ge.space_before_conditional=void 0===t.space_before_conditional||t.space_before_conditional,ge.unescape_strings=void 0!==t.unescape_strings&&t.unescape_strings,ge.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),ge.e4x=void 0!==t.e4x&&t.e4x,t.indent_with_tabs&&(ge.indent_char="\t",ge.indent_size=1),$="";ge.indent_size>0;)$+=ge.indent_char,ge.indent_size-=1;for(;e&&(" "===e.charAt(0)||"\t"===e.charAt(0));)Ee+=e.charAt(0),e=e.substring(1);K=e,fe=e.length,Q="TK_START_BLOCK",J="",X=[a()],ce=!1,de=!1,he=[],te=[],b(_e.BlockStatement),ie=0,this.beautify=function(){for(var e,t,n,a;e=A(),z=e[0],"TK_EOF"!==(Y=e[1]);){if(n=ge.keep_array_indentation&&y(Z.mode),ue=pe>0,n)for(t=0;t<pe;t+=1)d(t>0);else if(ge.max_preserve_newlines&&pe>ge.max_preserve_newlines&&(pe=ge.max_preserve_newlines),ge.preserve_newlines&&pe>1)for(d(),t=1;t<pe;t+=1)d(!0);me[Y](),"TK_INLINE_COMMENT"!==Y&&"TK_COMMENT"!==Y&&"TK_BLOCK_COMMENT"!==Y&&"TK_UNKNOWN"!==Y&&(J=Z.last_text,Q=Y,Z.last_text=z),Z.had_comment="TK_INLINE_COMMENT"===Y||"TK_COMMENT"===Y||"TK_BLOCK_COMMENT"===Y}a=X[0].text.join("");for(var o=1;o<X.length;o++)a+="\n"+X[o].text.join("");return a=a.replace(/[\r\n ]+$/,"")}}a=[],void 0!==(o=function(){return n}.apply(t,a))&&(e.exports=o)}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PagingCollection=void 0;var o=n(18),i=a(o),r=n(44),l=a(r),s=n(43),u=a(s),c=l.default.param,d=t.PagingCollection=u.default.Collection.extend({constructor:function(){u.default.Collection.apply(this,arguments),this.configure.apply(this,arguments)},configure:function(e,t){var n=i.default.result(this,"url").split("?")[1]||"";this.paging=i.default.defaults(t.paging||{},{defaultParams:i.default.defaults({},t.params,this._parseQueryString(n)),hasNext:!1,hasPrevious:!1,params:{},pageSize:20,direction:void 0}),this.paging.params=i.default.clone(this.paging.defaultParams),this.updateUrlQuery(this.paging.defaultParams)},calculateParams:function(e,t,n){var a=i.default.clone(e);return a.skip=(parseInt(e.skip,10)||0)+t,this.paging.defaultParams.limit&&(a.limit=Math.min(this.paging.defaultParams.limit,a.limit)),a.limit=n+1,a.skip=Math.max(a.skip,0),a},pageSizeReset:function(e,t){var n=i.default.defaults(t||{},{fetch:!0});if(this.paging.direction=void 0,this.paging.pageSize=e,this.paging.params=this.paging.defaultParams,this.paging.params.limit=e,this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch()},_parseQueryString:function(e){var t=decodeURI(e).split(/&/);return i.default.reduce(t,function(e,t){var n=t.split(/=/);return 2===n.length&&(e[n[0]]=n[1]),e},{})},_iterate:function(e,t){var n=i.default.defaults(t||{},{fetch:!0});if(this.paging.params=this.calculateParams(this.paging.params,e,this.paging.pageSize),this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch({reset:!0})},next:function(e){return this.paging.direction="next",this._iterate(this.paging.pageSize,e)},previous:function(e){return this.paging.direction="previous",this._iterate(0-this.paging.pageSize,e)},shouldStringify:function(e){try{return JSON.parse(e),!1}catch(e){return!0}},updateUrlQuery:function(e){var t=i.default.result(this,"url").split("?")[0];i.default.each(["startkey","endkey","key"],function(t){i.default.has(e,t)&&this.shouldStringify(e[t])&&(e[t]=JSON.stringify(e[t]))},this),this.url=t+"?"+c(e)},fetch:function(){return!this.paging.direction&&this.paging.params.limit>0&&(this.paging.direction="fetch",this.paging.params.limit=this.paging.params.limit+1,this.updateUrlQuery(this.paging.params)),u.default.Collection.prototype.fetch.apply(this,arguments)},parse:function(e){var t=e.rows;return this.paging.hasNext=this.paging.hasPrevious=!1,this.viewMeta={total_rows:e.total_rows,offset:e.offset,update_seq:e.update_seq},this.paging.params.skip>0&&(this.paging.hasPrevious=!0),t.length===this.paging.pageSize+1&&(this.paging.hasNext=!0,t.pop(),this.viewMeta.total_rows=this.viewMeta.total_rows-1),t},hasNext:function(){return this.paging.hasNext},hasPrevious:function(){return this.paging.hasPrevious}});t.default=d},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=n(11),r=a(i),l=n(0),s=a(l),u=n(10),c=a(u),d=n(2),f=a(d),p=n(371),h=a(p),m=n(43),_=a(m),g=n(44),E=a(g),b=n(370),y=a(b),v=n(200),N=n(372),D=a(N),O=n(26);f.default.addMiddleware(D.default);var S=(0,v.createStore)((0,v.combineReducers)(f.default.reducers),v.applyMiddleware.apply(void 0,o(f.default.middlewares)));r.default.addons=h.default,f.default.router=r.default.router=new f.default.Router(r.default.addons),_.default.history.start({pushState:!1,root:r.default.root}),"ActiveXObject"in window&&E.default.ajaxSetup({cache:!1}),(0,E.default)(document).on("click","a:not([data-bypass])",function(e){var t={prop:(0,E.default)(this).prop("href"),attr:(0,E.default)(this).attr("href")},n=location.protocol+"//"+location.host;t.prop&&t.prop.slice(0,n.length)===n&&(e.preventDefault(),r.default.router.navigate(t.attr,!0))}),c.default.render(s.default.createElement(O.Provider,{store:S},s.default.createElement(y.default,{router:r.default.router})),document.getElementById("app"))}],[853]);